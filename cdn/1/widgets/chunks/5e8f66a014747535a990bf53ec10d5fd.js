"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["node_modules_arcgis_core_layers_graphics_sources_WFSSourceWorker_js"],{

/***/ "./node_modules/@arcgis/core/core/asyncUtils.js":
/*!******************************************************!*\
  !*** ./node_modules/@arcgis/core/core/asyncUtils.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "assertResult": () => (/* binding */ y),
/* harmony export */   "createTask": () => (/* binding */ d),
/* harmony export */   "forEach": () => (/* binding */ a),
/* harmony export */   "makeResultError": () => (/* binding */ h),
/* harmony export */   "makeResultOk": () => (/* binding */ c),
/* harmony export */   "map": () => (/* binding */ p),
/* harmony export */   "result": () => (/* binding */ _),
/* harmony export */   "resultError": () => (/* binding */ f),
/* harmony export */   "resultOrAbort": () => (/* binding */ b),
/* harmony export */   "resultValue": () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _maybe_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function a(r,t,o){return (0,_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.eachAlways)(r.map(((r,e)=>t.apply(o,[r,e]))))}async function p(r,t,o){return(await (0,_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.eachAlways)(r.map(((r,e)=>t.apply(o,[r,e]))))).map((r=>r.value))}function c(r){return{ok:!0,value:r}}function h(r){return{ok:!1,error:r}}function m(r){return null!=r&&!0===r.ok?r.value:null}function f(r){return null!=r&&!1===r.ok?r.error:null}async function _(r){if(null==r)return{ok:!1,error:new Error("no promise provided")};try{return c(await r)}catch(t){return h(t)}}async function b(r){try{return c(await r)}catch(t){return (0,_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAbortError)(t),h(t)}}function y(r){if(!0===r.ok)return r.value;throw r.error}function d(r,t){return new v(r,t)}let v=class extends _Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{get value(){return m(this._result)}get error(){return f(this._result)}get finished(){return null!=this._result}constructor(r,t){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=(0,_maybe_js__WEBPACK_IMPORTED_MODULE_2__.abortMaybe)(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:e}=this._abortController;this.promise=r(e),this.promise.then((r=>{this._result=c(r),this._cleanup()}),(r=>{this._result=h(r),this._cleanup()})),this._abortHandle=(0,_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.onAbort)(t,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=(0,_maybe_js__WEBPACK_IMPORTED_MODULE_2__.removeMaybe)(this._abortHandle),this._abortController=null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],v.prototype,"value",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],v.prototype,"error",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],v.prototype,"finished",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],v.prototype,"promise",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],v.prototype,"_result",void 0),v=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.subclass)("esri.core.asyncUtils.ReactiveTask")],v);


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/asyncUtils.js */ "./node_modules/@arcgis/core/core/asyncUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../featureConversionUtils.js */ "./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js");
/* harmony import */ var _data_FeatureStore_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../data/FeatureStore.js */ "./node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js");
/* harmony import */ var _data_projectionSupport_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../data/projectionSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js");
/* harmony import */ var _data_QueryEngine_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../data/QueryEngine.js */ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js");
/* harmony import */ var _geojson_geojson_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./geojson/geojson.js */ "./node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js");
/* harmony import */ var _support_sourceUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./support/sourceUtils.js */ "./node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js");
/* harmony import */ var _ogc_wfsUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../ogc/wfsUtils.js */ "./node_modules/@arcgis/core/layers/ogc/wfsUtils.js");
/* harmony import */ var _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../support/FieldsIndex.js */ "./node_modules/@arcgis/core/layers/support/FieldsIndex.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class d{constructor(){this._queryEngine=null,this._customParameters=null,this._snapshotFeatures=async e=>{const{objectIdField:t}=this._queryEngine,r=await (0,_ogc_wfsUtils_js__WEBPACK_IMPORTED_MODULE_11__.getFeature)(this._getFeatureUrl??"",this._featureType.typeName,this._getFeatureOutputFormat,{customParameters:this._customParameters,dateFields:this._queryEngine.fieldsIndex.dateFields.map((e=>e.name)),signal:e});await (0,_geojson_geojson_js__WEBPACK_IMPORTED_MODULE_9__.validateGeoJSON)(r),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(e);const a=(0,_geojson_geojson_js__WEBPACK_IMPORTED_MODULE_9__.createOptimizedFeatures)(r,{geometryType:this._queryEngine.geometryType,hasZ:!1,objectIdField:t});if(!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.equals)(this._queryEngine.spatialReference,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.WGS84))for(const s of a)null!=s.geometry&&(s.geometry=(0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_5__.convertFromGeometry)((0,_data_projectionSupport_js__WEBPACK_IMPORTED_MODULE_7__.project)((0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_5__.convertToGeometry)(s.geometry,this._queryEngine.geometryType,!1,!1),_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.WGS84,this._queryEngine.spatialReference)));let p=1;for(const s of a){const e={};(0,_support_sourceUtils_js__WEBPACK_IMPORTED_MODULE_10__.mixAttributes)(this._fieldsIndex,e,s.attributes,!0),s.attributes=e,null==s.attributes[t]&&(s.objectId=s.attributes[t]=p++)}return a}}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(e,t){const{getFeatureUrl:r,getFeatureOutputFormat:a,spatialReference:i,fields:n,geometryType:o,featureType:u,objectIdField:h,customParameters:y}=e;this._featureType=u,this._customParameters=y,this._getFeatureUrl=r,this._getFeatureOutputFormat=a,this._fieldsIndex=new _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_12__["default"](n),await this._checkProjection(i),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(t),this._queryEngine=new _data_QueryEngine_js__WEBPACK_IMPORTED_MODULE_8__.QueryEngine({fields:n,geometryType:o,hasM:!1,hasZ:!1,objectIdField:h,spatialReference:i,timeInfo:null,featureStore:new _data_FeatureStore_js__WEBPACK_IMPORTED_MODULE_6__["default"]({geometryType:o,hasM:!1,hasZ:!1})});const l=await this._snapshotFeatures(t.signal);return this._queryEngine.featureStore.addMany(l),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async applyEdits(){throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(s){return this._customParameters=s,this._snapshotTask?.abort(),this._snapshotTask=(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.createTask)(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(e=>{this._queryEngine.featureStore.clear(),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.isAbortError)(e)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger("esri.layers.WFSLayer").error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("wfs-layer:getfeature-error","An error occurred during the GetFeature request",{error:e}))})),await this._waitSnapshotComplete(),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _checkProjection(e){try{await (0,_data_projectionSupport_js__WEBPACK_IMPORTED_MODULE_7__.checkProjectionSupport)(_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.WGS84,e)}catch{throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("unsupported-projection","Projection not supported",{spatialReference:e})}}}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvNWU4ZjY2YTAxNDc0NzUzNWE5OTBiZjUzZWMxMGQ1ZmQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQzRWLGtCQUFrQixPQUFPLDREQUFDLG1DQUFtQyx3QkFBd0IsYUFBYSw0REFBQyxzREFBc0QsY0FBYyxPQUFPLGVBQWUsY0FBYyxPQUFPLGVBQWUsY0FBYyx1Q0FBdUMsY0FBYyx1Q0FBdUMsb0JBQW9CLGtCQUFrQiw4Q0FBOEMsSUFBSSxrQkFBa0IsU0FBUyxhQUFhLG9CQUFvQixJQUFJLGtCQUFrQixTQUFTLE9BQU8sbUVBQUMsVUFBVSxjQUFjLDRCQUE0QixjQUFjLGdCQUFnQixrQkFBa0Isb0JBQW9CLG9EQUFDLENBQUMsWUFBWSx1QkFBdUIsWUFBWSx1QkFBdUIsZUFBZSwwQkFBMEIsaUJBQWlCLFFBQVEsMkRBQTJELHNCQUFzQixxREFBQyx3QkFBd0Isa0VBQWtFLE1BQU0sU0FBUyx1QkFBdUIseUNBQXlDLGtDQUFrQyxPQUFPLGtDQUFrQyxxQkFBcUIseURBQUMsZUFBZSxvQkFBb0IsU0FBUyxVQUFVLGFBQWEsV0FBVyxrQkFBa0Isc0RBQUMsaURBQWlELHVEQUFDLEVBQUUsaUZBQUMsOEJBQThCLHVEQUFDLEVBQUUsaUZBQUMsOEJBQThCLHVEQUFDLEVBQUUsaUZBQUMsaUNBQWlDLHVEQUFDLEVBQUUsaUZBQUMsa0NBQWtDLHVEQUFDLEVBQUUsaUZBQUMsb0NBQW9DLHVEQUFDLEVBQUUsaUZBQUMsMENBQWtOOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSi85RDtBQUNBO0FBQ0E7QUFDQTtBQUNteUIsUUFBUSxjQUFjLG9GQUFvRixNQUFNLGdCQUFnQiwyQkFBMkIsNkRBQUMsa0ZBQWtGLHNIQUFzSCxFQUFFLE1BQU0sb0VBQUMsSUFBSSxxRUFBQyxJQUFJLFFBQVEsNEVBQUMsSUFBSSxvRUFBb0UsRUFBRSxJQUFJLGtGQUFDLG9DQUFvQyw2RUFBQyxpREFBaUQsK0VBQUMsQ0FBQyxtRUFBQyxDQUFDLDZFQUFDLGtEQUFrRCw2RUFBQyx1Q0FBdUMsUUFBUSxrQkFBa0IsV0FBVyx1RUFBQyw2R0FBNkcsVUFBVSxVQUFVLG9EQUFvRCxnQkFBZ0IsTUFBTSxxSUFBcUksR0FBRyx3SEFBd0gsZ0VBQUMsbUNBQW1DLHFFQUFDLDBCQUEwQiw2REFBQyxFQUFFLDBHQUEwRyw2REFBQyxFQUFFLCtCQUErQixFQUFFLEVBQUUsK0NBQStDLGtEQUFrRCxzRUFBc0UsbUJBQW1CLFVBQVUsc0RBQUMsaUZBQWlGLHdCQUF3QixLQUFLLEVBQUUscUZBQXFGLDRCQUE0QixLQUFLLEVBQUUsNkZBQTZGLHlCQUF5QixLQUFLLEVBQUUsMkZBQTJGLHNCQUFzQixLQUFLLEVBQUUsOEZBQThGLDBCQUEwQixFQUFFLGdHQUFnRyxpQkFBaUIsK0VBQStFLCtEQUFDLDhEQUE4RCxvRkFBb0YsT0FBTyx1Q0FBdUMsbUVBQUMsS0FBSyxpRUFBVyxtQ0FBbUMsc0RBQUMsaUZBQWlGLFFBQVEsR0FBRyx1Q0FBdUMsc0VBQXNFLDhCQUE4QixxREFBcUQsSUFBSSxpQ0FBaUMsT0FBTyxxQ0FBcUMsMEJBQTBCLElBQUksTUFBTSxrRkFBQyxDQUFDLDZFQUFDLElBQUksTUFBTSxVQUFVLHNEQUFDLHNEQUFzRCxtQkFBbUIsSUFBeUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9jb3JlL2FzeW5jVXRpbHMuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL3NvdXJjZXMvV0ZTU291cmNlV29ya2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyByfWZyb21cIi4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgdCBmcm9tXCIuL0FjY2Vzc29yLmpzXCI7aW1wb3J0e2Fib3J0TWF5YmUgYXMgbyxyZW1vdmVNYXliZSBhcyBlfWZyb21cIi4vbWF5YmUuanNcIjtpbXBvcnR7ZWFjaEFsd2F5cyBhcyBuLHRocm93SWZBYm9ydEVycm9yIGFzIHMsb25BYm9ydCBhcyBsfWZyb21cIi4vcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGl9ZnJvbVwiLi9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyB1fWZyb21cIi4vYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtmdW5jdGlvbiBhKHIsdCxvKXtyZXR1cm4gbihyLm1hcCgoKHIsZSk9PnQuYXBwbHkobyxbcixlXSkpKSl9YXN5bmMgZnVuY3Rpb24gcChyLHQsbyl7cmV0dXJuKGF3YWl0IG4oci5tYXAoKChyLGUpPT50LmFwcGx5KG8sW3IsZV0pKSkpKS5tYXAoKHI9PnIudmFsdWUpKX1mdW5jdGlvbiBjKHIpe3JldHVybntvazohMCx2YWx1ZTpyfX1mdW5jdGlvbiBoKHIpe3JldHVybntvazohMSxlcnJvcjpyfX1mdW5jdGlvbiBtKHIpe3JldHVybiBudWxsIT1yJiYhMD09PXIub2s/ci52YWx1ZTpudWxsfWZ1bmN0aW9uIGYocil7cmV0dXJuIG51bGwhPXImJiExPT09ci5vaz9yLmVycm9yOm51bGx9YXN5bmMgZnVuY3Rpb24gXyhyKXtpZihudWxsPT1yKXJldHVybntvazohMSxlcnJvcjpuZXcgRXJyb3IoXCJubyBwcm9taXNlIHByb3ZpZGVkXCIpfTt0cnl7cmV0dXJuIGMoYXdhaXQgcil9Y2F0Y2godCl7cmV0dXJuIGgodCl9fWFzeW5jIGZ1bmN0aW9uIGIocil7dHJ5e3JldHVybiBjKGF3YWl0IHIpfWNhdGNoKHQpe3JldHVybiBzKHQpLGgodCl9fWZ1bmN0aW9uIHkocil7aWYoITA9PT1yLm9rKXJldHVybiByLnZhbHVlO3Rocm93IHIuZXJyb3J9ZnVuY3Rpb24gZChyLHQpe3JldHVybiBuZXcgdihyLHQpfWxldCB2PWNsYXNzIGV4dGVuZHMgdHtnZXQgdmFsdWUoKXtyZXR1cm4gbSh0aGlzLl9yZXN1bHQpfWdldCBlcnJvcigpe3JldHVybiBmKHRoaXMuX3Jlc3VsdCl9Z2V0IGZpbmlzaGVkKCl7cmV0dXJuIG51bGwhPXRoaXMuX3Jlc3VsdH1jb25zdHJ1Y3RvcihyLHQpe3N1cGVyKHt9KSx0aGlzLl9yZXN1bHQ9bnVsbCx0aGlzLl9hYm9ydEhhbmRsZT1udWxsLHRoaXMuYWJvcnQ9KCk9Pnt0aGlzLl9hYm9ydENvbnRyb2xsZXI9byh0aGlzLl9hYm9ydENvbnRyb2xsZXIpfSx0aGlzLnJlbW92ZT10aGlzLmFib3J0LHRoaXMuX2Fib3J0Q29udHJvbGxlcj1uZXcgQWJvcnRDb250cm9sbGVyO2NvbnN0e3NpZ25hbDplfT10aGlzLl9hYm9ydENvbnRyb2xsZXI7dGhpcy5wcm9taXNlPXIoZSksdGhpcy5wcm9taXNlLnRoZW4oKHI9Pnt0aGlzLl9yZXN1bHQ9YyhyKSx0aGlzLl9jbGVhbnVwKCl9KSwocj0+e3RoaXMuX3Jlc3VsdD1oKHIpLHRoaXMuX2NsZWFudXAoKX0pKSx0aGlzLl9hYm9ydEhhbmRsZT1sKHQsdGhpcy5hYm9ydCl9bm9ybWFsaXplQ3RvckFyZ3MoKXtyZXR1cm57fX1kZXN0cm95KCl7dGhpcy5hYm9ydCgpfV9jbGVhbnVwKCl7dGhpcy5fYWJvcnRIYW5kbGU9ZSh0aGlzLl9hYm9ydEhhbmRsZSksdGhpcy5fYWJvcnRDb250cm9sbGVyPW51bGx9fTtyKFtpKCldLHYucHJvdG90eXBlLFwidmFsdWVcIixudWxsKSxyKFtpKCldLHYucHJvdG90eXBlLFwiZXJyb3JcIixudWxsKSxyKFtpKCldLHYucHJvdG90eXBlLFwiZmluaXNoZWRcIixudWxsKSxyKFtpKCldLHYucHJvdG90eXBlLFwicHJvbWlzZVwiLHZvaWQgMCkscihbaSgpXSx2LnByb3RvdHlwZSxcIl9yZXN1bHRcIix2b2lkIDApLHY9cihbdShcImVzcmkuY29yZS5hc3luY1V0aWxzLlJlYWN0aXZlVGFza1wiKV0sdik7ZXhwb3J0e3kgYXMgYXNzZXJ0UmVzdWx0LGQgYXMgY3JlYXRlVGFzayxhIGFzIGZvckVhY2gsaCBhcyBtYWtlUmVzdWx0RXJyb3IsYyBhcyBtYWtlUmVzdWx0T2sscCBhcyBtYXAsXyBhcyByZXN1bHQsZiBhcyByZXN1bHRFcnJvcixiIGFzIHJlc3VsdE9yQWJvcnQsbSBhcyByZXN1bHRWYWx1ZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2NyZWF0ZVRhc2sgYXMgZX1mcm9tXCIuLi8uLi8uLi9jb3JlL2FzeW5jVXRpbHMuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0IHIgZnJvbVwiLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7dGhyb3dJZkFib3J0ZWQgYXMgcyxpc0Fib3J0RXJyb3IgYXMgYX1mcm9tXCIuLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHtlcXVhbHMgYXMgaSxXR1M4NCBhcyBufWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvc3BhdGlhbFJlZmVyZW5jZVV0aWxzLmpzXCI7aW1wb3J0e2NvbnZlcnRGcm9tR2VvbWV0cnkgYXMgbyxjb252ZXJ0VG9HZW9tZXRyeSBhcyB1fWZyb21cIi4uL2ZlYXR1cmVDb252ZXJzaW9uVXRpbHMuanNcIjtpbXBvcnQgcCBmcm9tXCIuLi9kYXRhL0ZlYXR1cmVTdG9yZS5qc1wiO2ltcG9ydHtwcm9qZWN0IGFzIGgsY2hlY2tQcm9qZWN0aW9uU3VwcG9ydCBhcyB5fWZyb21cIi4uL2RhdGEvcHJvamVjdGlvblN1cHBvcnQuanNcIjtpbXBvcnR7UXVlcnlFbmdpbmUgYXMgY31mcm9tXCIuLi9kYXRhL1F1ZXJ5RW5naW5lLmpzXCI7aW1wb3J0e3ZhbGlkYXRlR2VvSlNPTiBhcyBsLGNyZWF0ZU9wdGltaXplZEZlYXR1cmVzIGFzIG19ZnJvbVwiLi9nZW9qc29uL2dlb2pzb24uanNcIjtpbXBvcnR7bWl4QXR0cmlidXRlcyBhcyBnfWZyb21cIi4vc3VwcG9ydC9zb3VyY2VVdGlscy5qc1wiO2ltcG9ydHtnZXRGZWF0dXJlIGFzIF99ZnJvbVwiLi4vLi4vb2djL3dmc1V0aWxzLmpzXCI7aW1wb3J0IGYgZnJvbVwiLi4vLi4vc3VwcG9ydC9GaWVsZHNJbmRleC5qc1wiO2NsYXNzIGR7Y29uc3RydWN0b3IoKXt0aGlzLl9xdWVyeUVuZ2luZT1udWxsLHRoaXMuX2N1c3RvbVBhcmFtZXRlcnM9bnVsbCx0aGlzLl9zbmFwc2hvdEZlYXR1cmVzPWFzeW5jIGU9Pntjb25zdHtvYmplY3RJZEZpZWxkOnR9PXRoaXMuX3F1ZXJ5RW5naW5lLHI9YXdhaXQgXyh0aGlzLl9nZXRGZWF0dXJlVXJsPz9cIlwiLHRoaXMuX2ZlYXR1cmVUeXBlLnR5cGVOYW1lLHRoaXMuX2dldEZlYXR1cmVPdXRwdXRGb3JtYXQse2N1c3RvbVBhcmFtZXRlcnM6dGhpcy5fY3VzdG9tUGFyYW1ldGVycyxkYXRlRmllbGRzOnRoaXMuX3F1ZXJ5RW5naW5lLmZpZWxkc0luZGV4LmRhdGVGaWVsZHMubWFwKChlPT5lLm5hbWUpKSxzaWduYWw6ZX0pO2F3YWl0IGwocikscyhlKTtjb25zdCBhPW0ocix7Z2VvbWV0cnlUeXBlOnRoaXMuX3F1ZXJ5RW5naW5lLmdlb21ldHJ5VHlwZSxoYXNaOiExLG9iamVjdElkRmllbGQ6dH0pO2lmKCFpKHRoaXMuX3F1ZXJ5RW5naW5lLnNwYXRpYWxSZWZlcmVuY2UsbikpZm9yKGNvbnN0IHMgb2YgYSludWxsIT1zLmdlb21ldHJ5JiYocy5nZW9tZXRyeT1vKGgodShzLmdlb21ldHJ5LHRoaXMuX3F1ZXJ5RW5naW5lLmdlb21ldHJ5VHlwZSwhMSwhMSksbix0aGlzLl9xdWVyeUVuZ2luZS5zcGF0aWFsUmVmZXJlbmNlKSkpO2xldCBwPTE7Zm9yKGNvbnN0IHMgb2YgYSl7Y29uc3QgZT17fTtnKHRoaXMuX2ZpZWxkc0luZGV4LGUscy5hdHRyaWJ1dGVzLCEwKSxzLmF0dHJpYnV0ZXM9ZSxudWxsPT1zLmF0dHJpYnV0ZXNbdF0mJihzLm9iamVjdElkPXMuYXR0cmlidXRlc1t0XT1wKyspfXJldHVybiBhfX1kZXN0cm95KCl7dGhpcy5fcXVlcnlFbmdpbmU/LmRlc3Ryb3koKSx0aGlzLl9xdWVyeUVuZ2luZT1udWxsfWFzeW5jIGxvYWQoZSx0KXtjb25zdHtnZXRGZWF0dXJlVXJsOnIsZ2V0RmVhdHVyZU91dHB1dEZvcm1hdDphLHNwYXRpYWxSZWZlcmVuY2U6aSxmaWVsZHM6bixnZW9tZXRyeVR5cGU6byxmZWF0dXJlVHlwZTp1LG9iamVjdElkRmllbGQ6aCxjdXN0b21QYXJhbWV0ZXJzOnl9PWU7dGhpcy5fZmVhdHVyZVR5cGU9dSx0aGlzLl9jdXN0b21QYXJhbWV0ZXJzPXksdGhpcy5fZ2V0RmVhdHVyZVVybD1yLHRoaXMuX2dldEZlYXR1cmVPdXRwdXRGb3JtYXQ9YSx0aGlzLl9maWVsZHNJbmRleD1uZXcgZihuKSxhd2FpdCB0aGlzLl9jaGVja1Byb2plY3Rpb24oaSkscyh0KSx0aGlzLl9xdWVyeUVuZ2luZT1uZXcgYyh7ZmllbGRzOm4sZ2VvbWV0cnlUeXBlOm8saGFzTTohMSxoYXNaOiExLG9iamVjdElkRmllbGQ6aCxzcGF0aWFsUmVmZXJlbmNlOmksdGltZUluZm86bnVsbCxmZWF0dXJlU3RvcmU6bmV3IHAoe2dlb21ldHJ5VHlwZTpvLGhhc006ITEsaGFzWjohMX0pfSk7Y29uc3QgbD1hd2FpdCB0aGlzLl9zbmFwc2hvdEZlYXR1cmVzKHQuc2lnbmFsKTtyZXR1cm4gdGhpcy5fcXVlcnlFbmdpbmUuZmVhdHVyZVN0b3JlLmFkZE1hbnkobCkse2V4dGVudDooYXdhaXQgdGhpcy5fcXVlcnlFbmdpbmUuZmV0Y2hSZWNvbXB1dGVkRXh0ZW50cygpKS5mdWxsRXh0ZW50fX1hc3luYyBhcHBseUVkaXRzKCl7dGhyb3cgbmV3IHQoXCJ3ZnMtc291cmNlOmVkaXRpbmctbm90LXN1cHBvcnRlZFwiLFwiYXBwbHlFZGl0cygpIGlzIG5vdCBzdXBwb3J0ZWQgb24gV0ZTTGF5ZXJcIil9YXN5bmMgcXVlcnlGZWF0dXJlcyhlPXt9LHQ9e30pe3JldHVybiBhd2FpdCB0aGlzLl93YWl0U25hcHNob3RDb21wbGV0ZSgpLHRoaXMuX3F1ZXJ5RW5naW5lLmV4ZWN1dGVRdWVyeShlLHQuc2lnbmFsKX1hc3luYyBxdWVyeUZlYXR1cmVDb3VudChlPXt9LHQ9e30pe3JldHVybiBhd2FpdCB0aGlzLl93YWl0U25hcHNob3RDb21wbGV0ZSgpLHRoaXMuX3F1ZXJ5RW5naW5lLmV4ZWN1dGVRdWVyeUZvckNvdW50KGUsdC5zaWduYWwpfWFzeW5jIHF1ZXJ5T2JqZWN0SWRzKGU9e30sdD17fSl7cmV0dXJuIGF3YWl0IHRoaXMuX3dhaXRTbmFwc2hvdENvbXBsZXRlKCksdGhpcy5fcXVlcnlFbmdpbmUuZXhlY3V0ZVF1ZXJ5Rm9ySWRzKGUsdC5zaWduYWwpfWFzeW5jIHF1ZXJ5RXh0ZW50KGU9e30sdD17fSl7cmV0dXJuIGF3YWl0IHRoaXMuX3dhaXRTbmFwc2hvdENvbXBsZXRlKCksdGhpcy5fcXVlcnlFbmdpbmUuZXhlY3V0ZVF1ZXJ5Rm9yRXh0ZW50KGUsdC5zaWduYWwpfWFzeW5jIHF1ZXJ5U25hcHBpbmcoZSx0PXt9KXtyZXR1cm4gYXdhaXQgdGhpcy5fd2FpdFNuYXBzaG90Q29tcGxldGUoKSx0aGlzLl9xdWVyeUVuZ2luZS5leGVjdXRlUXVlcnlGb3JTbmFwcGluZyhlLHQuc2lnbmFsKX1hc3luYyByZWZyZXNoKHMpe3JldHVybiB0aGlzLl9jdXN0b21QYXJhbWV0ZXJzPXMsdGhpcy5fc25hcHNob3RUYXNrPy5hYm9ydCgpLHRoaXMuX3NuYXBzaG90VGFzaz1lKHRoaXMuX3NuYXBzaG90RmVhdHVyZXMpLHRoaXMuX3NuYXBzaG90VGFzay5wcm9taXNlLnRoZW4oKGU9Pnt0aGlzLl9xdWVyeUVuZ2luZS5mZWF0dXJlU3RvcmUuY2xlYXIoKSxlJiZ0aGlzLl9xdWVyeUVuZ2luZS5mZWF0dXJlU3RvcmUuYWRkTWFueShlKX0pLChlPT57dGhpcy5fcXVlcnlFbmdpbmUuZmVhdHVyZVN0b3JlLmNsZWFyKCksYShlKXx8ci5nZXRMb2dnZXIoXCJlc3JpLmxheWVycy5XRlNMYXllclwiKS5lcnJvcihuZXcgdChcIndmcy1sYXllcjpnZXRmZWF0dXJlLWVycm9yXCIsXCJBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgdGhlIEdldEZlYXR1cmUgcmVxdWVzdFwiLHtlcnJvcjplfSkpfSkpLGF3YWl0IHRoaXMuX3dhaXRTbmFwc2hvdENvbXBsZXRlKCkse2V4dGVudDooYXdhaXQgdGhpcy5fcXVlcnlFbmdpbmUuZmV0Y2hSZWNvbXB1dGVkRXh0ZW50cygpKS5mdWxsRXh0ZW50fX1hc3luYyBfd2FpdFNuYXBzaG90Q29tcGxldGUoKXtpZih0aGlzLl9zbmFwc2hvdFRhc2smJiF0aGlzLl9zbmFwc2hvdFRhc2suZmluaXNoZWQpe3RyeXthd2FpdCB0aGlzLl9zbmFwc2hvdFRhc2sucHJvbWlzZX1jYXRjaHt9cmV0dXJuIHRoaXMuX3dhaXRTbmFwc2hvdENvbXBsZXRlKCl9fWFzeW5jIF9jaGVja1Byb2plY3Rpb24oZSl7dHJ5e2F3YWl0IHkobixlKX1jYXRjaHt0aHJvdyBuZXcgdChcInVuc3VwcG9ydGVkLXByb2plY3Rpb25cIixcIlByb2plY3Rpb24gbm90IHN1cHBvcnRlZFwiLHtzcGF0aWFsUmVmZXJlbmNlOmV9KX19fWV4cG9ydHtkIGFzIGRlZmF1bHR9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9