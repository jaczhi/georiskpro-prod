"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[4832],{34344:(t,e,n)=>{function r(){return[1,0,0,0,1,0,0,0,1]}function o(t,e,n,r,o,i,s,a,c){return[t,e,n,r,o,i,s,a,c]}function i(t,e){return new Float64Array(t,e,9)}n.d(e,{a:()=>i,c:()=>r,f:()=>o}),Object.freeze(Object.defineProperty({__proto__:null,clone:function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},create:r,createView:i,fromValues:o},Symbol.toStringTag,{value:"Module"}))},24455:(t,e,n)=>{n.d(e,{A:()=>m,a:()=>c,d:()=>_,e:()=>f,f:()=>d,g:()=>O,h:()=>p,i:()=>s,j:()=>b,k:()=>l,m:()=>u,s:()=>i,t:()=>a,w:()=>h,y:()=>E,z:()=>A});var r=n(8909),o=n(93011);function i(t,e,n,r,o,i,s,a,c,u,h,l,f,d,_,m,T){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=s,t[6]=a,t[7]=c,t[8]=u,t[9]=h,t[10]=l,t[11]=f,t[12]=d,t[13]=_,t[14]=m,t[15]=T,t}function s(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function a(t,e){if(t===e){const n=e[1],r=e[2],o=e[3],i=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=o,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function c(t,e){const n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],a=e[5],c=e[6],u=e[7],h=e[8],l=e[9],f=e[10],d=e[11],_=e[12],m=e[13],T=e[14],g=e[15],O=n*a-r*s,M=n*c-o*s,p=n*u-i*s,b=r*c-o*a,A=r*u-i*a,E=o*u-i*c,N=h*m-l*_,I=h*T-f*_,S=h*g-d*_,R=l*T-f*m,P=l*g-d*m,F=f*g-d*T;let L=O*F-M*P+p*R+b*S-A*I+E*N;return L?(L=1/L,t[0]=(a*F-c*P+u*R)*L,t[1]=(o*P-r*F-i*R)*L,t[2]=(m*E-T*A+g*b)*L,t[3]=(f*A-l*E-d*b)*L,t[4]=(c*S-s*F-u*I)*L,t[5]=(n*F-o*S+i*I)*L,t[6]=(T*p-_*E-g*M)*L,t[7]=(h*E-f*p+d*M)*L,t[8]=(s*P-a*S+u*N)*L,t[9]=(r*S-n*P-i*N)*L,t[10]=(_*A-m*p+g*O)*L,t[11]=(l*p-h*A-d*O)*L,t[12]=(a*I-s*R-c*N)*L,t[13]=(n*R-r*I+o*N)*L,t[14]=(m*M-_*b-T*O)*L,t[15]=(h*b-l*M+f*O)*L,t):null}function u(t,e,n){const r=e[0],o=e[1],i=e[2],s=e[3],a=e[4],c=e[5],u=e[6],h=e[7],l=e[8],f=e[9],d=e[10],_=e[11],m=e[12],T=e[13],g=e[14],O=e[15];let M=n[0],p=n[1],b=n[2],A=n[3];return t[0]=M*r+p*a+b*l+A*m,t[1]=M*o+p*c+b*f+A*T,t[2]=M*i+p*u+b*d+A*g,t[3]=M*s+p*h+b*_+A*O,M=n[4],p=n[5],b=n[6],A=n[7],t[4]=M*r+p*a+b*l+A*m,t[5]=M*o+p*c+b*f+A*T,t[6]=M*i+p*u+b*d+A*g,t[7]=M*s+p*h+b*_+A*O,M=n[8],p=n[9],b=n[10],A=n[11],t[8]=M*r+p*a+b*l+A*m,t[9]=M*o+p*c+b*f+A*T,t[10]=M*i+p*u+b*d+A*g,t[11]=M*s+p*h+b*_+A*O,M=n[12],p=n[13],b=n[14],A=n[15],t[12]=M*r+p*a+b*l+A*m,t[13]=M*o+p*c+b*f+A*T,t[14]=M*i+p*u+b*d+A*g,t[15]=M*s+p*h+b*_+A*O,t}function h(t,e,n){const r=n[0],o=n[1],i=n[2];if(e===t)t[12]=e[0]*r+e[4]*o+e[8]*i+e[12],t[13]=e[1]*r+e[5]*o+e[9]*i+e[13],t[14]=e[2]*r+e[6]*o+e[10]*i+e[14],t[15]=e[3]*r+e[7]*o+e[11]*i+e[15];else{const n=e[0],s=e[1],a=e[2],c=e[3],u=e[4],h=e[5],l=e[6],f=e[7],d=e[8],_=e[9],m=e[10],T=e[11];t[0]=n,t[1]=s,t[2]=a,t[3]=c,t[4]=u,t[5]=h,t[6]=l,t[7]=f,t[8]=d,t[9]=_,t[10]=m,t[11]=T,t[12]=n*r+u*o+d*i+e[12],t[13]=s*r+h*o+_*i+e[13],t[14]=a*r+l*o+m*i+e[14],t[15]=c*r+f*o+T*i+e[15]}return t}function l(t,e,n){const r=n[0],o=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function f(t,e,n,r){let i,s,a,c,u,h,l,f,d,_,m,T,g,O,M,p,b,A,E,N,I,S,R,P,F=r[0],L=r[1],x=r[2],y=Math.sqrt(F*F+L*L+x*x);return y<(0,o.g)()?null:(y=1/y,F*=y,L*=y,x*=y,i=Math.sin(n),s=Math.cos(n),a=1-s,c=e[0],u=e[1],h=e[2],l=e[3],f=e[4],d=e[5],_=e[6],m=e[7],T=e[8],g=e[9],O=e[10],M=e[11],p=F*F*a+s,b=L*F*a+x*i,A=x*F*a-L*i,E=F*L*a-x*i,N=L*L*a+s,I=x*L*a+F*i,S=F*x*a+L*i,R=L*x*a-F*i,P=x*x*a+s,t[0]=c*p+f*b+T*A,t[1]=u*p+d*b+g*A,t[2]=h*p+_*b+O*A,t[3]=l*p+m*b+M*A,t[4]=c*E+f*N+T*I,t[5]=u*E+d*N+g*I,t[6]=h*E+_*N+O*I,t[7]=l*E+m*N+M*I,t[8]=c*S+f*R+T*P,t[9]=u*S+d*R+g*P,t[10]=h*S+_*R+O*P,t[11]=l*S+m*R+M*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function d(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function _(t,e,n){if(0===e)return s(t);let r,i,a,c=n[0],u=n[1],h=n[2],l=Math.sqrt(c*c+u*u+h*h);return l<(0,o.g)()?null:(l=1/l,c*=l,u*=l,h*=l,r=Math.sin(e),i=Math.cos(e),a=1-i,t[0]=c*c*a+i,t[1]=u*c*a+h*r,t[2]=h*c*a-u*r,t[3]=0,t[4]=c*u*a-h*r,t[5]=u*u*a+i,t[6]=h*u*a+c*r,t[7]=0,t[8]=c*h*a+u*r,t[9]=u*h*a-c*r,t[10]=h*h*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function m(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,e,n){const r=e[0],o=e[1],i=e[2],s=e[3],a=r+r,c=o+o,u=i+i,h=r*a,l=r*c,f=r*u,d=o*c,_=o*u,m=i*u,T=s*a,g=s*c,O=s*u;return t[0]=1-(d+m),t[1]=l+O,t[2]=f-g,t[3]=0,t[4]=l-O,t[5]=1-(h+m),t[6]=_+T,t[7]=0,t[8]=f+g,t[9]=_-T,t[10]=1-(h+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}const g=(0,r.c)();function O(t,e,n,r){const o=e[0],i=e[1],s=e[2],a=e[3],c=o+o,u=i+i,h=s+s,l=o*c,f=o*u,d=o*h,_=i*u,m=i*h,T=s*h,g=a*c,O=a*u,M=a*h,p=r[0],b=r[1],A=r[2];return t[0]=(1-(_+T))*p,t[1]=(f+M)*p,t[2]=(d-O)*p,t[3]=0,t[4]=(f-M)*b,t[5]=(1-(l+T))*b,t[6]=(m+g)*b,t[7]=0,t[8]=(d+O)*A,t[9]=(m-g)*A,t[10]=(1-(l+_))*A,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function M(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function p(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function b(t,e){if(t===e)return!0;const n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],c=t[5],u=t[6],h=t[7],l=t[8],f=t[9],d=t[10],_=t[11],m=t[12],T=t[13],g=t[14],O=t[15],M=e[0],p=e[1],b=e[2],A=e[3],E=e[4],N=e[5],I=e[6],S=e[7],R=e[8],P=e[9],F=e[10],L=e[11],x=e[12],y=e[13],v=e[14],w=e[15],B=(0,o.g)();return Math.abs(n-M)<=B*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(r-p)<=B*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(i-b)<=B*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(s-A)<=B*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(a-E)<=B*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(c-N)<=B*Math.max(1,Math.abs(c),Math.abs(N))&&Math.abs(u-I)<=B*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(h-S)<=B*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(l-R)<=B*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(f-P)<=B*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(d-F)<=B*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(_-L)<=B*Math.max(1,Math.abs(_),Math.abs(L))&&Math.abs(m-x)<=B*Math.max(1,Math.abs(m),Math.abs(x))&&Math.abs(T-y)<=B*Math.max(1,Math.abs(T),Math.abs(y))&&Math.abs(g-v)<=B*Math.max(1,Math.abs(g),Math.abs(v))&&Math.abs(O-w)<=B*Math.max(1,Math.abs(O),Math.abs(w))}function A(t){const e=(0,o.g)(),n=t[0],r=t[1],i=t[2],s=t[4],a=t[5],c=t[6],u=t[8],h=t[9],l=t[10];return Math.abs(1-(n*n+s*s+u*u))<=e&&Math.abs(1-(r*r+a*a+h*h))<=e&&Math.abs(1-(i*i+c*c+l*l))<=e}function E(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[8]&&0===t[9]&&1===t[10]}const N=u,I=M;Object.freeze(Object.defineProperty({__proto__:null,add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},adjoint:function(t,e){const n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],a=e[5],c=e[6],u=e[7],h=e[8],l=e[9],f=e[10],d=e[11],_=e[12],m=e[13],T=e[14],g=e[15];return t[0]=a*(f*g-d*T)-l*(c*g-u*T)+m*(c*d-u*f),t[1]=-(r*(f*g-d*T)-l*(o*g-i*T)+m*(o*d-i*f)),t[2]=r*(c*g-u*T)-a*(o*g-i*T)+m*(o*u-i*c),t[3]=-(r*(c*d-u*f)-a*(o*d-i*f)+l*(o*u-i*c)),t[4]=-(s*(f*g-d*T)-h*(c*g-u*T)+_*(c*d-u*f)),t[5]=n*(f*g-d*T)-h*(o*g-i*T)+_*(o*d-i*f),t[6]=-(n*(c*g-u*T)-s*(o*g-i*T)+_*(o*u-i*c)),t[7]=n*(c*d-u*f)-s*(o*d-i*f)+h*(o*u-i*c),t[8]=s*(l*g-d*m)-h*(a*g-u*m)+_*(a*d-u*l),t[9]=-(n*(l*g-d*m)-h*(r*g-i*m)+_*(r*d-i*l)),t[10]=n*(a*g-u*m)-s*(r*g-i*m)+_*(r*u-i*a),t[11]=-(n*(a*d-u*l)-s*(r*d-i*l)+h*(r*u-i*a)),t[12]=-(s*(l*T-f*m)-h*(a*T-c*m)+_*(a*f-c*l)),t[13]=n*(l*T-f*m)-h*(r*T-o*m)+_*(r*f-o*l),t[14]=-(n*(a*T-c*m)-s*(r*T-o*m)+_*(r*c-o*a)),t[15]=n*(a*f-c*l)-s*(r*f-o*l)+h*(r*c-o*a),t},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},determinant:function(t){const e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],s=t[5],a=t[6],c=t[7],u=t[8],h=t[9],l=t[10],f=t[11],d=t[12],_=t[13],m=t[14],T=t[15];return(e*s-n*i)*(l*T-f*m)-(e*a-r*i)*(h*T-f*_)+(e*c-o*i)*(h*m-l*_)+(n*a-r*s)*(u*T-f*d)-(n*c-o*s)*(u*m-l*d)+(r*c-o*a)*(u*_-h*d)},equals:b,exactEquals:p,frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)},fromQuat:function(t,e){const n=e[0],r=e[1],o=e[2],i=e[3],s=n+n,a=r+r,c=o+o,u=n*s,h=r*s,l=r*a,f=o*s,d=o*a,_=o*c,m=i*s,T=i*a,g=i*c;return t[0]=1-l-_,t[1]=h+g,t[2]=f-T,t[3]=0,t[4]=h-g,t[5]=1-u-_,t[6]=d+m,t[7]=0,t[8]=f+T,t[9]=d-m,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromQuat2:function(t,e){const n=g,r=-e[0],o=-e[1],i=-e[2],s=e[3],a=e[4],c=e[5],u=e[6],h=e[7],l=r*r+o*o+i*i+s*s;return l>0?(n[0]=2*(a*s+h*r+c*i-u*o)/l,n[1]=2*(c*s+h*o+u*r-a*i)/l,n[2]=2*(u*s+h*i+a*o-c*r)/l):(n[0]=2*(a*s+h*r+c*i-u*o),n[1]=2*(c*s+h*o+u*r-a*i),n[2]=2*(u*s+h*i+a*o-c*r)),T(t,e,n),t},fromRotation:_,fromRotationTranslation:T,fromRotationTranslationScale:O,fromRotationTranslationScaleOrigin:function(t,e,n,r,o){const i=e[0],s=e[1],a=e[2],c=e[3],u=i+i,h=s+s,l=a+a,f=i*u,d=i*h,_=i*l,m=s*h,T=s*l,g=a*l,O=c*u,M=c*h,p=c*l,b=r[0],A=r[1],E=r[2],N=o[0],I=o[1],S=o[2],R=(1-(m+g))*b,P=(d+p)*b,F=(_-M)*b,L=(d-p)*A,x=(1-(f+g))*A,y=(T+O)*A,v=(_+M)*E,w=(T-O)*E,B=(1-(f+m))*E;return t[0]=R,t[1]=P,t[2]=F,t[3]=0,t[4]=L,t[5]=x,t[6]=y,t[7]=0,t[8]=v,t[9]=w,t[10]=B,t[11]=0,t[12]=n[0]+N-(R*N+L*I+v*S),t[13]=n[1]+I-(P*N+x*I+w*S),t[14]=n[2]+S-(F*N+y*I+B*S),t[15]=1,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromTranslation:d,fromXRotation:m,fromYRotation:function(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,e,n,r,o,i,s){const a=1/(n-e),c=1/(o-r),u=1/(i-s);return t[0]=2*i*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*c,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(o+r)*c,t[10]=(s+i)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*i*2*u,t[15]=0,t},getRotation:function(t,e){const n=e[0]+e[5]+e[10];let r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},getScaling:function(t,e){const n=e[0],r=e[1],o=e[2],i=e[4],s=e[5],a=e[6],c=e[8],u=e[9],h=e[10];return t[0]=Math.sqrt(n*n+r*r+o*o),t[1]=Math.sqrt(i*i+s*s+a*a),t[2]=Math.sqrt(c*c+u*u+h*h),t},getTranslation:function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},hasIdentityRotation:E,identity:s,invert:c,invertOrIdentity:function(t,e){return c(t,e)||s(t),t},isOrthoNormal:A,lookAt:function(t,e,n,r){const i=e[0],a=e[1],c=e[2];let u=i-n[0],h=a-n[1],l=c-n[2];const f=(0,o.g)();if(Math.abs(u)<f&&Math.abs(h)<f&&Math.abs(l)<f)return void s(t);let d=1/Math.sqrt(u*u+h*h+l*l);u*=d,h*=d,l*=d;const _=r[0],m=r[1],T=r[2];let g=m*l-T*h,O=T*u-_*l,M=_*h-m*u;d=Math.sqrt(g*g+O*O+M*M),d?(d=1/d,g*=d,O*=d,M*=d):(g=0,O=0,M=0);let p=h*M-l*O,b=l*g-u*M,A=u*O-h*g;d=Math.sqrt(p*p+b*b+A*A),d?(d=1/d,p*=d,b*=d,A*=d):(p=0,b=0,A=0),t[0]=g,t[1]=p,t[2]=u,t[3]=0,t[4]=O,t[5]=b,t[6]=h,t[7]=0,t[8]=M,t[9]=A,t[10]=l,t[11]=0,t[12]=-(g*i+O*a+M*c),t[13]=-(p*i+b*a+A*c),t[14]=-(u*i+h*a+l*c),t[15]=1},mul:N,multiply:u,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},ortho:function(t,e,n,r,o,i,s){const a=1/(e-n),c=1/(r-o),u=1/(i-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*a,t[13]=(o+r)*c,t[14]=(s+i)*u,t[15]=1,t},perspective:function(t,e,n,r,o){const i=1/Math.tan(e/2);let s;return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(s=1/(r-o),t[10]=(o+r)*s,t[14]=2*o*r*s):(t[10]=-1,t[14]=-2*r),t},perspectiveFromFieldOfView:function(t,e,n,r){const o=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),c=2/(s+a),u=2/(o+i);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(s-a)*c*.5,t[9]=(o-i)*u*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},rotate:f,rotateX:function(t,e,n){const r=Math.sin(n),o=Math.cos(n),i=e[4],s=e[5],a=e[6],c=e[7],u=e[8],h=e[9],l=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*o+u*r,t[5]=s*o+h*r,t[6]=a*o+l*r,t[7]=c*o+f*r,t[8]=u*o-i*r,t[9]=h*o-s*r,t[10]=l*o-a*r,t[11]=f*o-c*r,t},rotateY:function(t,e,n){const r=Math.sin(n),o=Math.cos(n),i=e[0],s=e[1],a=e[2],c=e[3],u=e[8],h=e[9],l=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o-u*r,t[1]=s*o-h*r,t[2]=a*o-l*r,t[3]=c*o-f*r,t[8]=i*r+u*o,t[9]=s*r+h*o,t[10]=a*r+l*o,t[11]=c*r+f*o,t},rotateZ:function(t,e,n){const r=Math.sin(n),o=Math.cos(n),i=e[0],s=e[1],a=e[2],c=e[3],u=e[4],h=e[5],l=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o+u*r,t[1]=s*o+h*r,t[2]=a*o+l*r,t[3]=c*o+f*r,t[4]=u*o-i*r,t[5]=h*o-s*r,t[6]=l*o-a*r,t[7]=f*o-c*r,t},scale:l,set:i,str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},sub:I,subtract:M,targetTo:function(t,e,n,r){const o=e[0],i=e[1],s=e[2],a=r[0],c=r[1],u=r[2];let h=o-n[0],l=i-n[1],f=s-n[2],d=h*h+l*l+f*f;d>0&&(d=1/Math.sqrt(d),h*=d,l*=d,f*=d);let _=c*f-u*l,m=u*h-a*f,T=a*l-c*h;return d=_*_+m*m+T*T,d>0&&(d=1/Math.sqrt(d),_*=d,m*=d,T*=d),t[0]=_,t[1]=m,t[2]=T,t[3]=0,t[4]=l*T-f*m,t[5]=f*_-h*T,t[6]=h*m-l*_,t[7]=0,t[8]=h,t[9]=l,t[10]=f,t[11]=0,t[12]=o,t[13]=i,t[14]=s,t[15]=1,t},translate:h,transpose:a},Symbol.toStringTag,{value:"Module"}))},39100:(t,e,n)=>{function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function i(t,e){return new Float64Array(t,e,16)}n.d(e,{I:()=>s,a:()=>i,b:()=>o,c:()=>r});const s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:o,create:r,createView:i,fromValues:function(t,e,n,r,o,i,s,a,c,u,h,l,f,d,_,m){return[t,e,n,r,o,i,s,a,c,u,h,l,f,d,_,m]}},Symbol.toStringTag,{value:"Module"}))},61044:(t,e,n)=>{function r(){return[0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3]]}function i(t,e){return new Float64Array(t,e,4)}n.d(e,{I:()=>s,a:()=>r,b:()=>o,c:()=>i});const s=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:o,create:r,createView:i,fromValues:function(t,e,n,r){return[t,e,n,r]}},Symbol.toStringTag,{value:"Module"}))},45612:(t,e,n)=>{n.d(e,{a:()=>O,c:()=>T,g:()=>M,h:()=>g,j:()=>A,l:()=>F}),n(39994);var r,o,i=n(13802),s=n(19431),a=n(24455),c=n(6766),u=n(8909),h=n(88589),l=n(1983);(o=r||(r={}))[o.X=0]="X",o[o.Y=1]="Y",o[o.Z=2]="Z";var f=n(97537),d=n(5700),_=n(68817);const m=T();function T(){return(0,l.c)()}function g(t,e=T()){return(0,h.c)(e,t)}function O(t){return t[3]}function M(t){return t}function p(t,e,n){if(null==e)return!1;const{origin:r,direction:o}=e,i=b;i[0]=r[0]-t[0],i[1]=r[1]-t[1],i[2]=r[2]-t[2];const s=o[0]*o[0]+o[1]*o[1]+o[2]*o[2];if(0===s)return!1;const a=2*(o[0]*i[0]+o[1]*i[1]+o[2]*i[2]),c=a*a-4*s*(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]-t[3]*t[3]);if(c<0)return!1;const u=Math.sqrt(c);let h=(-a-u)/(2*s);const l=(-a+u)/(2*s);return(h<0||l<h&&l>0)&&(h=l),!(h<0||(n&&(n[0]=r[0]+o[0]*h,n[1]=r[1]+o[1]*h,n[2]=r[2]+o[2]*h),0))}const b=(0,u.c)();function A(t,e){return p(t,e,null)}function E(t,e,n){const r=_.WM.get(),o=_.MP.get();(0,c.f)(r,e.origin,e.direction);const i=O(t);(0,c.f)(n,r,e.origin),(0,c.g)(n,n,1/(0,c.l)(n)*i);const s=I(t,e.origin),u=(0,d.EU)(e.origin,n);return(0,a.d)(o,u+s,r),(0,c.m)(n,n,o),n}function N(t,e,n){const r=(0,c.b)(_.WM.get(),e,t),o=(0,c.g)(_.WM.get(),r,t[3]/(0,c.l)(r));return(0,c.a)(n,o,t)}function I(t,e){const n=(0,c.b)(_.WM.get(),e,t),r=(0,c.l)(n),o=O(t),i=o+Math.abs(o-r);return(0,s.ZF)(o/i)}const S=(0,u.c)();function R(t,e,n,o){const i=(0,c.b)(S,e,t);switch(n){case r.X:{const t=(0,s.jE)(i,S)[2];return(0,c.s)(o,-Math.sin(t),Math.cos(t),0)}case r.Y:{const t=(0,s.jE)(i,S),e=t[1],n=t[2],r=Math.sin(e);return(0,c.s)(o,-r*Math.cos(n),-r*Math.sin(n),Math.cos(e))}case r.Z:return(0,c.n)(o,i);default:return}}function P(t,e){const n=(0,c.b)(L,e,t);return(0,c.l)(n)-t[3]}function F(t,e){const n=(0,c.d)(t,e),r=O(t);return n<=r*r}const L=(0,u.c)(),x=T();Object.freeze(Object.defineProperty({__proto__:null,NullSphere:m,altitudeAt:P,angleToSilhouette:I,axisAt:R,clear:function(t){t[0]=t[1]=t[2]=t[3]=0},closestPoint:function(t,e,n){return p(t,e,n)?n:((0,f.JI)(e,t,n),N(t,n,n))},closestPointOnSilhouette:E,containsPoint:F,copy:g,create:T,distanceToSilhouette:function(t,e){const n=(0,c.b)(_.WM.get(),e,t),r=(0,c.p)(n),o=t[3]*t[3];return Math.sqrt(Math.abs(r-o))},elevate:function(t,e,n){return t!==n&&(0,c.c)(n,t),n[3]=t[3]+e,n},fromCenterAndRadius:function(t,e){return(0,l.f)(t[0],t[1],t[2],e)},fromRadius:function(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t},fromValues:function(t,e,n,r){return(0,l.f)(t,e,n,r)},getCenter:M,getRadius:O,intersectRay:p,intersectRayClosestSilhouette:function(t,e,n){if(p(t,e,n))return n;const r=E(t,e,_.WM.get());return(0,c.a)(n,e.origin,(0,c.g)(_.WM.get(),e.direction,(0,c.i)(e.origin,r)/(0,c.l)(e.direction))),n},intersectsRay:A,projectPoint:N,setAltitudeAt:function(t,e,n,o){const i=P(t,e),s=R(t,e,r.Z,L),a=(0,c.g)(L,s,n-i);return(0,c.a)(o,e,a)},setExtent:function(t,e,n){return i.Z.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),t===n?n:g(t,n)},tmpSphere:x,union:function(t,e,n=T()){const r=(0,c.i)(t,e),o=t[3],i=e[3];return r+i<o?((0,h.c)(n,t),n):r+o<i?((0,h.c)(n,e),n):((0,c.h)(n,t,e,(r+i-o)/(2*r)),n[3]=(r+o+i)/2,n)},wrap:function(t){return t}},Symbol.toStringTag,{value:"Module"}))},69666:(t,e,n)=>{function r(){return[0,0]}function o(t,e){return[t,e]}function i(t,e){return new Float64Array(t,e,2)}function s(){return o(1,1)}function a(){return o(1,0)}function c(){return o(0,1)}n.d(e,{a:()=>r,c:()=>i,f:()=>o});const u=s(),h=a(),l=c();Object.freeze(Object.defineProperty({__proto__:null,ONES:u,UNIT_X:h,UNIT_Y:l,ZEROS:[0,0],clone:function(t){return[t[0],t[1]]},create:r,createView:i,fromArray:function(t){const e=[0,0],n=Math.min(2,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e},fromValues:o,ones:s,unitX:a,unitY:c,zeros:function(){return[0,0]}},Symbol.toStringTag,{value:"Module"}))},25015:(t,e,n)=>{var r;n.d(e,{Y:()=>r}),function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"}(r||(r={}))},19480:(t,e,n)=>{n.d(e,{x:()=>o});var r=n(66581);class o{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.Y)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*i);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,i));t++)this._items.push(this._allocator())}}const i=1024},56215:(t,e,n)=>{n.d(e,{Ue:()=>c,nF:()=>h,zk:()=>u});var r=n(19431),o=n(19480),i=n(6766),s=n(8909),a=n(68817);function c(t){return t?{origin:(0,s.a)(t.origin),vector:(0,s.a)(t.vector)}:{origin:(0,s.c)(),vector:(0,s.c)()}}function u(t,e,n=c()){return(0,i.c)(n.origin,t),(0,i.b)(n.vector,e,t),n}function h(t,e,n){return function(t,e,n,o,s){const{vector:c,origin:u}=t,h=(0,i.b)(a.WM.get(),e,u),l=(0,i.e)(c,h)/(0,i.p)(c);return(0,i.g)(s,c,(0,r.uZ)(l,0,1)),(0,i.a)(s,s,t.origin)}(t,e,0,0,n)}(0,s.c)(),(0,s.c)(),new o.x((()=>c()))},67262:(t,e,n)=>{n.d(e,{d:()=>i});var r=n(19431),o=n(35914);function i(t,e,n){const i=Array.isArray(t),h=i?t.length/e:t.byteLength/(4*e),l=i?t:new Uint32Array(t,0,h*e),f=n?.minReduction??0,d=n?.originalIndices||null,_=d?d.length:0,m=n?.componentOffsets||null;let T=0;if(m)for(let t=0;t<m.length-1;t++){const e=m[t+1]-m[t];e>T&&(T=e)}else T=h;const g=Math.floor(1.1*T)+1;(null==u||u.length<2*g)&&(u=new Uint32Array((0,r.Sf)(2*g)));for(let t=0;t<2*g;t++)u[t]=0;let O=0;const M=!!m&&!!d,p=M?_:h;let b=(0,o.$z)(h);const A=new Uint32Array(_),E=1.96;let N=0!==f?Math.ceil(4*E*E/(f*f)*f*(1-f)):p,I=1,S=m?m[1]:p;for(let t=0;t<p;t++){if(t===N){const e=1-O/t;if(e+E*Math.sqrt(e*(1-e)/t)<f)return null;N*=2}if(t===S){for(let t=0;t<2*g;t++)u[t]=0;if(d)for(let t=m[I-1];t<m[I];t++)A[t]=b[d[t]];S=m[++I]}const n=M?d[t]:t,r=n*e,o=c(l,r,e);let i=o%g,a=O;for(;0!==u[2*i+1];){if(u[2*i]===o){const t=u[2*i+1]-1;if(s(l,r,t*e,e)){a=b[t];break}}i++,i>=g&&(i-=g)}a===O&&(u[2*i]=o,u[2*i+1]=n+1,O++),b[n]=a}if(0!==f&&1-O/h<f)return null;if(M){for(let t=m[I-1];t<A.length;t++)A[t]=b[d[t]];b=(0,o.mi)(A)}const R=i?new Array(O):new Uint32Array(O*e);O=0;for(let t=0;t<p;t++)b[t]===O&&(a(l,(M?d[t]:t)*e,R,O*e,e),O++);if(d&&!M){const t=new Uint32Array(_);for(let e=0;e<t.length;e++)t[e]=b[d[e]];b=(0,o.mi)(t)}return{buffer:Array.isArray(R)?R:R.buffer,indices:b,uniqueCount:O}}function s(t,e,n,r){for(let o=0;o<r;o++)if(t[e+o]!==t[n+o])return!1;return!0}function a(t,e,n,r,o){for(let i=0;i<o;i++)n[r+i]=t[e+i]}function c(t,e,n){let r=0;for(let o=0;o<n;o++)r=t[e+o]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let u=null},39050:(t,e,n)=>{n(19431),n(6766);var r,o,i=n(8909);n(45612),n(5700),n(68817),(0,i.c)(),(0,i.c)(),(0,i.c)(),(0,i.c)(),(0,i.c)(),(0,i.c)(),(0,i.c)(),(0,i.c)(),(0,i.c)(),(0,i.c)(),(o=r||(r={}))[o.NONE=0]="NONE",o[o.CLAMP=1]="CLAMP",o[o.INFINITE_MIN=4]="INFINITE_MIN",o[o.INFINITE_MAX=8]="INFINITE_MAX",r.INFINITE_MIN,r.INFINITE_MAX,r.INFINITE_MAX},97537:(t,e,n)=>{n.d(e,{JI:()=>u,Ue:()=>s,re:()=>c}),n(7753);var r=n(19480),o=n(6766),i=n(8909);function s(t){return t?a((0,i.a)(t.origin),(0,i.a)(t.direction)):a((0,i.c)(),(0,i.c)())}function a(t,e){return{origin:t,direction:e}}function c(t,e){const n=h.get();return n.origin=t,n.direction=e,n}function u(t,e,n){const r=(0,o.e)(t.direction,(0,o.b)(n,e,t.origin));return(0,o.a)(n,t.origin,(0,o.g)(n,t.direction,r)),n}n(68817);const h=new r.x((()=>s()))},5700:(t,e,n)=>{n.d(e,{EU:()=>s});var r=n(19431),o=n(6766),i=n(8909);function s(t,e){const n=(0,o.e)(t,e)/((0,o.l)(t)*(0,o.l)(e));return-(0,r.ZF)(n)}(0,i.c)(),(0,i.c)()},68817:(t,e,n)=>{n.d(e,{MP:()=>_,WM:()=>d});var r=n(25015),o=n(66581),i=n(34344),s=n(39100),a=n(61044),c=n(69666),u=n(8909),h=n(1983);class l{constructor(t,e,n){this._itemByteSize=t,this._itemCreate=e,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(n/this._itemByteSize)}get(){0===this._itemsPtr&&(0,o.Y)((()=>this._reset()));const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const t=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let e=0;e<this._itemsPerBuffer;++e)this._items.push(this._itemCreate(t,e*this._itemByteSize));this._buffers.push(t)}return this._items[this._itemsPtr++]}_reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=f){return new l(16,c.c,t)}static createVec3f64(t=f){return new l(24,u.b,t)}static createVec4f64(t=f){return new l(32,h.a,t)}static createMat3f64(t=f){return new l(72,i.a,t)}static createMat4f64(t=f){return new l(128,s.a,t)}static createQuatf64(t=f){return new l(32,a.c,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}const f=4*r.Y.KILOBYTES,d=(l.createVec2f64(),l.createVec3f64()),_=(l.createVec4f64(),l.createMat3f64(),l.createMat4f64());l.createQuatf64()},95397:(t,e,n)=>{n.d(e,{K:()=>i});var r=n(91907),o=n(41163);function i(t,e=0){const n=t.stride;return Array.from(t.fields.keys()).filter((e=>{const n=t.fields.get(e)?.optional;return!(n&&n.glPadding)})).map((r=>{const i=t.fields.get(r),a=i.constructor.ElementCount,c=s(i.constructor.ElementType),u=i.offset,h=!(!i.optional||!i.optional.glNormalized);return new o.G(r,a,c,u,n,h,e)}))}function s(t){const e=a[t];if(e)return e;throw new Error("BufferType not supported in WebGL")}const a={u8:r.g.UNSIGNED_BYTE,u16:r.g.UNSIGNED_SHORT,u32:r.g.UNSIGNED_INT,i8:r.g.BYTE,i16:r.g.SHORT,i32:r.g.INT,f32:r.g.FLOAT}},21414:(t,e,n)=>{var r;n.d(e,{T:()=>r}),function(t){t.POSITION="position",t.NORMAL="normal",t.NORMALCOMPRESSED="normalCompressed",t.UV0="uv0",t.AUXPOS1="auxpos1",t.AUXPOS2="auxpos2",t.COLOR="color",t.SYMBOLCOLOR="symbolColor",t.SIZE="size",t.TANGENT="tangent",t.OFFSET="offset",t.SUBDIVISIONFACTOR="subdivisionFactor",t.COLORFEATUREATTRIBUTE="colorFeatureAttribute",t.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",t.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",t.DISTANCETOSTART="distanceToStart",t.UVMAPSPACE="uvMapSpace",t.BOUNDINGRECT="boundingRect",t.UVREGION="uvRegion",t.PROFILERIGHT="profileRight",t.PROFILEUP="profileUp",t.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",t.FEATUREVALUE="featureValue",t.MODELORIGINHI="modelOriginHi",t.MODELORIGINLO="modelOriginLo",t.MODEL="model",t.MODELNORMAL="modelNormal",t.INSTANCECOLOR="instanceColor",t.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",t.LOCALTRANSFORM="localTransform",t.GLOBALTRANSFORM="globalTransform",t.BOUNDINGSPHERE="boundingSphere",t.MODELORIGIN="modelOrigin",t.MODELSCALEFACTORS="modelScaleFactors",t.FEATUREATTRIBUTE="featureAttribute",t.STATE="state",t.LODLEVEL="lodLevel",t.POSITION0="position0",t.POSITION1="position1",t.NORMALA="normalA",t.NORMALB="normalB",t.COMPONENTINDEX="componentIndex",t.VARIANTOFFSET="variantOffset",t.VARIANTSTROKE="variantStroke",t.VARIANTEXTENSION="variantExtension",t.U8PADDING="u8padding",t.U16PADDING="u16padding",t.SIDENESS="sideness",t.START="start",t.END="end",t.UP="up",t.EXTRUDE="extrude",t.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",t.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(r||(r={}))},82976:(t,e,n)=>{n.d(e,{Hr:()=>h,dG:()=>u,tf:()=>s});var r=n(95397),o=n(44685),i=n(21414);const s=(0,o.U$)().vec3f(i.T.POSITION).u16(i.T.COMPONENTINDEX).u16(i.T.U16PADDING),a=(0,o.U$)().vec2u8(i.T.SIDENESS),c=((0,r.K)(a),(0,o.U$)().vec3f(i.T.POSITION0).vec3f(i.T.POSITION1).u16(i.T.COMPONENTINDEX).u8(i.T.VARIANTOFFSET,{glNormalized:!0}).u8(i.T.VARIANTSTROKE).u8(i.T.VARIANTEXTENSION,{glNormalized:!0}).u8(i.T.U8PADDING,{glPadding:!0}).u16(i.T.U16PADDING,{glPadding:!0})),u=c.clone().vec3f(i.T.NORMAL),h=c.clone().vec3f(i.T.NORMALA).vec3f(i.T.NORMALB);new Map([[i.T.POSITION0,0],[i.T.POSITION1,1],[i.T.COMPONENTINDEX,2],[i.T.VARIANTOFFSET,3],[i.T.VARIANTSTROKE,4],[i.T.VARIANTEXTENSION,5],[i.T.NORMAL,6],[i.T.NORMALA,6],[i.T.NORMALB,7],[i.T.SIDENESS,8]])},11591:(t,e,n)=>{n.d(e,{n:()=>h});var r=n(7753),o=n(19431),i=n(6766),s=n(8909);const a=-1;var c,u;function h(t,e,n,s=g){const c=t.vertices.position,u=t.vertices.componentIndex,h=(0,o.Vl)(s.anglePlanar),T=(0,o.Vl)(s.angleSignificantEdge),O=Math.cos(T),M=Math.cos(h),p=m.edge,b=p.position0,A=p.position1,E=p.faceNormal0,N=p.faceNormal1,I=_(t),S=function(t){const e=t.faces.length/3,n=t.faces,r=t.neighbors;let o=0;for(let t=0;t<e;t++){const e=r[3*t],i=r[3*t+1],s=r[3*t+2],c=n[3*t],u=n[3*t+1],h=n[3*t+2];o+=e===a||c<u?1:0,o+=i===a||u<h?1:0,o+=s===a||h<c?1:0}const i=new Int32Array(4*o);let s=0;for(let t=0;t<e;t++){const e=r[3*t],o=r[3*t+1],c=r[3*t+2],u=n[3*t],h=n[3*t+1],l=n[3*t+2];(e===a||u<h)&&(i[s++]=u,i[s++]=h,i[s++]=t,i[s++]=e),(o===a||h<l)&&(i[s++]=h,i[s++]=l,i[s++]=t,i[s++]=o),(c===a||l<u)&&(i[s++]=l,i[s++]=u,i[s++]=t,i[s++]=c)}return i}(t),R=S.length/4,P=e.allocate(R);let F=0;const L=R,x=n.allocate(L);let y=0,v=0,w=0;const B=(0,r.w6)(0,R),D=new Float32Array(R);D.forEach(((t,e,n)=>{c.getVec(S[4*e],b),c.getVec(S[4*e+1],A),n[e]=(0,i.i)(b,A)})),B.sort(((t,e)=>D[e]-D[t]));const C=new Array,j=new Array;for(let t=0;t<R;t++){const r=B[t],o=D[r],s=S[4*r],_=S[4*r+1],m=S[4*r+2],T=S[4*r+3],g=T===a;if(c.getVec(s,b),c.getVec(_,A),g)(0,i.s)(E,I[3*m],I[3*m+1],I[3*m+2]),(0,i.c)(N,E),p.componentIndex=u.get(s),p.cosAngle=(0,i.e)(E,N);else{if((0,i.s)(E,I[3*m],I[3*m+1],I[3*m+2]),(0,i.s)(N,I[3*T],I[3*T+1],I[3*T+2]),p.componentIndex=u.get(s),p.cosAngle=(0,i.e)(E,N),f(p,M))continue;p.cosAngle<-.9999&&(0,i.c)(N,E)}v+=o,w++,g||l(p,O)?(e.write(P,F++,p),C.push(o)):d(p,h)&&(n.write(x,y++,p),j.push(o))}const V=new Float32Array(C.reverse()),U=new Float32Array(j.reverse());return{regular:{instancesData:e.trim(P,F),lodInfo:{lengths:V}},silhouette:{instancesData:n.trim(x,y),lodInfo:{lengths:U}},averageEdgeLength:v/w}}function l(t,e){return t.cosAngle<e}function f(t,e){return t.cosAngle>e}function d(t,e){const n=(0,o.ZF)(t.cosAngle),r=m.fwd,s=m.ortho;return(0,i.r)(r,t.position1,t.position0),n*((0,i.e)((0,i.f)(s,t.faceNormal0,t.faceNormal1),r)>0?-1:1)>e}function _(t){const e=t.faces.length/3,n=t.vertices.position,r=t.faces,o=T.v0,s=T.v1,a=T.v2,c=new Float32Array(3*e);for(let t=0;t<e;t++){const e=r[3*t],u=r[3*t+1],h=r[3*t+2];n.getVec(e,o),n.getVec(u,s),n.getVec(h,a),(0,i.b)(s,s,o),(0,i.b)(a,a,o),(0,i.f)(o,s,a),(0,i.n)(o,o),c[3*t]=o[0],c[3*t+1]=o[1],c[3*t+2]=o[2]}return c}(u=c||(c={}))[u.SOLID=0]="SOLID",u[u.SKETCH=1]="SKETCH";const m={edge:{position0:(0,s.c)(),position1:(0,s.c)(),faceNormal0:(0,s.c)(),faceNormal1:(0,s.c)(),componentIndex:0,cosAngle:0},ortho:(0,s.c)(),fwd:(0,s.c)()},T={v0:(0,s.c)(),v1:(0,s.c)(),v2:(0,s.c)()},g={anglePlanar:4,angleSignificantEdge:35}},73453:(t,e,n)=>{n.d(e,{Kl:()=>I,n_:()=>x,kY:()=>S,Yr:()=>L});var r=n(67262);function o(t,e,n){const r=e/3,o=new Uint32Array(n+1),i=new Uint32Array(n+1),s=(t,e)=>{t<e?o[t+1]++:i[e+1]++};for(let e=0;e<r;e++){const n=t[3*e],r=t[3*e+1],o=t[3*e+2];s(n,r),s(r,o),s(o,n)}let a=0,c=0;for(let t=0;t<n;t++){const e=o[t+1],n=i[t+1];o[t+1]=a,i[t+1]=c,a+=e,c+=n}const u=new Uint32Array(6*r),h=o[n],l=(t,e,n)=>{if(t<e){const r=o[t+1]++;u[2*r]=e,u[2*r+1]=n}else{const r=i[e+1]++;u[2*h+2*r]=t,u[2*h+2*r+1]=n}};for(let e=0;e<r;e++){const n=t[3*e],r=t[3*e+1],o=t[3*e+2];l(n,r,e),l(r,o,e),l(o,n,e)}const f=(t,e)=>{const n=2*t,r=e-t;for(let t=1;t<r;t++){const e=u[n+2*t],r=u[n+2*t+1];let o=t-1;for(;o>=0&&u[n+2*o]>e;o--)u[n+2*o+2]=u[n+2*o],u[n+2*o+3]=u[n+2*o+1];u[n+2*o+2]=e,u[n+2*o+3]=r}};for(let t=0;t<n;t++)f(o[t],o[t+1]),f(h+i[t],h+i[t+1]);const d=new Int32Array(3*r),_=(e,n)=>e===t[3*n]?0:e===t[3*n+1]?1:e===t[3*n+2]?2:-1,m=(t,e)=>{const n=_(t,e);d[3*e+n]=-1},T=(t,e,n,r)=>{const o=_(t,e);d[3*e+o]=r;const i=_(n,r);d[3*r+i]=e};for(let t=0;t<n;t++){let e=o[t];const n=o[t+1];let r=i[t];const s=i[t+1];for(;e<n&&r<s;){const n=u[2*e],o=u[2*h+2*r];n===o?(T(t,u[2*e+1],o,u[2*h+2*r+1]),e++,r++):n<o?(m(t,u[2*e+1]),e++):(m(o,u[2*h+2*r+1]),r++)}for(;e<n;)m(t,u[2*e+1]),e++;for(;r<s;)m(u[2*h+2*r],u[2*h+2*r+1]),r++}return d}var i=n(44685),s=n(21414),a=n(82976),c=n(4157),u=n(6766),h=n(8909),l=n(95397);class f{updateSettings(t){this.settings=t,this._edgeHashFunction=t.reducedPrecision?g:T}write(t,e,n){const r=this._edgeHashFunction(n);E.seed=r;const o=E.getIntRange(0,255),i=E.getIntRange(0,this.settings.variants-1),s=E.getFloat(),a=255*(.5*function(t,e){const n=t<0?-1:1;return Math.abs(t)**1.2*n}(-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7))+.5);t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex),t.variantOffset.set(e,o),t.variantStroke.set(e,i),t.variantExtension.set(e,a)}trim(t,e){return t.slice(0,e)}}const d=new Float32Array(6),_=new Uint32Array(d.buffer),m=new Uint32Array(1);function T(t){const e=d;e[0]=t.position0[0],e[1]=t.position0[1],e[2]=t.position0[2],e[3]=t.position1[0],e[4]=t.position1[1],e[5]=t.position1[2],m[0]=5381;for(let t=0;t<_.length;t++)m[0]=31*m[0]+_[t];return m[0]}function g(t){const e=d;e[0]=M(t.position0[0]),e[1]=M(t.position0[1]),e[2]=M(t.position0[2]),e[3]=M(t.position1[0]),e[4]=M(t.position1[1]),e[5]=M(t.position1[2]),m[0]=5381;for(let t=0;t<_.length;t++)m[0]=31*m[0]+_[t];return m[0]}const O=1e4;function M(t){return Math.round(t*O)/O}class p{constructor(){this._commonWriter=new f}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return a.dG.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n),(0,u.a)(A,n.faceNormal0,n.faceNormal1),(0,u.n)(A,A),t.normal.setVec(e,A)}trim(t,e){return this._commonWriter.trim(t,e)}}p.Layout=a.dG,p.glLayout=(0,l.K)(a.dG,1);class b{constructor(){this._commonWriter=new f}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return a.Hr.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n),t.normalA.setVec(e,n.faceNormal0),t.normalB.setVec(e,n.faceNormal1)}trim(t,e){return this._commonWriter.trim(t,e)}}b.Layout=a.Hr,b.glLayout=(0,l.K)(a.Hr,1);const A=(0,h.c)(),E=new c.Z;var N=n(11591);function I(t){const e=S(t.data,t.skipDeduplicate,t.indices,t.indicesLength);return P.updateSettings(t.writerSettings),F.updateSettings(t.writerSettings),(0,N.n)(e,P,F)}function S(t,e,n,i){if(e){const e=o(n,i,t.count);return new R(n,i,e,t)}const s=(0,r.d)(t.buffer,t.stride/4,{originalIndices:n,originalIndicesLength:i}),c=o(s.indices,i,s.uniqueCount);return{faces:s.indices,facesLength:s.indices.length,neighbors:c,vertices:a.tf.createView(s.buffer)}}class R{constructor(t,e,n,r){this.faces=t,this.facesLength=e,this.neighbors=n,this.vertices=r}}const P=new p,F=new b,L=(0,i.U$)().vec3f(s.T.POSITION0).vec3f(s.T.POSITION1),x=(0,i.U$)().vec3f(s.T.POSITION0).vec3f(s.T.POSITION1).u16(s.T.COMPONENTINDEX).u16(s.T.U16PADDING,{glPadding:!0})},64832:(t,e,n)=>{n.r(e),n.d(e,{default:()=>$});var r,o,i=n(36663),s=n(33926),a=(n(13802),n(7283),n(7753),n(39994),n(70375),n(40266)),c=n(6766),u=n(8909),h=n(56215),l=n(45612),f=n(34596),d=n(17135),_=n(19480),m=(n(24455),n(88589),n(1983)),T=n(97537);function g(t){return t?{ray:(0,T.Ue)(t.ray),c0:t.c0,c1:t.c1}:{ray:(0,T.Ue)(),c0:0,c1:Number.MAX_VALUE}}function O(t,e){for(let n=0;n<M;n++){const r=t[n];if(r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]>=e[3])return!1}return!0}new _.x((()=>g())),n(39050),n(68817),function(t){t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT",t[t.BOTTOM=2]="BOTTOM",t[t.TOP=3]="TOP",t[t.NEAR=4]="NEAR",t[t.FAR=5]="FAR"}(r||(r={})),function(t){t[t.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",t[t.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",t[t.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",t[t.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",t[t.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",t[t.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",t[t.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",t[t.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(o||(o={})),o.FAR_BOTTOM_RIGHT,o.NEAR_BOTTOM_RIGHT,o.NEAR_BOTTOM_LEFT,o.FAR_BOTTOM_LEFT,o.NEAR_BOTTOM_LEFT,o.NEAR_BOTTOM_RIGHT,o.NEAR_TOP_RIGHT,o.NEAR_TOP_LEFT,o.FAR_BOTTOM_RIGHT,o.FAR_BOTTOM_LEFT,o.FAR_TOP_LEFT,o.FAR_TOP_RIGHT,o.NEAR_BOTTOM_RIGHT,o.FAR_BOTTOM_RIGHT,o.FAR_TOP_RIGHT,o.NEAR_TOP_RIGHT,o.FAR_BOTTOM_LEFT,o.NEAR_BOTTOM_LEFT,o.NEAR_TOP_LEFT,o.FAR_TOP_LEFT,o.FAR_TOP_LEFT,o.NEAR_TOP_LEFT,o.NEAR_TOP_RIGHT,o.FAR_TOP_RIGHT;const M=6;(0,m.f)(-1,-1,-1,1),(0,m.f)(1,-1,-1,1),(0,m.f)(1,1,-1,1),(0,m.f)(-1,1,-1,1),(0,m.f)(-1,-1,1,1),(0,m.f)(1,-1,1,1),(0,m.f)(1,1,1,1),(0,m.f)(-1,1,1,1),new _.x(g),(0,u.c)(),(0,u.c)(),(0,u.c)(),(0,u.c)(),(0,u.c)(),(0,u.c)(),(0,u.c)(),(0,u.c)();var p,b,A=n(15095);class E{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(t,e){this.objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new N,this._objectCount=0,e&&(void 0!==e.maximumObjectsPerNode&&(this._maximumObjectsPerNode=e.maximumObjectsPerNode),void 0!==e.maximumDepth&&(this._maximumDepth=e.maximumDepth))}destroy(){this._degenerateObjects.clear(),N.clearPool(),B[0]=null,U.prune(),k.prune()}add(t,e=t.length){this._objectCount+=e,this._grow(t,e);const n=N.acquire();for(let r=0;r<e;r++){const e=t[r];this._isDegenerate(e)?this._degenerateObjects.add(e):(n.init(this._root),this._add(e,n))}N.release(n)}remove(t,e=null){this._objectCount-=t.length;const n=N.acquire();for(const r of t){const t=null!=e?e:(0,l.h)(this.objectToBoundingSphere(r),z);x(t[3])?(n.init(this._root),this._remove(r,t,n)):this._degenerateObjects.delete(r)}N.release(n),this._shrink()}update(t,e){if(!x(e[3])&&this._isDegenerate(t))return;const n=function(t){return B[0]=t,B}(t);this.remove(n,e),this.add(n)}forEachAlongRay(t,e,n){const r=(0,T.re)(t,e);this._forEachNode(this._root,(t=>{if(!this._intersectsNode(r,t))return!1;const e=t.node;return e.terminals.forAll((t=>{this._intersectsObject(r,t)&&n(t)})),null!==e.residents&&e.residents.forAll((t=>{this._intersectsObject(r,t)&&n(t)})),!0}))}forEachAlongRayWithVerticalOffset(t,e,n,r){const o=(0,T.re)(t,e);this._forEachNode(this._root,(t=>{if(!this._intersectsNodeWithOffset(o,t,r))return!1;const e=t.node;return e.terminals.forAll((t=>{this._intersectsObjectWithOffset(o,t,r)&&n(t)})),null!==e.residents&&e.residents.forAll((t=>{this._intersectsObjectWithOffset(o,t,r)&&n(t)})),!0}))}forEach(t){this._forEachNode(this._root,(e=>{const n=e.node;return n.terminals.forAll(t),null!==n.residents&&n.residents.forAll(t),!0})),this._degenerateObjects.forEach(t)}forEachDegenerateObject(t){this._degenerateObjects.forEach(t)}findClosest(t,e,n,r=(()=>!0),o=1/0){let i=1/0,s=1/0,a=null;const u=F(t,e),h=c=>{if(--o,!r(c))return;const u=this.objectToBoundingSphere(c);if(!O(n,u))return;const h=L(t,e,(0,l.g)(u)),f=h-u[3],d=h+u[3];f<i&&(i=f,s=d,a=c)};return this._forEachNodeDepthOrdered(this._root,(r=>{if(o<=0||!O(n,r.bounds))return!1;if((0,c.g)(C,u,r.halfSize),(0,c.a)(C,C,r.bounds),L(t,e,C)>s)return!1;const i=r.node;return i.terminals.forAll((t=>h(t))),null!==i.residents&&i.residents.forAll((t=>h(t))),!0}),t,e),a}forEachInDepthRange(t,e,n,r,o,i,s){let a=-1/0,u=1/0;const h={setRange:t=>{n===E.DepthOrder.FRONT_TO_BACK?(a=Math.max(a,t.near),u=Math.min(u,t.far)):(a=Math.max(a,-t.far),u=Math.min(u,-t.near))}};h.setRange(r);const f=L(e,n,t),d=F(e,n),_=F(e,-n),m=t=>{if(!s(t))return;const r=this.objectToBoundingSphere(t),c=(0,l.g)(r),d=L(e,n,c)-f,_=d-r[3],m=d+r[3];_>u||m<a||!O(i,r)||o(t,h)};this._forEachNodeDepthOrdered(this._root,(t=>{if(!O(i,t.bounds))return!1;if((0,c.g)(C,d,t.halfSize),(0,c.a)(C,C,t.bounds),L(e,n,C)-f>u)return!1;if((0,c.g)(C,_,t.halfSize),(0,c.a)(C,C,t.bounds),L(e,n,C)-f<a)return!1;const r=t.node;return r.terminals.forAll((t=>m(t))),null!==r.residents&&r.residents.forAll((t=>m(t))),!0}),e,n)}forEachNode(t){this._forEachNode(this._root,(e=>t(e.node,e.bounds,e.halfSize,e.depth)))}forEachNeighbor(t,e){const n=(0,l.a)(e),r=(0,l.g)(e),o=e=>{const o=this.objectToBoundingSphere(e),i=(0,l.a)(o),s=n+i;return!((0,c.d)((0,l.g)(o),r)-s*s<=0)||t(e)};let i=!0;const s=t=>{i&&(i=o(t))};this._forEachNode(this._root,(t=>{const e=(0,l.a)(t.bounds),o=n+e;if((0,c.d)((0,l.g)(t.bounds),r)-o*o>0)return!1;const a=t.node;return a.terminals.forAll(s),i&&null!==a.residents&&a.residents.forAll(s),i})),i&&this.forEachDegenerateObject(s)}_intersectsNode(t,e){return R(e.bounds,2*-e.halfSize,j),R(e.bounds,2*e.halfSize,V),(0,A.yK)(t.origin,t.direction,j,V)}_intersectsNodeWithOffset(t,e,n){return R(e.bounds,2*-e.halfSize,j),R(e.bounds,2*e.halfSize,V),n.applyToMinMax(j,V),(0,A.yK)(t.origin,t.direction,j,V)}_intersectsObject(t,e){const n=this.objectToBoundingSphere(e);return!(n[3]>0)||(0,l.j)(n,t)}_intersectsObjectWithOffset(t,e,n){const r=this.objectToBoundingSphere(e);return!(r[3]>0)||(0,l.j)(n.applyToBoundingSphere(r),t)}_forEachNode(t,e){let n=N.acquire().init(t);const r=[n];for(;0!==r.length;){if(n=r.pop(),e(n)&&!n.isLeaf())for(let t=0;t<n.node.children.length;t++)n.node.children[t]&&r.push(N.acquire().init(n).advance(t));N.release(n)}}_forEachNodeDepthOrdered(t,e,n,r=E.DepthOrder.FRONT_TO_BACK){let o=N.acquire().init(t);const i=[o];for(function(t,e,n){if(!k.length)for(let t=0;t<8;++t)k.push({index:0,distance:0});for(let n=0;n<8;++n){const r=y[n];k.data[n].index=n,k.data[n].distance=L(t,e,r)}k.sort(((t,e)=>t.distance-e.distance));for(let t=0;t<8;++t)n[t]=k.data[t].index}(n,r,W);0!==i.length;){if(o=i.pop(),e(o)&&!o.isLeaf())for(let t=7;t>=0;--t){const e=W[t];o.node.children[e]&&i.push(N.acquire().init(o).advance(e))}N.release(o)}}_remove(t,e,n){U.clear();const r=n.advanceTo(e,((t,e)=>{U.push(t.node),U.push(e)}))?n.node.terminals:n.node.residents;if(r.removeUnordered(t),0===r.length)for(let t=U.length-2;t>=0;t-=2){const e=U.data[t],n=U.data[t+1];if(!this._purge(e,n))break}}_nodeIsEmpty(t){if(0!==t.terminals.length)return!1;if(null!==t.residents)return 0===t.residents.length;for(let e=0;e<t.children.length;e++)if(t.children[e])return!1;return!0}_purge(t,e){return e>=0&&(t.children[e]=null),!!this._nodeIsEmpty(t)&&(null===t.residents&&(t.residents=new d.Z({shrink:!0})),!0)}_add(t,e){e.advanceTo(this.objectToBoundingSphere(t))?e.node.terminals.push(t):(e.node.residents.push(t),e.node.residents.length>this._maximumObjectsPerNode&&e.depth<this._maximumDepth&&this._split(e))}_split(t){const e=t.node.residents;t.node.residents=null;for(let n=0;n<e.length;n++){const r=N.acquire().init(t);this._add(e.at(n),r),N.release(r)}}_grow(t,e){if(0!==e&&(P(t,e,(t=>this.objectToBoundingSphere(t)),G),x(G[3])&&!this._fitsInsideTree(G)))if(this._nodeIsEmpty(this._root.node))(0,l.h)(G,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{const t=this._rootBoundsForRootAsSubNode(G);this._placingRootViolatesMaxDepth(t)?this._rebuildTree(G,t):this._growRootAsSubNode(t),N.release(t)}}_rebuildTree(t,e){(0,c.c)(H,e.bounds),H[3]=e.halfSize,P([t,H],2,(t=>t),q);const n=N.acquire().init(this._root);this._root.initFrom(null,q,q[3]),this._root.increaseHalfSize(1.25),this._forEachNode(n,(t=>(this.add(t.node.terminals.data,t.node.terminals.length),null!==t.node.residents&&this.add(t.node.residents.data,t.node.residents.length),!0))),N.release(n)}_placingRootViolatesMaxDepth(t){const e=Math.log(t.halfSize/this._root.halfSize)*Math.LOG2E;let n=0;return this._forEachNode(this._root,(t=>(n=Math.max(n,t.depth),n+e<=this._maximumDepth))),n+e>this._maximumDepth}_rootBoundsForRootAsSubNode(t){const e=t[3],n=t;let r=-1/0;const o=this._root.bounds,i=this._root.halfSize;for(let t=0;t<3;t++){const s=o[t]-i-(n[t]-e),a=n[t]+e-(o[t]+i),c=Math.max(0,Math.ceil(s/(2*i))),u=Math.max(0,Math.ceil(a/(2*i)))+1,h=2**Math.ceil(Math.log(c+u)*Math.LOG2E);r=Math.max(r,h),Y[t].min=c,Y[t].max=u}for(let t=0;t<3;t++){let e=Y[t].min,n=Y[t].max;const s=(r-(e+n))/2;e+=Math.ceil(s),n+=Math.floor(s);const a=o[t]-i-e*i*2;D[t]=a+(n+e)*i}const s=r*i;return D[3]=s*w,N.acquire().initFrom(null,D,s,0)}_growRootAsSubNode(t){const e=this._root.node;(0,c.c)(G,this._root.bounds),G[3]=this._root.halfSize,this._root.init(t),t.advanceTo(G,null,!0),t.node.children=e.children,t.node.residents=e.residents,t.node.terminals=e.terminals}_shrink(){for(;;){const t=this._findShrinkIndex();if(-1===t)break;this._root.advance(t),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let t=null;const e=this._root.node.children;let n=0,r=0;for(;r<e.length&&null==t;)n=r++,t=e[n];for(;r<e.length;)if(e[r++])return-1;return n}_isDegenerate(t){return!x(this.objectToBoundingSphere(t)[3])}_fitsInsideTree(t){const e=this._root.bounds,n=this._root.halfSize;return t[3]<=n&&t[0]>=e[0]-n&&t[0]<=e[0]+n&&t[1]>=e[1]-n&&t[1]<=e[1]+n&&t[2]>=e[2]-n&&t[2]<=e[2]+n}toJSON(){const{maximumDepth:t,maximumObjectsPerNode:e,_objectCount:n}=this,r=this._nodeToJSON(this._root.node);return{maximumDepth:t,maximumObjectsPerNode:e,objectCount:n,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:r}}}_nodeToJSON(t){const e=t.children.map((t=>t?this._nodeToJSON(t):null)),n=t.residents?.map((t=>this.objectToBoundingSphere(t))),r=t.terminals?.map((t=>this.objectToBoundingSphere(t)));return{children:e,residents:n,terminals:r}}static fromJSON(t){const e=new E((t=>t),{maximumDepth:t.maximumDepth,maximumObjectsPerNode:t.maximumObjectsPerNode});return e._objectCount=t.objectCount,e._root.initFrom(t.root.node,t.root.bounds,t.root.halfSize,t.root.depth),e}}class N{constructor(){this.bounds=(0,l.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(t){return this.initFrom(t.node,t.bounds,t.halfSize,t.depth)}initFrom(t,e,n,r=this.depth){return this.node=null!=t?t:N.createEmptyNode(),null!=e&&(0,l.h)(e,this.bounds),this.halfSize=n,this.depth=r,this}increaseHalfSize(t){this.halfSize*=t,this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*w}advance(t){let e=this.node.children[t];e||(e=N.createEmptyNode(),this.node.children[t]=e),this.node=e,this.halfSize/=2,this.depth++;const n=y[t];return this.bounds[0]+=n[0]*this.halfSize,this.bounds[1]+=n[1]*this.halfSize,this.bounds[2]+=n[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}advanceTo(t,e,n=!1){for(;;){if(this.isTerminalFor(t))return e&&e(this,-1),!0;if(this.isLeaf()){if(!n)return e&&e(this,-1),!1;this.node.residents=null}const r=this._childIndex(t);e&&e(this,r),this.advance(r)}}isLeaf(){return null!=this.node.residents}isTerminalFor(t){return t[3]>this.halfSize/2}_childIndex(t){const e=this.bounds;return(e[0]<t[0]?1:0)+(e[1]<t[1]?2:0)+(e[2]<t[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new d.Z({shrink:!0}),residents:new d.Z({shrink:!0})}}static acquire(){return N._pool.acquire()}static release(t){N._pool.release(t)}static clearPool(){N._pool.prune()}}function I(t,e){t[0]=Math.min(t[0],e[0]-e[3]),t[1]=Math.min(t[1],e[1]-e[3]),t[2]=Math.min(t[2],e[2]-e[3])}function S(t,e){t[0]=Math.max(t[0],e[0]+e[3]),t[1]=Math.max(t[1],e[1]+e[3]),t[2]=Math.max(t[2],e[2]+e[3])}function R(t,e,n){n[0]=t[0]+e,n[1]=t[1]+e,n[2]=t[2]+e}function P(t,e,n,r){if(1===e){const e=n(t[0]);(0,l.h)(e,r)}else{j[0]=1/0,j[1]=1/0,j[2]=1/0,V[0]=-1/0,V[1]=-1/0,V[2]=-1/0;for(let r=0;r<e;r++){const e=n(t[r]);x(e[3])&&(I(j,e),S(V,e))}(0,c.h)(r,j,V,.5),r[3]=Math.max(V[0]-j[0],V[1]-j[1],V[2]-j[2])/2}}function F(t,e){let n,r=1/0;for(let o=0;o<8;++o){const i=L(t,e,v[o]);i<r&&(r=i,n=v[o])}return n}function L(t,e,n){return e*(t[0]*n[0]+t[1]*n[1]+t[2]*n[2])}function x(t){return!isNaN(t)&&t!==-1/0&&t!==1/0&&t>0}N._pool=new f.Z(N),p=E||(E={}),(b=p.DepthOrder||(p.DepthOrder={}))[b.FRONT_TO_BACK=1]="FRONT_TO_BACK",b[b.BACK_TO_FRONT=-1]="BACK_TO_FRONT";const y=[(0,u.f)(-1,-1,-1),(0,u.f)(1,-1,-1),(0,u.f)(-1,1,-1),(0,u.f)(1,1,-1),(0,u.f)(-1,-1,1),(0,u.f)(1,-1,1),(0,u.f)(-1,1,1),(0,u.f)(1,1,1)],v=[(0,u.f)(-1,-1,-1),(0,u.f)(-1,-1,1),(0,u.f)(-1,1,-1),(0,u.f)(-1,1,1),(0,u.f)(1,-1,-1),(0,u.f)(1,-1,1),(0,u.f)(1,1,-1),(0,u.f)(1,1,1)],w=Math.sqrt(3),B=[null],D=(0,l.c)(),C=(0,u.c)(),j=(0,u.c)(),V=(0,u.c)(),U=new d.Z,z=(0,l.c)(),G=(0,l.c)(),H=(0,l.c)(),q=(0,l.c)(),Y=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],k=new d.Z,W=[0,0,0,0,0,0,0,0],X=E;var K=n(73453);function Z(t,e,n){const r=(0,l.c)(),o=(0,l.g)(r);return(0,c.A)(o,o,t,.5),(0,c.A)(o,o,e,.5),r[3]=(0,c.i)(o,t),(0,c.a)(o,o,n),r}let J=class{constructor(){this._idToComponent=new Map,this._components=new X((t=>t.bounds)),this._edges=new X((t=>t.bounds)),this._tmpLineSegment=(0,h.Ue)(),this._tmpP1=(0,u.c)(),this._tmpP2=(0,u.c)(),this._tmpP3=(0,u.c)(),this.remoteClient=null}async fetchCandidates(t,e){await Promise.resolve(),(0,s.k_)(e),await this._ensureEdgeLocations(t,e);const n=[];return this._edges.forEachNeighbor((e=>(this._addCandidates(t,e,n),n.length<1e3)),t.bounds),{result:{candidates:n}}}async _ensureEdgeLocations(t,e){const n=[];if(this._components.forEachNeighbor((t=>{if(null==t.info){const{id:e,uid:r}=t;n.push({id:e,uid:r})}return!0}),t.bounds),!n.length)return;const r={components:n},o=await this.remoteClient.invoke("fetchAllEdgeLocations",r,e??{});for(const t of o.components)this._setFetchEdgeLocations(t)}async add(t){const e=new Q(t.id,t.bounds);return this._idToComponent.set(e.id,e),this._components.add([e]),{result:{}}}async remove(t){const e=this._idToComponent.get(t.id);if(e){const t=[];this._edges.forEachNeighbor((n=>(n.component===e&&t.push(n),!0)),e.bounds),this._edges.remove(t),this._components.remove([e]),this._idToComponent.delete(e.id)}return{result:{}}}_setFetchEdgeLocations(t){const e=this._idToComponent.get(t.id);if(null==e||t.uid!==e.uid)return;const n=K.n_.createView(t.locations),r=new Array(n.count),o=(0,u.c)(),i=(0,u.c)();for(let s=0;s<n.count;s++){n.position0.getVec(s,o),n.position1.getVec(s,i);const a=Z(o,i,t.origin),c=new tt(e,s,a);r[s]=c}this._edges.add(r);const{objectIds:s,origin:a}=t;e.info={locations:n,objectIds:s,origin:a}}_addCandidates(t,e,n){const{info:r}=e.component,{origin:o,objectIds:i}=r,s=r.locations,a=s.position0.getVec(e.index,this._tmpP1),u=s.position1.getVec(e.index,this._tmpP2);(0,c.a)(a,a,o),(0,c.a)(u,u,o);const h=i[s.componentIndex.get(e.index)];this._addEdgeCandidate(t,h,a,u,n),this._addVertexCandidate(t,h,a,n),this._addVertexCandidate(t,h,u,n)}_addEdgeCandidate(t,e,n,r,o){if(!t.returnEdge)return;const i=(0,l.g)(t.bounds),s=(0,h.zk)(n,r,this._tmpLineSegment),a=(0,h.nF)(s,i,this._tmpP3);(0,l.l)(t.bounds,a)&&o.push({type:"edge",objectId:e,target:(0,u.a)(a),distance:(0,c.i)(i,a),start:(0,u.a)(n),end:(0,u.a)(r)})}_addVertexCandidate(t,e,n,r){if(!t.returnVertex)return;const o=(0,l.g)(t.bounds);(0,l.l)(t.bounds,n)&&r.push({type:"vertex",objectId:e,target:(0,u.a)(n),distance:(0,c.i)(o,n)})}};J=(0,i._)([(0,a.j)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],J);const $=J;class Q{constructor(t,e){this.id=t,this.bounds=e,this.info=null,this.uid=++Q.uid}}Q.uid=0;class tt{constructor(t,e,n){this.component=t,this.index=e,this.bounds=n}}}}]);