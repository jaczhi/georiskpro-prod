"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[9523],{24455:(t,e,n)=>{n.d(e,{A:()=>m,a:()=>l,d:()=>p,e:()=>d,f:()=>f,g:()=>y,h:()=>b,i:()=>o,j:()=>M,k:()=>c,m:()=>u,s:()=>r,t:()=>a,w:()=>h,y:()=>I,z:()=>S});var s=n(8909),i=n(93011);function r(t,e,n,s,i,r,o,a,l,u,h,c,d,f,p,m,g){return t[0]=e,t[1]=n,t[2]=s,t[3]=i,t[4]=r,t[5]=o,t[6]=a,t[7]=l,t[8]=u,t[9]=h,t[10]=c,t[11]=d,t[12]=f,t[13]=p,t[14]=m,t[15]=g,t}function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function a(t,e){if(t===e){const n=e[1],s=e[2],i=e[3],r=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=r,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function l(t,e){const n=e[0],s=e[1],i=e[2],r=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],c=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],_=e[15],y=n*a-s*o,x=n*l-i*o,b=n*u-r*o,M=s*l-i*a,S=s*u-r*a,I=i*u-r*l,v=h*m-c*p,w=h*g-d*p,F=h*_-f*p,z=c*g-d*m,B=c*_-f*m,E=d*_-f*g;let N=y*E-x*B+b*z+M*F-S*w+I*v;return N?(N=1/N,t[0]=(a*E-l*B+u*z)*N,t[1]=(i*B-s*E-r*z)*N,t[2]=(m*I-g*S+_*M)*N,t[3]=(d*S-c*I-f*M)*N,t[4]=(l*F-o*E-u*w)*N,t[5]=(n*E-i*F+r*w)*N,t[6]=(g*b-p*I-_*x)*N,t[7]=(h*I-d*b+f*x)*N,t[8]=(o*B-a*F+u*v)*N,t[9]=(s*F-n*B-r*v)*N,t[10]=(p*S-m*b+_*y)*N,t[11]=(c*b-h*S-f*y)*N,t[12]=(a*w-o*z-l*v)*N,t[13]=(n*z-s*w+i*v)*N,t[14]=(m*x-p*M-g*y)*N,t[15]=(h*M-c*x+d*y)*N,t):null}function u(t,e,n){const s=e[0],i=e[1],r=e[2],o=e[3],a=e[4],l=e[5],u=e[6],h=e[7],c=e[8],d=e[9],f=e[10],p=e[11],m=e[12],g=e[13],_=e[14],y=e[15];let x=n[0],b=n[1],M=n[2],S=n[3];return t[0]=x*s+b*a+M*c+S*m,t[1]=x*i+b*l+M*d+S*g,t[2]=x*r+b*u+M*f+S*_,t[3]=x*o+b*h+M*p+S*y,x=n[4],b=n[5],M=n[6],S=n[7],t[4]=x*s+b*a+M*c+S*m,t[5]=x*i+b*l+M*d+S*g,t[6]=x*r+b*u+M*f+S*_,t[7]=x*o+b*h+M*p+S*y,x=n[8],b=n[9],M=n[10],S=n[11],t[8]=x*s+b*a+M*c+S*m,t[9]=x*i+b*l+M*d+S*g,t[10]=x*r+b*u+M*f+S*_,t[11]=x*o+b*h+M*p+S*y,x=n[12],b=n[13],M=n[14],S=n[15],t[12]=x*s+b*a+M*c+S*m,t[13]=x*i+b*l+M*d+S*g,t[14]=x*r+b*u+M*f+S*_,t[15]=x*o+b*h+M*p+S*y,t}function h(t,e,n){const s=n[0],i=n[1],r=n[2];if(e===t)t[12]=e[0]*s+e[4]*i+e[8]*r+e[12],t[13]=e[1]*s+e[5]*i+e[9]*r+e[13],t[14]=e[2]*s+e[6]*i+e[10]*r+e[14],t[15]=e[3]*s+e[7]*i+e[11]*r+e[15];else{const n=e[0],o=e[1],a=e[2],l=e[3],u=e[4],h=e[5],c=e[6],d=e[7],f=e[8],p=e[9],m=e[10],g=e[11];t[0]=n,t[1]=o,t[2]=a,t[3]=l,t[4]=u,t[5]=h,t[6]=c,t[7]=d,t[8]=f,t[9]=p,t[10]=m,t[11]=g,t[12]=n*s+u*i+f*r+e[12],t[13]=o*s+h*i+p*r+e[13],t[14]=a*s+c*i+m*r+e[14],t[15]=l*s+d*i+g*r+e[15]}return t}function c(t,e,n){const s=n[0],i=n[1],r=n[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function d(t,e,n,s){let r,o,a,l,u,h,c,d,f,p,m,g,_,y,x,b,M,S,I,v,w,F,z,B,E=s[0],N=s[1],R=s[2],T=Math.sqrt(E*E+N*N+R*R);return T<(0,i.g)()?null:(T=1/T,E*=T,N*=T,R*=T,r=Math.sin(n),o=Math.cos(n),a=1-o,l=e[0],u=e[1],h=e[2],c=e[3],d=e[4],f=e[5],p=e[6],m=e[7],g=e[8],_=e[9],y=e[10],x=e[11],b=E*E*a+o,M=N*E*a+R*r,S=R*E*a-N*r,I=E*N*a-R*r,v=N*N*a+o,w=R*N*a+E*r,F=E*R*a+N*r,z=N*R*a-E*r,B=R*R*a+o,t[0]=l*b+d*M+g*S,t[1]=u*b+f*M+_*S,t[2]=h*b+p*M+y*S,t[3]=c*b+m*M+x*S,t[4]=l*I+d*v+g*w,t[5]=u*I+f*v+_*w,t[6]=h*I+p*v+y*w,t[7]=c*I+m*v+x*w,t[8]=l*F+d*z+g*B,t[9]=u*F+f*z+_*B,t[10]=h*F+p*z+y*B,t[11]=c*F+m*z+x*B,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function f(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function p(t,e,n){if(0===e)return o(t);let s,r,a,l=n[0],u=n[1],h=n[2],c=Math.sqrt(l*l+u*u+h*h);return c<(0,i.g)()?null:(c=1/c,l*=c,u*=c,h*=c,s=Math.sin(e),r=Math.cos(e),a=1-r,t[0]=l*l*a+r,t[1]=u*l*a+h*s,t[2]=h*l*a-u*s,t[3]=0,t[4]=l*u*a-h*s,t[5]=u*u*a+r,t[6]=h*u*a+l*s,t[7]=0,t[8]=l*h*a+u*s,t[9]=u*h*a-l*s,t[10]=h*h*a+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function m(t,e){const n=Math.sin(e),s=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function g(t,e,n){const s=e[0],i=e[1],r=e[2],o=e[3],a=s+s,l=i+i,u=r+r,h=s*a,c=s*l,d=s*u,f=i*l,p=i*u,m=r*u,g=o*a,_=o*l,y=o*u;return t[0]=1-(f+m),t[1]=c+y,t[2]=d-_,t[3]=0,t[4]=c-y,t[5]=1-(h+m),t[6]=p+g,t[7]=0,t[8]=d+_,t[9]=p-g,t[10]=1-(h+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}const _=(0,s.c)();function y(t,e,n,s){const i=e[0],r=e[1],o=e[2],a=e[3],l=i+i,u=r+r,h=o+o,c=i*l,d=i*u,f=i*h,p=r*u,m=r*h,g=o*h,_=a*l,y=a*u,x=a*h,b=s[0],M=s[1],S=s[2];return t[0]=(1-(p+g))*b,t[1]=(d+x)*b,t[2]=(f-y)*b,t[3]=0,t[4]=(d-x)*M,t[5]=(1-(c+g))*M,t[6]=(m+_)*M,t[7]=0,t[8]=(f+y)*S,t[9]=(m-_)*S,t[10]=(1-(c+p))*S,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function x(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function b(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function M(t,e){if(t===e)return!0;const n=t[0],s=t[1],r=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],c=t[8],d=t[9],f=t[10],p=t[11],m=t[12],g=t[13],_=t[14],y=t[15],x=e[0],b=e[1],M=e[2],S=e[3],I=e[4],v=e[5],w=e[6],F=e[7],z=e[8],B=e[9],E=e[10],N=e[11],R=e[12],T=e[13],Z=e[14],q=e[15],A=(0,i.g)();return Math.abs(n-x)<=A*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(s-b)<=A*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(r-M)<=A*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(o-S)<=A*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(a-I)<=A*Math.max(1,Math.abs(a),Math.abs(I))&&Math.abs(l-v)<=A*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(u-w)<=A*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(h-F)<=A*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(c-z)<=A*Math.max(1,Math.abs(c),Math.abs(z))&&Math.abs(d-B)<=A*Math.max(1,Math.abs(d),Math.abs(B))&&Math.abs(f-E)<=A*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(p-N)<=A*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(m-R)<=A*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(g-T)<=A*Math.max(1,Math.abs(g),Math.abs(T))&&Math.abs(_-Z)<=A*Math.max(1,Math.abs(_),Math.abs(Z))&&Math.abs(y-q)<=A*Math.max(1,Math.abs(y),Math.abs(q))}function S(t){const e=(0,i.g)(),n=t[0],s=t[1],r=t[2],o=t[4],a=t[5],l=t[6],u=t[8],h=t[9],c=t[10];return Math.abs(1-(n*n+o*o+u*u))<=e&&Math.abs(1-(s*s+a*a+h*h))<=e&&Math.abs(1-(r*r+l*l+c*c))<=e}function I(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[8]&&0===t[9]&&1===t[10]}const v=u,w=x;Object.freeze(Object.defineProperty({__proto__:null,add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},adjoint:function(t,e){const n=e[0],s=e[1],i=e[2],r=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],c=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],_=e[15];return t[0]=a*(d*_-f*g)-c*(l*_-u*g)+m*(l*f-u*d),t[1]=-(s*(d*_-f*g)-c*(i*_-r*g)+m*(i*f-r*d)),t[2]=s*(l*_-u*g)-a*(i*_-r*g)+m*(i*u-r*l),t[3]=-(s*(l*f-u*d)-a*(i*f-r*d)+c*(i*u-r*l)),t[4]=-(o*(d*_-f*g)-h*(l*_-u*g)+p*(l*f-u*d)),t[5]=n*(d*_-f*g)-h*(i*_-r*g)+p*(i*f-r*d),t[6]=-(n*(l*_-u*g)-o*(i*_-r*g)+p*(i*u-r*l)),t[7]=n*(l*f-u*d)-o*(i*f-r*d)+h*(i*u-r*l),t[8]=o*(c*_-f*m)-h*(a*_-u*m)+p*(a*f-u*c),t[9]=-(n*(c*_-f*m)-h*(s*_-r*m)+p*(s*f-r*c)),t[10]=n*(a*_-u*m)-o*(s*_-r*m)+p*(s*u-r*a),t[11]=-(n*(a*f-u*c)-o*(s*f-r*c)+h*(s*u-r*a)),t[12]=-(o*(c*g-d*m)-h*(a*g-l*m)+p*(a*d-l*c)),t[13]=n*(c*g-d*m)-h*(s*g-i*m)+p*(s*d-i*c),t[14]=-(n*(a*g-l*m)-o*(s*g-i*m)+p*(s*l-i*a)),t[15]=n*(a*d-l*c)-o*(s*d-i*c)+h*(s*l-i*a),t},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},determinant:function(t){const e=t[0],n=t[1],s=t[2],i=t[3],r=t[4],o=t[5],a=t[6],l=t[7],u=t[8],h=t[9],c=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15];return(e*o-n*r)*(c*g-d*m)-(e*a-s*r)*(h*g-d*p)+(e*l-i*r)*(h*m-c*p)+(n*a-s*o)*(u*g-d*f)-(n*l-i*o)*(u*m-c*f)+(s*l-i*a)*(u*p-h*f)},equals:M,exactEquals:b,frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)},fromQuat:function(t,e){const n=e[0],s=e[1],i=e[2],r=e[3],o=n+n,a=s+s,l=i+i,u=n*o,h=s*o,c=s*a,d=i*o,f=i*a,p=i*l,m=r*o,g=r*a,_=r*l;return t[0]=1-c-p,t[1]=h+_,t[2]=d-g,t[3]=0,t[4]=h-_,t[5]=1-u-p,t[6]=f+m,t[7]=0,t[8]=d+g,t[9]=f-m,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromQuat2:function(t,e){const n=_,s=-e[0],i=-e[1],r=-e[2],o=e[3],a=e[4],l=e[5],u=e[6],h=e[7],c=s*s+i*i+r*r+o*o;return c>0?(n[0]=2*(a*o+h*s+l*r-u*i)/c,n[1]=2*(l*o+h*i+u*s-a*r)/c,n[2]=2*(u*o+h*r+a*i-l*s)/c):(n[0]=2*(a*o+h*s+l*r-u*i),n[1]=2*(l*o+h*i+u*s-a*r),n[2]=2*(u*o+h*r+a*i-l*s)),g(t,e,n),t},fromRotation:p,fromRotationTranslation:g,fromRotationTranslationScale:y,fromRotationTranslationScaleOrigin:function(t,e,n,s,i){const r=e[0],o=e[1],a=e[2],l=e[3],u=r+r,h=o+o,c=a+a,d=r*u,f=r*h,p=r*c,m=o*h,g=o*c,_=a*c,y=l*u,x=l*h,b=l*c,M=s[0],S=s[1],I=s[2],v=i[0],w=i[1],F=i[2],z=(1-(m+_))*M,B=(f+b)*M,E=(p-x)*M,N=(f-b)*S,R=(1-(d+_))*S,T=(g+y)*S,Z=(p+x)*I,q=(g-y)*I,A=(1-(d+m))*I;return t[0]=z,t[1]=B,t[2]=E,t[3]=0,t[4]=N,t[5]=R,t[6]=T,t[7]=0,t[8]=Z,t[9]=q,t[10]=A,t[11]=0,t[12]=n[0]+v-(z*v+N*w+Z*F),t[13]=n[1]+w-(B*v+R*w+q*F),t[14]=n[2]+F-(E*v+T*w+A*F),t[15]=1,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromTranslation:f,fromXRotation:m,fromYRotation:function(t,e){const n=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,e){const n=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,e,n,s,i,r,o){const a=1/(n-e),l=1/(i-s),u=1/(r-o);return t[0]=2*r*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+s)*l,t[10]=(o+r)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*r*2*u,t[15]=0,t},getRotation:function(t,e){const n=e[0]+e[5]+e[10];let s=0;return n>0?(s=2*Math.sqrt(n+1),t[3]=.25*s,t[0]=(e[6]-e[9])/s,t[1]=(e[8]-e[2])/s,t[2]=(e[1]-e[4])/s):e[0]>e[5]&&e[0]>e[10]?(s=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/s,t[0]=.25*s,t[1]=(e[1]+e[4])/s,t[2]=(e[8]+e[2])/s):e[5]>e[10]?(s=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/s,t[0]=(e[1]+e[4])/s,t[1]=.25*s,t[2]=(e[6]+e[9])/s):(s=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/s,t[0]=(e[8]+e[2])/s,t[1]=(e[6]+e[9])/s,t[2]=.25*s),t},getScaling:function(t,e){const n=e[0],s=e[1],i=e[2],r=e[4],o=e[5],a=e[6],l=e[8],u=e[9],h=e[10];return t[0]=Math.sqrt(n*n+s*s+i*i),t[1]=Math.sqrt(r*r+o*o+a*a),t[2]=Math.sqrt(l*l+u*u+h*h),t},getTranslation:function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},hasIdentityRotation:I,identity:o,invert:l,invertOrIdentity:function(t,e){return l(t,e)||o(t),t},isOrthoNormal:S,lookAt:function(t,e,n,s){const r=e[0],a=e[1],l=e[2];let u=r-n[0],h=a-n[1],c=l-n[2];const d=(0,i.g)();if(Math.abs(u)<d&&Math.abs(h)<d&&Math.abs(c)<d)return void o(t);let f=1/Math.sqrt(u*u+h*h+c*c);u*=f,h*=f,c*=f;const p=s[0],m=s[1],g=s[2];let _=m*c-g*h,y=g*u-p*c,x=p*h-m*u;f=Math.sqrt(_*_+y*y+x*x),f?(f=1/f,_*=f,y*=f,x*=f):(_=0,y=0,x=0);let b=h*x-c*y,M=c*_-u*x,S=u*y-h*_;f=Math.sqrt(b*b+M*M+S*S),f?(f=1/f,b*=f,M*=f,S*=f):(b=0,M=0,S=0),t[0]=_,t[1]=b,t[2]=u,t[3]=0,t[4]=y,t[5]=M,t[6]=h,t[7]=0,t[8]=x,t[9]=S,t[10]=c,t[11]=0,t[12]=-(_*r+y*a+x*l),t[13]=-(b*r+M*a+S*l),t[14]=-(u*r+h*a+c*l),t[15]=1},mul:v,multiply:u,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},multiplyScalarAndAdd:function(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t[2]=e[2]+n[2]*s,t[3]=e[3]+n[3]*s,t[4]=e[4]+n[4]*s,t[5]=e[5]+n[5]*s,t[6]=e[6]+n[6]*s,t[7]=e[7]+n[7]*s,t[8]=e[8]+n[8]*s,t[9]=e[9]+n[9]*s,t[10]=e[10]+n[10]*s,t[11]=e[11]+n[11]*s,t[12]=e[12]+n[12]*s,t[13]=e[13]+n[13]*s,t[14]=e[14]+n[14]*s,t[15]=e[15]+n[15]*s,t},ortho:function(t,e,n,s,i,r,o){const a=1/(e-n),l=1/(s-i),u=1/(r-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*a,t[13]=(i+s)*l,t[14]=(o+r)*u,t[15]=1,t},perspective:function(t,e,n,s,i){const r=1/Math.tan(e/2);let o;return t[0]=r/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(s-i),t[10]=(i+s)*o,t[14]=2*i*s*o):(t[10]=-1,t[14]=-2*s),t},perspectiveFromFieldOfView:function(t,e,n,s){const i=Math.tan(e.upDegrees*Math.PI/180),r=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),u=2/(i+r);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(i-r)*u*.5,t[10]=s/(n-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*n/(n-s),t[15]=0,t},rotate:d,rotateX:function(t,e,n){const s=Math.sin(n),i=Math.cos(n),r=e[4],o=e[5],a=e[6],l=e[7],u=e[8],h=e[9],c=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*i+u*s,t[5]=o*i+h*s,t[6]=a*i+c*s,t[7]=l*i+d*s,t[8]=u*i-r*s,t[9]=h*i-o*s,t[10]=c*i-a*s,t[11]=d*i-l*s,t},rotateY:function(t,e,n){const s=Math.sin(n),i=Math.cos(n),r=e[0],o=e[1],a=e[2],l=e[3],u=e[8],h=e[9],c=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*i-u*s,t[1]=o*i-h*s,t[2]=a*i-c*s,t[3]=l*i-d*s,t[8]=r*s+u*i,t[9]=o*s+h*i,t[10]=a*s+c*i,t[11]=l*s+d*i,t},rotateZ:function(t,e,n){const s=Math.sin(n),i=Math.cos(n),r=e[0],o=e[1],a=e[2],l=e[3],u=e[4],h=e[5],c=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*i+u*s,t[1]=o*i+h*s,t[2]=a*i+c*s,t[3]=l*i+d*s,t[4]=u*i-r*s,t[5]=h*i-o*s,t[6]=c*i-a*s,t[7]=d*i-l*s,t},scale:c,set:r,str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},sub:w,subtract:x,targetTo:function(t,e,n,s){const i=e[0],r=e[1],o=e[2],a=s[0],l=s[1],u=s[2];let h=i-n[0],c=r-n[1],d=o-n[2],f=h*h+c*c+d*d;f>0&&(f=1/Math.sqrt(f),h*=f,c*=f,d*=f);let p=l*d-u*c,m=u*h-a*d,g=a*c-l*h;return f=p*p+m*m+g*g,f>0&&(f=1/Math.sqrt(f),p*=f,m*=f,g*=f),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-d*m,t[5]=d*p-h*g,t[6]=h*m-c*p,t[7]=0,t[8]=h,t[9]=c,t[10]=d,t[11]=0,t[12]=i,t[13]=r,t[14]=o,t[15]=1,t},translate:h,transpose:a},Symbol.toStringTag,{value:"Module"}))},55854:(t,e,n)=>{n.d(e,{z:()=>i});var s=n(40366);class i{constructor(t,e){this._storage=new s.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),e&&this._storage.registerRemoveFunc("",e)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,e,n=1){this._storage.put(this,t,e,n,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}}},40366:(t,e,n)=>{n.d(e,{WJ:()=>a,Xq:()=>o});var s,i,r=n(17135);(i=s||(s={}))[i.ALL=0]="ALL",i[i.SOME=1]="SOME";class o{constructor(t,e,n){this.name=t,this._storage=e,this.id=l+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),n&&(this._storage.registerRemoveFunc(this.id,n),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get sizeAll(){return this._storage.size}resetHitRate(){this._hit=this._miss=0}put(t,e,n,s=0){this._storage.put(this,t,e,n,s)}get(t){const e=this._storage.get(this,t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this,t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,n){this._storage.updateSize(this,t,e,n)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class a{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new r.Z,this._users=new r.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimits()}put(t,e,n,i,r){e=t.id+e;const o=this._db.get(e);if(o&&(this._size-=o.size,t.size-=o.size,this._db.delete(e),o.entry!==n&&this._notifyRemove(e,o.entry,s.ALL)),i>this._maxSize)return void this._notifyRemove(e,n,s.ALL);if(void 0===n)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return void console.warn("Refusing to cache entry with invalid size "+i);const a=1+Math.max(r,-3)- -3;this._db.set(e,{entry:n,size:i,lifetime:a,lives:a}),this._size+=i,t.size+=i,this._checkSizeLimits()}updateSize(t,e,n,i){e=t.id+e;const r=this._db.get(e);if(r&&r.entry===n){for(this._size-=r.size,t.size-=r.size;i>this._maxSize;){const t=this._notifyRemove(e,n,s.SOME);if(!(null!=t&&t>0))return void this._db.delete(e);i=t}r.size=i,this._size+=i,t.size+=i,this._checkSizeLimits()}}pop(t,e){e=t.id+e;const n=this._db.get(e);if(n)return this._size-=n.size,t.size-=n.size,this._db.delete(e),++this._hit,n.entry;++this._miss}get(t,e){e=t.id+e;const n=this._db.get(e);if(void 0!==n)return this._db.delete(e),n.lives=n.lifetime,this._db.set(e,n),++this._hit,n.entry;++this._miss}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},n=new Array;this._db.forEach(((t,s)=>{const i=t.lifetime;n[i]=(n[i]||0)+t.size,this._users.forAll((n=>{const{id:i,name:r}=n;if(s.startsWith(i)){const n=e[r]||0;e[r]=n+t.size}}))}));const s={};this._users.forAll((t=>{const n=t.name;if("hitRate"in t&&"number"==typeof t.hitRate&&!isNaN(t.hitRate)&&t.hitRate>0){const i=e[n]||0;e[n]=i,s[n]=Math.round(100*t.hitRate)+"%"}else s[n]="0%"}));const i=Object.keys(e);i.sort(((t,n)=>e[n]-e[t])),i.forEach((n=>t[n]=Math.round(e[n]/2**20)+"MB / "+s[n]));for(let e=n.length-1;e>=0;--e){const s=n[e];s&&(t["Priority "+(e+-3-1)]=Math.round(s/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){const e=t.id;this._db.forEach(((t,n)=>{n.startsWith(e)&&(this._size-=t.size,this._db.delete(n),this._notifyRemove(n,t.entry,s.ALL))})),t.size=0}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,s.ALL))),this._users.forEach((t=>t.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,n){let s;return this._removeFuncs.some((i=>{if(t.startsWith(i[0])){const t=i[1](e,n);return"number"==typeof t&&(s=t),!0}return!1})),s}_checkSizeLimits(){if(this._size>this._maxSize)for(const[t,e]of this._db)if(this._purgeItem(t,e),this._size<=.9*this.maxSize)return;this._users.forEach((t=>{if(t.maxSize>0&&t.size>t.maxSize)for(const[e,n]of this._db)if(e.startsWith(t.id)&&(this._purgeItem(e,n,t),t.size<=.9*t.maxSize))return}))}_purgeItem(t,e,n=this._users.find((e=>t.startsWith(e.id)))){if(this._db.delete(t),e.lives<=1){this._size-=e.size,n&&(n.size-=e.size);const i=this._notifyRemove(t,e.entry,s.SOME);null!=i&&i>0&&(this._size+=i,n&&(n.size+=i),e.lives=e.lifetime,e.size=i,this._db.set(t,e))}else--e.lives,this._db.set(t,e)}}let l=0},67979:(t,e,n)=>{n.d(e,{Ed:()=>u,UI:()=>h,mt:()=>p,q6:()=>f,vr:()=>m});var s=n(36663),i=n(74396),r=n(61681),o=n(33926),a=n(81977),l=n(40266);function u(t,e,n){return(0,o.as)(t.map(((t,s)=>e.apply(n,[t,s]))))}async function h(t,e,n){return(await(0,o.as)(t.map(((t,s)=>e.apply(n,[t,s]))))).map((t=>t.value))}function c(t){return{ok:!0,value:t}}function d(t){return{ok:!1,error:t}}async function f(t){if(null==t)return{ok:!1,error:new Error("no promise provided")};try{return c(await t)}catch(t){return d(t)}}async function p(t){try{return c(await t)}catch(t){return(0,o.r9)(t),d(t)}}function m(t,e){return new g(t,e)}let g=class extends i.Z{get value(){return null!=(t=this._result)&&!0===t.ok?t.value:null;var t}get error(){return null!=(t=this._result)&&!1===t.ok?t.error:null;var t}get finished(){return null!=this._result}constructor(t,e){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=(0,r.IM)(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:n}=this._abortController;this.promise=t(n),this.promise.then((t=>{this._result=c(t),this._cleanup()}),(t=>{this._result=d(t),this._cleanup()})),this._abortHandle=(0,o.fu)(e,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=(0,r.hw)(this._abortHandle),this._abortController=null}};(0,s._)([(0,a.Cb)()],g.prototype,"value",null),(0,s._)([(0,a.Cb)()],g.prototype,"error",null),(0,s._)([(0,a.Cb)()],g.prototype,"finished",null),(0,s._)([(0,a.Cb)()],g.prototype,"promise",void 0),(0,s._)([(0,a.Cb)()],g.prototype,"_result",void 0),g=(0,s._)([(0,l.j)("esri.core.asyncUtils.ReactiveTask")],g)},26488:(t,e,n)=>{n.d(e,{Q:()=>a});var s=n(7753),i=n(61681),r=n(17135),o=n(80657);class a{constructor(t=9,e){this._compareMinX=c,this._compareMinY=d,this._toBBox=t=>t,this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&("function"==typeof e?this._toBBox=e:this._initFormat(e)),this.clear()}destroy(){this.clear(),b.prune(),M.prune(),S.prune(),I.prune()}all(t){this._all(this._data,t)}search(t,e){let n=this._data;const s=this._toBBox;if(y(t,n))for(b.clear();n;){for(let i=0,r=n.children.length;i<r;i++){const r=n.children[i],o=n.leaf?s(r):r;y(t,o)&&(n.leaf?e(r):_(t,o)?this._all(r,e):b.push(r))}n=b.pop()}}collides(t){let e=this._data;const n=this._toBBox;if(!y(t,e))return!1;for(b.clear();e;){for(let s=0,i=e.children.length;s<i;s++){const i=e.children[s],r=e.leaf?n(i):i;if(y(t,r)){if(e.leaf||_(t,r))return!0;b.push(i)}}e=b.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}let e=this._build(t.slice(0,t.length),0,t.length-1,0);if(this._data.children.length)if(this._data.height===e.height)this._splitRoot(this._data,e);else{if(this._data.height<e.height){const t=this._data;this._data=e,e=t}this._insert(e,this._data.height-e.height-1,!0)}else this._data=e;return this}insert(t){return t&&this._insert(t,this._data.height-1),this}clear(){return this._data=new F([]),this}remove(t){if(!t)return this;let e,n=this._data,r=null,o=0,a=!1;const l=this._toBBox(t);for(S.clear(),I.clear();n||S.length>0;){if(n||(n=(0,i.j0)(S.pop()),r=S.data[S.length-1],o=I.pop()??0,a=!0),n.leaf&&(e=(0,s.cq)(n.children,t,n.children.length,n.indexHint),-1!==e))return n.children.splice(e,1),S.push(n),this._condense(S),this;a||n.leaf||!_(n,l)?r?(o++,n=r.children[o],a=!1):n=null:(S.push(n),I.push(o),o=0,r=n,n=n.children[0])}return this}toJSON(){return this._data}fromJSON(t){return this._data=t,this}_all(t,e){let n=t;for(M.clear();n;){if(!0===n.leaf)for(const t of n.children)e(t);else M.pushArray(n.children);n=M.pop()??null}}_build(t,e,n,s){const i=n-e+1;let r=this._maxEntries;if(i<=r){const s=new F(t.slice(e,n+1));return l(s,this._toBBox),s}s||(s=Math.ceil(Math.log(i)/Math.log(r)),r=Math.ceil(i/r**(s-1)));const o=new z([]);o.height=s;const a=Math.ceil(i/r),u=a*Math.ceil(Math.sqrt(r));x(t,e,n,u,this._compareMinX);for(let i=e;i<=n;i+=u){const e=Math.min(i+u-1,n);x(t,i,e,a,this._compareMinY);for(let n=i;n<=e;n+=a){const i=Math.min(n+a-1,e);o.children.push(this._build(t,n,i,s-1))}}return l(o,this._toBBox),o}_chooseSubtree(t,e,n,s){for(;s.push(e),!0!==e.leaf&&s.length-1!==n;){let n,s=1/0,i=1/0;for(let r=0,o=e.children.length;r<o;r++){const o=e.children[r],a=f(o),l=m(t,o)-a;l<i?(i=l,s=a<s?a:s,n=o):l===i&&a<s&&(s=a,n=o)}e=n||e.children[0]}return e}_insert(t,e,n){const s=this._toBBox,i=n?t:s(t);S.clear();const r=this._chooseSubtree(i,this._data,e,S);for(r.children.push(t),h(r,i);e>=0&&S.data[e].children.length>this._maxEntries;)this._split(S,e),e--;this._adjustParentBBoxes(i,S,e)}_split(t,e){const n=t.data[e],s=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,s);const r=this._chooseSplitIndex(n,i,s);if(!r)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const o=n.children.splice(r,n.children.length-r),a=n.leaf?new F(o):new z(o);a.height=n.height,l(n,this._toBBox),l(a,this._toBBox),e?t.data[e-1].children.push(a):this._splitRoot(n,a)}_splitRoot(t,e){this._data=new z([t,e]),this._data.height=t.height+1,l(this._data,this._toBBox)}_chooseSplitIndex(t,e,n){let s,i,r;s=i=1/0;for(let o=e;o<=n-e;o++){const e=u(t,0,o,this._toBBox),a=u(t,o,n,this._toBBox),l=g(e,a),h=f(e)+f(a);l<s?(s=l,r=o,i=h<i?h:i):l===s&&h<i&&(i=h,r=o)}return r}_chooseSplitAxis(t,e,n){const s=t.leaf?this._compareMinX:c,i=t.leaf?this._compareMinY:d;this._allDistMargin(t,e,n,s)<this._allDistMargin(t,e,n,i)&&t.children.sort(s)}_allDistMargin(t,e,n,s){t.children.sort(s);const i=this._toBBox,r=u(t,0,e,i),o=u(t,n-e,n,i);let a=p(r)+p(o);for(let s=e;s<n-e;s++){const e=t.children[s];h(r,t.leaf?i(e):e),a+=p(r)}for(let s=n-e-1;s>=e;s--){const e=t.children[s];h(o,t.leaf?i(e):e),a+=p(o)}return a}_adjustParentBBoxes(t,e,n){for(let s=n;s>=0;s--)h(e.data[s],t)}_condense(t){for(let e=t.length-1;e>=0;e--){const n=t.data[e];if(0===n.children.length)if(e>0){const i=t.data[e-1],r=i.children;r.splice((0,s.cq)(r,n,r.length,i.indexHint),1)}else this.clear();else l(n,this._toBBox)}}_initFormat(t){const e=["return a"," - b",";"];this._compareMinX=new Function("a","b",e.join(t[0])),this._compareMinY=new Function("a","b",e.join(t[1])),this._toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}function l(t,e){u(t,0,t.children.length,e,t)}function u(t,e,n,s,i){i||(i=new F([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let r,o=e;o<n;o++)r=t.children[o],h(i,t.leaf?s(r):r);return i}function h(t,e){t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY)}function c(t,e){return t.minX-e.minX}function d(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function g(t,e){const n=Math.max(t.minX,e.minX),s=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),r=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,r-s)}function _(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function y(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function x(t,e,n,s,r){const a=[e,n];for(;a.length;){const e=(0,i.j0)(a.pop()),n=(0,i.j0)(a.pop());if(e-n<=s)continue;const l=n+Math.ceil((e-n)/s/2)*s;(0,o.q)(t,l,n,e,r),a.push(n,l,l,e)}}const b=new r.Z,M=new r.Z,S=new r.Z,I=new r.Z({deallocator:void 0});class v{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends v{constructor(){super(...arguments),this.height=1,this.indexHint=new s.SO}}class F extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class z extends w{constructor(t){super(),this.children=t,this.leaf=!1}}},94978:(t,e,n)=>{n.d(e,{Qc:()=>h,WU:()=>a,lt:()=>u});var s=n(21130),i=n(8108);const r={ar:[".",","],bg:[","," "],bs:[",","."],ca:[",","."],cs:[","," "],da:[",","."],de:[",","."],"de-ch":[".","’"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[","," "],fi:[","," "],fr:[","," "],"fr-ch":[","," "],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[","," "],id:[",","."],it:[",","."],"it-ch":[".","’"],ja:[".",","],ko:[".",","],lt:[","," "],lv:[","," "],mk:[",","."],nb:[","," "],nl:[",","."],pl:[","," "],pt:[",","."],"pt-pt":[","," "],ro:[",","."],ru:[","," "],sk:[","," "],sl:[",","."],sr:[",","."],sv:[","," "],th:[".",","],tr:[",","."],uk:[","," "],vi:[",","."],zh:[".",","]};function o(t=(0,i.Kd)()){let e=(t=t.toLowerCase())in r;if(!e){const n=t.split("-");n.length>1&&n[0]in r&&(t=n[0],e=!0),e||(t="en")}const[n,s,o="#,##0.###"]=r[t];return{decimal:n,group:s,pattern:o}}function a(t,e){const n=o((e={...e}).locale);e.customs=n;const s=e.pattern||n.pattern;return isNaN(t)||Math.abs(t)===1/0?null:function(t,e,n){const s=(n=n||{}).customs.group,i=n.customs.decimal,r=e.split(";"),o=r[0];if((e=r[t<0?1:0]||"-"+o).includes("%"))t*=100;else if(e.includes("‰"))t*=1e3;else{if(e.includes("¤"))throw new Error("currency notation not supported");if(e.includes("E"))throw new Error("exponential notation not supported")}const a=l,u=o.match(a);if(!u)throw new Error("unable to find a number expression in pattern: "+e);return!1===n.fractional&&(n.places=0),e.replace(a,function(t,e,n){!0===(n=n||{}).places&&(n.places=0),n.places===1/0&&(n.places=6);const s=e.split("."),i="string"==typeof n.places&&n.places.indexOf(",");let r=n.places;i?r=n.places.substring(i+1):+r>=0||(r=(s[1]||[]).length),n.round<0||(t=Number(t.toFixed(Number(r))));const o=String(Math.abs(t)).split("."),a=o[1]||"";if(s[1]||n.places){i&&(n.places=n.places.substring(0,i));const t=void 0!==n.places?n.places:s[1]&&s[1].lastIndexOf("0")+1;+t>a.length&&(o[1]=a.padEnd(Number(t),"0")),+r<a.length&&(o[1]=a.substr(0,Number(r)))}else o[1]&&o.pop();const l=s[0].replace(",","");let u=l.indexOf("0");-1!==u&&(u=l.length-u,u>o[0].length&&(o[0]=o[0].padStart(u,"0")),l.includes("#")||(o[0]=o[0].substr(o[0].length-u)));let h,c,d=s[0].lastIndexOf(",");if(-1!==d){h=s[0].length-d-1;const t=s[0].substr(0,d);d=t.lastIndexOf(","),-1!==d&&(c=t.length-d-1)}const f=[];for(let t=o[0];t;){const e=t.length-h;f.push(e>0?t.substr(e):t),t=e>0?t.slice(0,e):"",c&&(h=c,c=void 0)}return o[0]=f.reverse().join(n.group||","),o.join(n.decimal||".")}(t,u[0],{decimal:i,group:s,places:n.places,round:n.round}))}(t,s,e)}const l=/[#0,]*[#0](?:\.0*#*)?/;function u(t){const e=o((t=t||{}).locale),n=t.pattern||e.pattern,i=e.group,r=e.decimal;let a=1;if(n.includes("%"))a/=100;else if(n.includes("‰"))a/=1e3;else if(n.includes("¤"))throw new Error("currency notation not supported");const u=n.split(";");1===u.length&&u.push("-"+u[0]);const h=d(u,(e=>(e="(?:"+(0,s.Qs)(e,".")+")").replace(l,(e=>{const n={signed:!1,separator:t.strict?i:[i,""],fractional:t.fractional,decimal:r,exponent:!1},s=e.split(".");let o=t.places;1===s.length&&1!==a&&(s[1]="###"),1===s.length||0===o?n.fractional=!1:(void 0===o&&(o=t.pattern?s[1].lastIndexOf("0")+1:1/0),o&&null==t.fractional&&(n.fractional=!0),!t.places&&+o<s[1].length&&(o+=","+s[1].length),n.places=o);const l=s[0].split(",");return l.length>1&&(n.groupSize=l.pop().length,l.length>1&&(n.groupSize2=l.pop().length)),"("+function(t){"places"in(t=t||{})||(t.places=1/0),"string"!=typeof t.decimal&&(t.decimal="."),"fractional"in t&&!/^0/.test(String(t.places))||(t.fractional=[!0,!1]),"exponent"in t||(t.exponent=[!0,!1]),"eSigned"in t||(t.eSigned=[!0,!1]);const e=c(t),n=d(t.fractional,(e=>{let n="";return e&&0!==t.places&&(n="\\"+t.decimal,t.places===1/0?n="(?:"+n+"\\d+)?":n+="\\d{"+t.places+"}"),n}),!0);let s=e+n;return n&&(s="(?:(?:"+s+")|(?:"+n+"))"),s+d(t.exponent,(e=>e?"([eE]"+c({signed:t.eSigned})+")":""))}(n)+")"}))),!0);return{regexp:h.replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:i,decimal:r,factor:a}}function h(t,e){const n=u(e),s=new RegExp("^"+n.regexp+"$").exec(t);if(!s)return NaN;let i=s[1];if(!s[1]){if(!s[2])return NaN;i=s[2],n.factor*=-1}return i=i.replaceAll(new RegExp("["+n.group+"\\s\\xa0]","g"),"").replace(n.decimal,"."),Number(i)*n.factor}function c(t){return"signed"in(t=t||{})||(t.signed=[!0,!1]),"separator"in t?"groupSize"in t||(t.groupSize=3):t.separator="",d(t.signed,(t=>t?"[-+]":""),!0)+d(t.separator,(e=>{if(!e)return"(?:\\d+)";" "===(e=(0,s.Qs)(e))?e="\\s":" "===e&&(e="\\s\\xa0");const n=t.groupSize,i=t.groupSize2;if(i){const t="(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+e+"]\\d{"+i+"})*["+e+"]\\d{"+n+"})";return n-i>0?"(?:"+t+"|(?:0|[1-9]\\d{0,"+(n-1)+"}))":t}return"(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+e+"]\\d{"+n+"})*)"}),!0)}const d=(t,e,n)=>{if(!(t instanceof Array))return e(t);const s=[];for(let n=0;n<t.length;n++)s.push(e(t[n]));return f(s.join("|"),Boolean(n))},f=(t,e)=>"("+(e?"?:":"")+t+")"},76868:(t,e,n)=>{n.d(e,{N1:()=>d,YP:()=>l,Z_:()=>m,gx:()=>u,nn:()=>g,on:()=>c,tX:()=>_});var s=n(49546),i=n(23148),r=n(61681),o=n(33926),a=n(65449);function l(t,e,n={}){return h(t,e,n,f)}function u(t,e,n={}){return h(t,e,n,p)}function h(t,e,n={},s){let i=null;const o=n.once?(t,n)=>{s(t)&&((0,r.hw)(i),e(t,n))}:(t,n)=>{s(t)&&e(t,n)};if(i=(0,a.aQ)(t,o,n.sync,n.equals),n.initial){const e=t();o(e,e)}return i}function c(t,e,n,o={}){let a=null,u=null,h=null;function c(){a&&u&&(u.remove(),o.onListenerRemove?.(a),a=null,u=null)}function d(t){o.once&&o.once&&(0,r.hw)(h),n(t)}const f=l(t,((t,n)=>{c(),(0,s.vT)(t)&&(a=t,u=(0,s.on)(t,e,d),o.onListenerAdd?.(t))}),{sync:o.sync,initial:!0});return h=(0,i.kB)((()=>{f.remove(),c()})),h}function d(t,e){return function(t,e,n){if((0,o.Hc)(n))return Promise.reject((0,o.zE)());const s=t();if(e?.(s))return Promise.resolve(s);let a=null;function l(){a=(0,r.hw)(a)}return new Promise(((s,r)=>{a=(0,i.AL)([(0,o.fu)(n,(()=>{l(),r((0,o.zE)())})),h(t,(t=>{l(),s(t)}),{sync:!1,once:!0},e??f)])}))}(t,p,e)}function f(t){return!0}function p(t){return!!t}n(63235);const m={sync:!0},g={initial:!0},_={sync:!0,initial:!0}},68748:(t,e,n)=>{n.d(e,{aX:()=>S});var s=n(51366),i=n(70375),r=n(13802),o=n(89542),a=n(90819),l=n(25266),u=n(35925),h=n(39536),c=(n(91957),n(66341)),d=n(53736),f=n(84238),p=n(39154);async function m(t,e,n){const s="string"==typeof t?(0,p.mN)(t):t,i=e[0].spatialReference,r=(0,d.Ji)(e[0]),o={...n,query:{...s.query,f:"json",sr:i.wkid??JSON.stringify(i),geometries:JSON.stringify((l=e,{geometryType:(0,d.Ji)(l[0]),geometries:l.map((t=>t.toJSON()))}))}},{data:a}=await(0,c.default)(s.path+"/simplify",o);var l;return function(t,e,n){const s=(0,d.q9)(e);return t.map((t=>{const e=s.fromJSON(t);return e.spatialReference=n,e}))}(a.geometries,r,i)}const g=r.Z.getLogger("esri.geometry.support.normalizeUtils");function _(t){return"polygon"===t[0].type}function y(t){return"polyline"===t[0].type}function x(t,e,n){if(e){const e=function(t,e){if(!(t instanceof a.Z||t instanceof o.Z)){const t="straightLineDensify: the input geometry is neither polyline nor polygon";throw g.error(t),new i.Z(t)}const n=(0,l.x3)(t),s=[];for(const t of n){const n=[];s.push(n),n.push([t[0][0],t[0][1]]);for(let s=0;s<t.length-1;s++){const i=t[s][0],r=t[s][1],o=t[s+1][0],a=t[s+1][1],l=Math.sqrt((o-i)*(o-i)+(a-r)*(a-r)),u=(a-r)/l,h=(o-i)/l,c=l/e;if(c>1){for(let t=1;t<=c-1;t++){const s=t*e,o=h*s+i,a=u*s+r;n.push([o,a])}const t=(l+Math.floor(c-1)*e)/2,s=h*t+i,o=u*t+r;n.push([s,o])}n.push([o,a])}}return function(t){return"polygon"===t.type}(t)?new o.Z({rings:s,spatialReference:t.spatialReference}):new a.Z({paths:s,spatialReference:t.spatialReference})}(t,1e6);t=(0,h.Sx)(e,!0)}return n&&(t=(0,l.Sy)(t,n)),t}function b(t,e,n){if(Array.isArray(t)){const s=t[0];if(s>e){const n=(0,l.XZ)(s,e);t[0]=s+n*(-2*e)}else if(s<n){const e=(0,l.XZ)(s,n);t[0]=s+e*(-2*n)}}else{const s=t.x;if(s>e){const n=(0,l.XZ)(s,e);t=t.clone().offset(n*(-2*e),0)}else if(s<n){const e=(0,l.XZ)(s,n);t=t.clone().offset(e*(-2*n),0)}}return t}function M(t,e){let n=-1;for(let s=0;s<e.cutIndexes.length;s++){const i=e.cutIndexes[s],r=e.geometries[s],o=(0,l.x3)(r);for(let t=0;t<o.length;t++){const e=o[t];e.some((n=>{if(n[0]<180)return!0;{let n=0;for(let t=0;t<e.length;t++){const s=e[t][0];n=s>n?s:n}n=Number(n.toFixed(9));const s=-360*(0,l.XZ)(n,180);for(let n=0;n<e.length;n++){const e=r.getPoint(t,n);r.setPoint(t,n,e.clone().offset(s,0))}return!0}}))}if(i===n){if(_(t))for(const e of(0,l.x3)(r))t[i]=t[i].addRing(e);else if(y(t))for(const e of(0,l.x3)(r))t[i]=t[i].addPath(e)}else n=i,t[i]=r}return t}async function S(t,e,n){if(!Array.isArray(t))return S([t],e);e&&"string"!=typeof e&&g.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i="string"==typeof e?e:e?.url??s.Z.geometryServiceUrl;let r,p,_,y,I,v,w,F,z=0;const B=[],E=[];for(const e of t)if(null!=e)if(r||(r=e.spatialReference,p=(0,u.C5)(r),_=r.isWebMercator,v=_?102100:4326,y=l.UZ[v].maxX,I=l.UZ[v].minX,w=l.UZ[v].plus180Line,F=l.UZ[v].minus180Line),p)if("mesh"===e.type)E.push(e);else if("point"===e.type)E.push(b(e.clone(),y,I));else if("multipoint"===e.type){const t=e.clone();t.points=t.points.map((t=>b(t,y,I))),E.push(t)}else if("extent"===e.type){const t=e.clone()._normalize(!1,!1,p);E.push(t.rings?new o.Z(t):t)}else if(e.extent){const t=e.extent,n=(0,l.XZ)(t.xmin,I)*(2*y);let s=0===n?e.clone():(0,l.Sy)(e.clone(),n);t.offset(n,0),t.intersects(w)&&t.xmax!==y?(z=t.xmax>z?t.xmax:z,s=x(s,_),B.push(s),E.push("cut")):t.intersects(F)&&t.xmin!==I?(z=t.xmax*(2*y)>z?t.xmax*(2*y):z,s=x(s,_,360),B.push(s),E.push("cut")):E.push(s)}else E.push(e.clone());else E.push(e);else E.push(e);let N=(0,l.XZ)(z,y),R=-90;const T=N,Z=new a.Z;for(;N>0;){const t=360*N-180;Z.addPath([[t,R],[t,-1*R]]),R*=-1,N--}if(B.length>0&&T>0){const e=M(B,await async function(t,e,n,s){const i=(0,f.en)(t),r=e[0].spatialReference,o={...s,query:{...i.query,f:"json",sr:JSON.stringify(r),target:JSON.stringify({geometryType:(0,d.Ji)(e[0]),geometries:e}),cutter:JSON.stringify(n)}},a=await(0,c.default)(i.path+"/cut",o),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map((t=>{const e=(0,d.im)(t);return e.spatialReference=r,e}))}}(i,B,Z,n)),s=[],r=[];for(let n=0;n<E.length;n++){const i=E[n];if("cut"!==i)r.push(i);else{const i=e.shift(),o=t[n];null!=o&&"polygon"===o.type&&o.rings&&o.rings.length>1&&i.rings.length>=o.rings.length?(s.push(i),r.push("simplify")):r.push(_?(0,h.$)(i):i)}}if(!s.length)return r;const o=await m(i,s,n),a=[];for(let t=0;t<r.length;t++){const e=r[t];"simplify"!==e?a.push(e):a.push(_?(0,h.$)(o.shift()):o.shift())}return a}const q=[];for(let t=0;t<E.length;t++){const e=E[t];if("cut"!==e)q.push(e);else{const t=B.shift();q.push(!0===_?(0,h.$)(t):t)}}return q}},25266:(t,e,n)=>{n.d(e,{Sy:()=>l,UZ:()=>o,XZ:()=>a,x3:()=>u});var s=n(90819),i=n(14685),r=n(53736);const o={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new s.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.Z.WebMercator}),minus180Line:new s.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new s.Z({paths:[[[180,-180],[180,180]]],spatialReference:i.Z.WGS84}),minus180Line:new s.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:i.Z.WGS84})}};function a(t,e){return Math.ceil((t-e)/(2*e))}function l(t,e){const n=u(t);for(const t of n)for(const n of t)n[0]+=e;return t}function u(t){return(0,r.oU)(t)?t.rings:t.paths}},117:(t,e,n)=>{n.d(e,{H:()=>a});var s=n(39994),i=n(26488),r=n(24568);const o={minX:0,minY:0,maxX:0,maxY:0};class a{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new i.Q(9,(0,s.Z)("esri-csp-restrictions")?t=>({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const t=new Array(this._idByBounds.size);let e=0;this._idByBounds.forEach(((n,s)=>{t[e++]=s})),this._indexInvalid=!1,this._index.clear(),this._index.load(t)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter((t=>this._idByBounds.has(t)))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const t=(0,r.cS)();for(const e of this._boundsById.values())e&&(t[0]=Math.min(e[0],t[0]),t[1]=Math.min(e[1],t[1]),t[2]=Math.max(e[2],t[2]),t[3]=Math.max(e[3],t[3]));return t}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(t){const e=this._boundsById.get(t);this._boundsById.delete(t),e&&(this._idByBounds.delete(e),this._indexInvalid||this._index.remove(e))}forEachInBounds(t,e){this._loadIndex(),function(t,e,n){(function(t){o.minX=t[0],o.minY=t[1],o.maxX=t[2],o.maxY=t[3]})(e),t.search(o,n)}(this._index,t,(t=>e(this._idByBounds.get(t))))}get(t){return this._boundsById.get(t)}has(t){return this._boundsById.has(t)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(t,e){if(!this._indexInvalid){const e=this._boundsById.get(t);e&&(this._index.remove(e),this._idByBounds.delete(e))}this._boundsById.set(t,e),e&&(this._idByBounds.set(e,t),this._indexInvalid||(this._boundsToLoad.push(e),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},4811:(t,e,n)=>{n.d(e,{Z:()=>g});var s=n(70375),i=n(31355),r=n(13802),o=n(37116),a=n(24568),l=n(12065),u=n(117),h=n(33480),c=n(59958),d=n(15540);const f={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,e)=>new c.u_(e,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(t,e)=>(null==t.centroid&&(t.centroid=(0,h.Y)(new d.Z,t.geometry,e.hasZ,e.hasM)),t.centroid)};var p=n(34398);const m=(0,o.Ue)();class g{constructor(t){this.geometryInfo=t,this._boundsStore=new u.H,this._featuresById=new Map,this._markedIds=new Set,this.events=new i.Z,this.featureAdapter=f}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let t=0;return this._featuresById.forEach((e=>{null!=e.geometry&&e.geometry.coords&&(t+=e.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:t/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(t){if(null==this.fullBounds)return null;const[e,n,s,i]=this.fullBounds;return{xmin:e,ymin:n,xmax:s,ymax:i,spatialReference:(0,p.S2)(t)}}add(t){this._add(t),this._emitChanged()}addMany(t){for(const e of t)this._add(e);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(t){const e=this._featuresById.get(t);return e?(this._remove(e),this._emitChanged(),e):null}removeManyById(t){this._boundsStore.invalidateIndex();for(const e of t){const t=this._featuresById.get(e);t&&this._remove(t)}this._emitChanged()}forEachBounds(t,e){for(const n of t){const t=this._boundsStore.get(n.objectId);t&&e((0,o.JR)(m,t))}}getFeature(t){return this._featuresById.get(t)}has(t){return this._featuresById.has(t)}forEach(t){this._featuresById.forEach((e=>t(e)))}forEachInBounds(t,e){this._boundsStore.forEachInBounds(t,(t=>{e(this._featuresById.get(t))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let t=!1;this._featuresById.forEach(((e,n)=>{this._markedIds.has(n)||(t=!0,this._remove(e))})),this._markedIds.clear(),t&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(t){if(!t)return;const e=t.objectId;if(null==e)return void r.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new s.Z("featurestore:invalid-feature","feature id is missing",{feature:t}));const n=this._featuresById.get(e);let i;if(this._markedIds.add(e),n?(t.displayId=n.displayId,i=this._boundsStore.get(e),this._boundsStore.delete(e)):null!=this.onFeatureAdd&&this.onFeatureAdd(t),null==t.geometry||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(e,null),void this._featuresById.set(e,t);i=(0,l.$)(null!=i?i:(0,a.Ue)(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=i&&this._boundsStore.set(e,i),this._featuresById.set(e,t)}_remove(t){null!=this.onFeatureRemove&&this.onFeatureRemove(t);const e=t.objectId;return this._markedIds.delete(e),this._boundsStore.delete(e),this._featuresById.delete(e),t}}},57013:(t,e,n)=>{n.r(e),n.d(e,{default:()=>H}),n(91957);var s=n(66341),i=n(67979),r=n(70375),o=n(13802),a=n(33926),l=n(39154),u=n(92376),h=n(61107),c=n(35925),d=n(39536),f=n(59958),p=n(15540),m=n(4811),g=n(66069),_=n(24791),y=n(94978),x=n(17095);const b=/^\s*"([\S\s]*)"\s*$/,M=/""/g,S="\n",I=[","," ",";","|","\t"];function*v(t,e,n){let s=0;for(;s<=t.length;){const i=t.indexOf(e,s),r=t.substring(s,i>-1?i:void 0);s+=r.length+e.length,n&&!r.trim()||(yield r)}}function w(t){const e=t.includes("\r\n")?"\r\n":S;return v(t,e,!0)}function F(t,e){return v(t,e,!1)}function z(t,e,n){t=t.trim(),e=e?.trim();const s=[],i=Array.from(new Set([n?.delimiter,...I])).filter((t=>null!=t));for(const n of i){const i=N(t,n).length,r=N(e,n).length??i;i>1&&s.push({weight:Math.min(i,r),delimiter:n})}const r=s.sort((({weight:t},{weight:e})=>e-t)).map((({delimiter:t})=>t));for(const e of r){const s=T(E(t,e).names,n?.longitudeField,n?.latitudeField);if(s.longitudeFieldName&&s.latitudeFieldName)return{delimiter:e,locationInfo:s}}return{delimiter:r[0],locationInfo:null}}function*B(t,e,n,s=(()=>Object.create(null))){const i=w(t);i.next();let r="",o="",a=0,l=s(),u=0;t:for(const t of i){const i=F(t,n);for(const t of i)if(r+=o+t,o="",a+=R(t),a%2==0){if(a>0){const t=b.exec(r);if(!t){l=s(),u=0,r="",a=0;continue t}l[e[u]]=t[1].replaceAll(M,'"'),u++}else l[e[u]]=r,u++;r="",a=0}else o=n;0===a?(yield l,l=s(),u=0):o=S}}function E(t,e){const n=N(t,e).filter((t=>null!=t)),s=n.map((t=>(0,x.q6)(t)));for(let t=s.length-1;t>=0;t--)s[t]||(s.splice(t,1),n.splice(t,1));return{names:s,aliases:n}}function N(t,e){if(!t?.length)return[];const n=[];let s="",i="",r=0;const o=F(t,e);for(const t of o)if(s+=i+t,i="",r+=R(t),r%2==0){if(r>0){const t=b.exec(s);t&&n.push(t[1].replaceAll(M,'"'))}else n.push(s);s="",r=0}else i=e;return n}function R(t){let e=0,n=0;for(n=t.indexOf('"',n);n>=0;)e++,n=t.indexOf('"',n+1);return e}function T(t,e,n){e=(0,x.q6)(e)?.toLowerCase(),n=(0,x.q6)(n)?.toLowerCase();const s=t.map((t=>t.toLowerCase())),i=e?t[s.indexOf(e)]:null,r=n?t[s.indexOf(n)]:null;return{longitudeFieldName:i||t[s.indexOf(Y.find((t=>s.includes(t))))],latitudeFieldName:r||t[s.indexOf(L.find((t=>s.includes(t))))]}}function Z(t,e,n,s,i){const r=[],o=B(t,n,e),a=[];for(const t of o){if(10===a.length)break;a.push(t)}for(let t=0;t<n.length;t++){const e=n[t],o=s[t];if(e===i.longitudeFieldName||e===i.latitudeFieldName)r.push({name:e,type:"esriFieldTypeDouble",alias:o});else{let t,n;switch(q(a.map((t=>t[e])))){case"integer":t="esriFieldTypeInteger";break;case"double":t="esriFieldTypeDouble";break;case"date":t="esriFieldTypeDate",n=36;break;default:t="esriFieldTypeString",n=255}r.push({name:e,type:t,alias:o,length:n})}}return r}function q(t){if(!t.length)return"string";const e=/[^+-.,0-9]/;return t.map((t=>{let n=!1;if(""!==t){if(e.test(t))n=!0;else{let e=X(t);if(!isNaN(e))return/[.,]/.test(t)||!Number.isInteger(e)||e>214783647||e<-214783648?"double":"integer";if(t.includes("E")){if(e=Number(t),!isNaN(e))return"double";if(t.includes(",")){if(t=t.replace(",","."),e=Number(t),!isNaN(e))return"double";n=!0}else n=!0}else n=!0}return n?/^[-]?\d*[.,]?\d*$/.test(t)?"string":A(new Date(t),t)?"date":"string":"string"}})).reduce(((t,e)=>void 0===t?e:void 0===e?t:t===e?e:"string"===t||"string"===e?"string":"double"===t||"double"===e?"double":void 0))}function A(t,e){if(!t||"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))return!1;let n=!0;if(!O&&/\d+\W*$/.test(e)){const t=e.match(/[a-zA-Z]{2,}/);if(t){let e=!1,s=0;for(;!e&&s<=t.length;)e=!C.test(t[s]),s++;n=!e}}return n}const X=function(){const t=(0,y.lt)(),e=new RegExp("^"+t.regexp+"$"),n=new RegExp("["+t.group+"\\s\\xa0]","g"),s=t.factor;return i=>{const r=e.exec(i);if(t.factor=s,!r)return NaN;let o=r[1];if(!r[1]){if(!r[2])return NaN;o=r[2],t.factor*=-1}return o=o.replace(n,"").replace(t.decimal,"."),+o*t.factor}}(),C=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,O=Number.isNaN(new Date("technology 10").getTime()),L=["lat","latitude","latitude83","latdecdeg","lat_dd","y","ycenter","point_y"],Y=["lon","lng","long","longitude","longitude83","longdecdeg","long_dd","x","xcenter","point_x"];var k=n(40400),j=n(28790),D=n(14685);const P=(0,k.bU)("esriGeometryPoint"),U=["csv"],J=[0,0];class ${constructor(t,e){this.x=t,this.y=e}}class H{constructor(){this._queryEngine=null,this._snapshotFeatures=async t=>{const e=await this._fetch(t);return this._createFeatures(e)}}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(t,e={}){this._loadOptions=t;const[n]=await Promise.all([this._fetch(e.signal),this._checkProjection(t?.parsingOptions?.spatialReference)]),s=function(t,e){const n=e.parsingOptions||{},s={delimiter:n.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:n.latitudeField,longitudeFieldName:n.longitudeField}},i=s.layerDefinition={name:(0,l.vt)(e.url,U)||"csv",drawingInfo:P,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:n.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:n.spatialReference||{wkid:4326}}},o=w(t),a=o.next().value?.trim(),u=o.next().value?.trim();if(!a)throw new r.Z("csv-layer:empty-csv","CSV is empty",{csv:t});const{delimiter:h,locationInfo:c}=z(a,u,n);if(!h)throw new r.Z("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV",{firstLine:a,secondLine:u,parsingOptions:n});if(!c)throw new r.Z("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file",{firstLine:a,secondLine:u,parsingOptions:n});s.locationInfo=c,s.delimiter=h;const{names:d,aliases:f}=E(a,h),p=Z(t,s.delimiter,d,f,s.locationInfo);if(n.fields?.length){const t=new j.Z(n.fields);for(const e of p){const n=t.get(e.name);n&&Object.assign(e,n)}}if(!p.some((t=>"esriFieldTypeOID"===t.type&&(i.objectIdField=t.name,!0)))){const t={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1};i.objectIdField=t.name,p.unshift(t)}i.fields=p;const m=new j.Z(i.fields);if(s.locationInfo&&(s.locationInfo.latitudeFieldName=m.get(s.locationInfo.latitudeFieldName).name,s.locationInfo.longitudeFieldName=m.get(s.locationInfo.longitudeFieldName).name),i.timeInfo){const t=i.timeInfo;if(t.startTimeField){const e=m.get(t.startTimeField);e?(t.startTimeField=e.name,e.type="esriFieldTypeDate"):t.startTimeField=null}if(t.endTimeField){const e=m.get(t.endTimeField);e?(t.endTimeField=e.name,e.type="esriFieldTypeDate"):t.endTimeField=null}if(t.trackIdField){const e=m.get(t.trackIdField);t.trackIdField=e?e.name:null}t.startTimeField||t.endTimeField||(i.timeInfo=null)}return s}(n,t);this._locationInfo=s.locationInfo,this._delimiter=s.delimiter,this._queryEngine=this._createQueryEngine(s);const i=await this._createFeatures(n);this._queryEngine.featureStore.addMany(i);const{fullExtent:o,timeExtent:a}=await this._queryEngine.fetchRecomputedExtents();if(s.layerDefinition.extent=o,a){const{start:t,end:e}=a;s.layerDefinition.timeInfo.timeExtent=[t,e]}return s}async applyEdits(){throw new r.Z("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer")}async queryFeatures(t={},e={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(t,e.signal)}async queryFeatureCount(t={},e={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(t,e.signal)}async queryObjectIds(t={},e={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(t,e.signal)}async queryExtent(t={},e={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(t,e.signal)}async querySnapping(t,e={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(t,e.signal)}async refresh(t){this._loadOptions.customParameters=t,this._snapshotTask?.abort(),this._snapshotTask=(0,i.vr)(this._snapshotFeatures),this._snapshotTask.promise.then((t=>{this._queryEngine.featureStore.clear(),t&&this._queryEngine.featureStore.addMany(t)}),(t=>{this._queryEngine.featureStore.clear(),(0,a.D_)(t)||o.Z.getLogger("esri.layers.CSVLayer").error(new r.Z("csv-layer:refresh","An error occurred during refresh",{error:t}))})),await this._waitSnapshotComplete();const{fullExtent:e,timeExtent:n}=await this._queryEngine.fetchRecomputedExtents();return{extent:e,timeExtent:n}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _fetch(t){const{url:e,customParameters:n}=this._loadOptions;if(!e)throw new r.Z("csv-layer:invalid-source","url not defined");const i=(0,l.mN)(e);return(await(0,s.default)(i.path,{query:{...i.query,...n},responseType:"text",signal:t})).data}_createQueryEngine(t){const{objectIdField:e,fields:n,extent:s,timeInfo:i}=t.layerDefinition,r=new m.Z({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new _.q({fields:n,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:i,objectIdField:e,spatialReference:s.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:r})}async _createFeatures(t){const{latitudeFieldName:e,longitudeFieldName:n}=this._locationInfo,{objectIdField:s,fieldsIndex:i,spatialReference:r}=this._queryEngine;let o=[];const a=[],l=i.fields.filter((t=>t.name!==s)).map((t=>t.name));let m=0;const g={};for(const t of i.fields)if("esriFieldTypeOID"!==t.type&&"esriFieldTypeGlobalID"!==t.type){const e=(0,x.os)(t);void 0!==e&&(g[t.name]=e)}const _=B(t,l,this._delimiter,(0,k.Dm)(g,s));for(const t of _){const r=this._parseCoordinateValue(t[e]),l=this._parseCoordinateValue(t[n]);if(null!=l&&null!=r&&!isNaN(r)&&!isNaN(l)){t[e]=r,t[n]=l;for(const s in t)if(s!==e&&s!==n)if(i.isDateField(s)){const e=new Date(t[s]);t[s]=A(e,t[s])?e.getTime():null}else if(i.isNumericField(s)){const e=X(t[s]);isNaN(e)?t[s]=null:t[s]=e}t[s]=m,m++,o.push(new $(l,r)),a.push(t)}}if(!(0,c.fS)({wkid:4326},r))if((0,c.sS)(r))for(const t of o)[t.x,t.y]=(0,d.hG)(t.x,t.y,J);else o=(0,u.projectMany)(h.N,o,D.Z.WGS84,r,null,null);const y=[];for(let t=0;t<o.length;t++){const{x:e,y:n}=o[t],i=a[t];i[s]=t+1,y.push(new f.u_(new p.Z([],[e,n]),i,null,i[s]))}return y}_parseCoordinateValue(t){if(null==t||""===t)return null;let e=X(t);return(isNaN(e)||Math.abs(e)>181)&&(e=parseFloat(t)),e}async _checkProjection(t){try{await(0,g._W)(c.Zn,t)}catch{throw new r.Z("csv-layer:projection-not-supported","Projection not supported")}}}},40400:(t,e,n)=>{n.d(e,{Dm:()=>h,Hq:()=>c,MS:()=>d,bU:()=>a});var s=n(39994),i=n(67134),r=n(10287),o=n(86094);function a(t){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===t||"esriGeometryMultipoint"===t?o.I4:"esriGeometryPolyline"===t?o.ET:o.lF}}}const l=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let u=1;function h(t,e){if((0,s.Z)("esri-csp-restrictions"))return()=>({[e]:null,...t});try{let n=`this.${e} = null;`;for(const e in t)n+=`this${l.test(e)?`.${e}`:`["${e}"]`} = ${JSON.stringify(t[e])};`;const s=new Function(`\n      return class AttributesClass$${u++} {\n        constructor() {\n          ${n};\n        }\n      }\n    `)();return()=>new s}catch(n){return()=>({[e]:null,...t})}}function c(t={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,i.d9)(t)}}]}function d(t,e){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:e,supportsDelete:e,supportsEditing:e,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:e,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:r.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:e,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1}}}},84238:(t,e,n)=>{n.d(e,{cv:()=>a,en:()=>o,lA:()=>r}),n(51366),n(88256);var s=n(67134),i=n(39154);function r(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function o(t){return"string"==typeof t?(0,i.mN)(t):(0,s.d9)(t)}function a(t,e,n){const s={};for(const i in t){if("declaredClass"===i)continue;const r=t[i];if(null!=r&&"function"!=typeof r)if(Array.isArray(r)){s[i]=[];for(let t=0;t<r.length;t++)s[i][t]=a(r[t])}else if("object"==typeof r)if(r.toJSON){const t=r.toJSON(n&&n[i]);s[i]=e?t:JSON.stringify(t)}else s[i]=e?r:JSON.stringify(r);else s[i]=r}return s}n(99522)},86094:(t,e,n)=>{n.d(e,{ET:()=>r,I4:()=>i,eG:()=>l,lF:()=>o,lj:()=>h,qP:()=>a,wW:()=>u});const s=[252,146,31,255],i={type:"esriSMS",style:"esriSMSCircle",size:6,color:s,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},r={type:"esriSLS",style:"esriSLSSolid",width:.75,color:s},o={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},a={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},l={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},u={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},h={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);