"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_arcgis_core_assets_js-node_modules_arcgis_core_layers_mixins_APIKeyMixin-7d1b3a"],{

/***/ "./node_modules/@arcgis/core/assets.js":
/*!*********************************************!*\
  !*** ./node_modules/@arcgis/core/assets.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "fetchAsset": () => (/* binding */ n),
/* harmony export */   "getAssetUrl": () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config.js */ "./node_modules/@arcgis/core/config.js");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const i=_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger("esri.assets");function n(s,o){return (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(a(s),o)}function a(t){if(!_config_js__WEBPACK_IMPORTED_MODULE_0__["default"].assetsPath)throw i.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("assets:path-not-set","config.assetsPath is not set");return (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.join)(_config_js__WEBPACK_IMPORTED_MODULE_0__["default"].assetsPath,t)}


/***/ }),

/***/ "./node_modules/@arcgis/core/core/accessorSupport/originUtils.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/accessorSupport/originUtils.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "updateOrigins": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _multiOriginJSONSupportUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../multiOriginJSONSupportUtils.js */ "./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function i(i){i&&i.writtenProperties&&i.writtenProperties.forEach((({target:i,propName:t,newOrigin:e})=>{(0,_multiOriginJSONSupportUtils_js__WEBPACK_IMPORTED_MODULE_0__.isMultiOriginJSONMixin)(i)&&e&&i.originOf(t)!==e&&i.updateOrigin(t,e)}))}


/***/ }),

/***/ "./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isMultiOriginJSONMixin": () => (/* binding */ i)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function i(i){return i&&"getAtOrigin"in i&&"originOf"in i}


/***/ }),

/***/ "./node_modules/@arcgis/core/core/uuid.js":
/*!************************************************!*\
  !*** ./node_modules/@arcgis/core/core/uuid.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "generateBracedUUID": () => (/* binding */ r),
/* harmony export */   "generateUUID": () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const t="randomUUID"in crypto;function n(){if(t)return crypto.randomUUID();const n=crypto.getRandomValues(new Uint16Array(8));n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;const r=t=>n[t].toString(16).padStart(4,"0");return r(0)+r(1)+"-"+r(2)+"-"+r(3)+"-"+r(4)+"-"+r(5)+r(6)+r(7)}function r(){return`{${n()}}`}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/mixins/APIKeyMixin.js":
/*!****************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/mixins/APIKeyMixin.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "APIKeyMixin": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function t(r){return"portalItem"in r}const i=i=>{let o=class extends i{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):t(this)?this.portalItem?.apiKey:null}set apiKey(r){null!=r?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.property)({type:String})],o.prototype,"apiKey",null),o=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.subclass)("esri.layers.mixins.APIKeyMixin")],o),o};


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/mixins/SceneService.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/mixins/SceneService.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SCENE_SERVICE_ITEM_TYPE": () => (/* binding */ T),
/* harmony export */   "SaveOperationType": () => (/* binding */ K),
/* harmony export */   "SceneService": () => (/* binding */ N)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/reader.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/writer.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js");
/* harmony import */ var _core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../core/accessorSupport/originUtils.js */ "./node_modules/@arcgis/core/core/accessorSupport/originUtils.js");
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../geometry/Extent.js */ "./node_modules/@arcgis/core/geometry/Extent.js");
/* harmony import */ var _geometry_HeightModelInfo_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../geometry/HeightModelInfo.js */ "./node_modules/@arcgis/core/geometry/HeightModelInfo.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/* harmony import */ var _support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../support/arcgisLayerUrl.js */ "./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js");
/* harmony import */ var _support_commonProperties_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../support/commonProperties.js */ "./node_modules/@arcgis/core/layers/support/commonProperties.js");
/* harmony import */ var _support_I3SIndexInfo_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../support/I3SIndexInfo.js */ "./node_modules/@arcgis/core/layers/support/I3SIndexInfo.js");
/* harmony import */ var _support_schemaValidatorLoader_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../support/schemaValidatorLoader.js */ "./node_modules/@arcgis/core/layers/support/schemaValidatorLoader.js");
/* harmony import */ var _portal_Portal_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../portal/Portal.js */ "./node_modules/@arcgis/core/portal/Portal.js");
/* harmony import */ var _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../portal/PortalItem.js */ "./node_modules/@arcgis/core/portal/PortalItem.js");
/* harmony import */ var _webdoc_support_saveUtils_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../webdoc/support/saveUtils.js */ "./node_modules/@arcgis/core/webdoc/support/saveUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const R="esri.layers.mixins.SceneService",A=_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(R),N=o=>{let N=class extends o{constructor(){super(...arguments),this.spatialReference=null,this.fullExtent=null,this.heightModelInfo=null,this.minScale=0,this.maxScale=0,this.version={major:Number.NaN,minor:Number.NaN,versionString:""},this.copyright=null,this.sublayerTitleMode="item-title",this.title=null,this.layerId=null,this.indexInfo=null,this._debouncedSaveOperations=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.debounce)((async(e,t,r)=>{switch(e){case K.SAVE:return this._save(t);case K.SAVE_AS:return this._saveAs(r,t)}}))}readSpatialReference(e,t){return this._readSpatialReference(t)}_readSpatialReference(e){if(null!=e.spatialReference)return _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_16__["default"].fromJSON(e.spatialReference);{const t=e.store,r=t.indexCRS||t.geographicCRS,o=r&&parseInt(r.substring(r.lastIndexOf("/")+1,r.length),10);return null!=o?new _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_16__["default"](o):null}}readFullExtent(e,t,r){if(null!=e&&"object"==typeof e){const o=null==e.spatialReference?{...e,spatialReference:this._readSpatialReference(t)}:e;return _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_14__["default"].fromJSON(o,r)}const o=t.store,i=this._readSpatialReference(t);return null==i||null==o||null==o.extent||!Array.isArray(o.extent)||o.extent.some((e=>e<E))?null:new _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_14__["default"]({xmin:o.extent[0],ymin:o.extent[1],xmax:o.extent[2],ymax:o.extent[3],spatialReference:i})}parseVersionString(e){const t={major:Number.NaN,minor:Number.NaN,versionString:e},r=e.split(".");return r.length>=2&&(t.major=parseInt(r[0],10),t.minor=parseInt(r[1],10)),t}readVersion(e,t){const r=t.store,o=null!=r.version?r.version.toString():"";return this.parseVersionString(o)}readTitlePortalItem(e){return"item-title"!==this.sublayerTitleMode?void 0:e}readTitleService(e,t){const r=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return (0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_17__.titleFromUrlAndName)(this.url,t.name);let o=t.name;if(!o&&this.url){const e=(0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_17__.parse)(this.url);null!=e&&(o=e.title)}return"item-title-and-service-name"===this.sublayerTitleMode&&r&&(o=r+" - "+o),(0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_17__.cleanTitle)(o)}set url(e){const t=(0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_17__.sanitizeUrlWithLayerId)({layer:this,url:e,nonStandardUrlAllowed:!1,logger:A});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}writeUrl(e,t,r,o){(0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_17__.writeUrlWithLayerId)(this,e,"layers",t,o)}get parsedUrl(){const e=this._get("url"),t=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__.urlToObject)(e);return null!=this.layerId&&(t.path=`${t.path}/layers/${this.layerId}`),t}async _fetchIndexAndUpdateExtent(e,t){this.indexInfo=(0,_support_I3SIndexInfo_js__WEBPACK_IMPORTED_MODULE_19__.fetchIndexInfo)(this.parsedUrl.path,this.rootNode,e,this.apiKey,A,t),null==this.fullExtent||this.fullExtent.hasZ||this._updateExtent(await this.indexInfo)}_updateExtent(e){if("page"===e?.type){const t=e.rootIndex%e.pageSize,o=e.rootPage?.nodes?.[t];if(null==o||null==o.obb||null==o.obb.center||null==o.obb.halfSize)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("sceneservice:invalid-node-page","Invalid node page.");if(o.obb.center[0]<E||null==this.fullExtent||this.fullExtent.hasZ)return;const i=o.obb.halfSize,s=o.obb.center[2],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);this.fullExtent.zmin=s-a,this.fullExtent.zmax=s+a}else if("node"===e?.type){const t=e.rootNode?.mbs;if(!Array.isArray(t)||4!==t.length||t[0]<E)return;const r=t[2],o=t[3],{fullExtent:i}=this;i&&(i.zmin=r-o,i.zmax=r+o)}}async _fetchService(e){if(null==this.url)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("sceneservice:url-not-set","Scene service can not be loaded without valid portal item or url");if(null==this.layerId&&/SceneServer\/*$/i.test(this.url)){const t=await this._fetchFirstLayerId(e);null!=t&&(this.layerId=t)}return this._fetchServiceLayer(e)}async _fetchFirstLayerId(e){const r=await (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(this.url,{query:{f:"json",token:this.apiKey},responseType:"json",signal:e});if(r.data&&Array.isArray(r.data.layers)&&r.data.layers.length>0)return r.data.layers[0].id}async _fetchServiceLayer(e){const r=await (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(this.parsedUrl?.path??"",{query:{f:"json",token:this.apiKey},responseType:"json",signal:e});r.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));let o=!1;if(r.data.layerType&&"Voxel"===r.data.layerType&&(o=!0),o)return this._fetchVoxelServiceLayer();const i=r.data;this.read(i,this._getServiceContext()),this.validateLayer(i)}async _fetchVoxelServiceLayer(e){const r=(await (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(this.parsedUrl?.path+"/layer",{query:{f:"json",token:this.apiKey},responseType:"json",signal:e})).data;this.read(r,this._getServiceContext()),this.validateLayer(r)}_getServiceContext(){return{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl}}async _ensureLoadBeforeSave(){await this.load(),"beforeSave"in this&&"function"==typeof this.beforeSave&&await this.beforeSave()}validateLayer(e){}_updateTypeKeywords(e,t,r){e.typeKeywords||(e.typeKeywords=[]);const o=t.getTypeKeywords();for(const i of o)e.typeKeywords.push(i);e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)),r===U.newItem&&(e.typeKeywords=e.typeKeywords.filter((e=>"Hosted Service"!==e))))}async _saveAs(e,t){const o={...O,...t};let i=_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_22__["default"].from(e);i||(A.error("_saveAs(): requires a portal item parameter"),await Promise.reject(new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("sceneservice:portal-item-required","_saveAs() requires a portal item to save to"))),i.id&&(i=i.clone(),i.id=null);const s=i.portal||_portal_Portal_js__WEBPACK_IMPORTED_MODULE_21__["default"].getDefault();await this._ensureLoadBeforeSave(),i.type=T,i.portal=s;const a={origin:"portal-item",url:null,messages:[],portal:s,portalItem:i,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},n={layers:[this.write({},a)]};return await Promise.all(a.resources.pendingOperations??[]),await this._validateAgainstJSONSchema(n,a,o),i.url=this.url,i.title||(i.title=this.title),this._updateTypeKeywords(i,o,U.newItem),await s.signIn(),await(s.user?.addItem({item:i,folder:o&&o.folder,data:n})),await (0,_webdoc_support_saveUtils_js__WEBPACK_IMPORTED_MODULE_23__.saveResources)(this.resourceReferences,a,null),this.portalItem=i,(0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_13__.updateOrigins)(a),a.portalItem=i,i}async _save(e){const t={...O,...e};if(!this.portalItem)throw A.error("_save(): requires the .portalItem property to be set"),new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("sceneservice:portal-item-not-set","Portal item to save to has not been set on this SceneService");if(this.portalItem.type!==T)throw A.error("_save(): Non-matching portal item type. Got "+this.portalItem.type+", expected "+T),new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("sceneservice:portal-item-wrong-type",`Portal item needs to have type "${T}"`);await this._ensureLoadBeforeSave();const o={origin:"portal-item",url:this.portalItem.itemUrl&&(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__.urlToObject)(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||_portal_Portal_js__WEBPACK_IMPORTED_MODULE_21__["default"].getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},i={layers:[this.write({},o)]};return await Promise.all(o.resources.pendingOperations??[]),await this._validateAgainstJSONSchema(i,o,t),this.portalItem.url=this.url,this.portalItem.title||(this.portalItem.title=this.title),this._updateTypeKeywords(this.portalItem,t,U.existingItem),await this.portalItem.update({data:i}),await (0,_webdoc_support_saveUtils_js__WEBPACK_IMPORTED_MODULE_23__.saveResources)(this.resourceReferences,o,null),(0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_13__.updateOrigins)(o),this.portalItem}async _validateAgainstJSONSchema(e,t,o){let i=t.messages?.filter((e=>"error"===e.type)).map((e=>new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"](e.name,e.message,e.details)))??[];o?.validationOptions?.ignoreUnsupported&&(i=i.filter((e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name&&"scenemodification:unsupported"!==e.name)));const s=o?.validationOptions,a=s?.enabled,n=(0,_support_schemaValidatorLoader_js__WEBPACK_IMPORTED_MODULE_20__.getLoader)();if(a&&n){const t=(await n()).validate(e,o.portalItemLayerType);if(t.length>0){const e=`Layer item did not validate:\n${t.join("\n")}`;if(A.error(`_validateAgainstJSONSchema(): ${e}`),"throw"===s.failPolicy){const e=t.map((e=>new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("sceneservice:schema-validation",e))).concat(i);throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("sceneservice-validate:error","Failed to save layer item due to schema validation, see `details.errors`.",{combined:e})}}}if(i.length>0)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("sceneservice:save","Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:i})}};return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)(_support_commonProperties_js__WEBPACK_IMPORTED_MODULE_18__.id)],N.prototype,"id",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({type:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_16__["default"]})],N.prototype,"spatialReference",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_10__.reader)("spatialReference",["spatialReference","store.indexCRS","store.geographicCRS"])],N.prototype,"readSpatialReference",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({type:_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_14__["default"]})],N.prototype,"fullExtent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_10__.reader)("fullExtent",["fullExtent","store.extent","spatialReference","store.indexCRS","store.geographicCRS"])],N.prototype,"readFullExtent",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({readOnly:!0,type:_geometry_HeightModelInfo_js__WEBPACK_IMPORTED_MODULE_15__["default"]})],N.prototype,"heightModelInfo",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:{source:"minScale"},write:!1}}}})],N.prototype,"minScale",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:{source:"maxScale"},write:!1}}}})],N.prototype,"maxScale",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({readOnly:!0})],N.prototype,"version",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_10__.reader)("version",["store.version"])],N.prototype,"readVersion",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({type:String,json:{read:{source:"copyrightText"}}})],N.prototype,"copyright",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({type:String,json:{read:!1}})],N.prototype,"sublayerTitleMode",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({type:String})],N.prototype,"title",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_10__.reader)("portal-item","title")],N.prototype,"readTitlePortalItem",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_10__.reader)("service","title",["name"])],N.prototype,"readTitleService",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{write:{target:"id",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],N.prototype,"layerId",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)(_support_commonProperties_js__WEBPACK_IMPORTED_MODULE_18__.url)],N.prototype,"url",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_12__.writer)("url")],N.prototype,"writeUrl",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],N.prototype,"parsedUrl",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({readOnly:!0})],N.prototype,"store",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({type:String,readOnly:!0,json:{read:{source:"store.rootNode"}}})],N.prototype,"rootNode",void 0),N=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_11__.subclass)(R)],N),N},E=-1e38;var U;!function(e){e[e.existingItem=0]="existingItem",e[e.newItem=1]="newItem"}(U||(U={}));const T="Scene Service",O={getTypeKeywords:()=>[],portalItemLayerType:"unknown",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:"throw"}};var K;!function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"}(K||(K={}));


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/I3SIndexInfo.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/I3SIndexInfo.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "fetchIndexInfo": () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
async function r(r,n,t,s,a,i){let l=null;if(null!=t){const o=`${r}/nodepages/`,n=o+Math.floor(t.rootIndex/t.nodesPerPage);try{return{type:"page",rootPage:(await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(n,{query:{f:"json",token:s},responseType:"json",signal:i})).data,rootIndex:t.rootIndex,pageSize:t.nodesPerPage,lodMetric:t.lodSelectionMetricType,urlPrefix:o}}catch(c){null!=a&&a.warn("#fetchIndexInfo()","Failed to load root node page. Falling back to node documents.",n,c),l=c}}if(!n)return null;const d=`${r}/nodes/`,p=d+(n&&n.split("/").pop());try{return{type:"node",rootNode:(await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(p,{query:{f:"json",token:s},responseType:"json",signal:i})).data,urlPrefix:d}}catch(c){throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("sceneservice:root-node-missing","Root node missing.",{pageError:l,nodeError:c,url:p})}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/schemaValidatorLoader.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/schemaValidatorLoader.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getLoader": () => (/* binding */ u),
/* harmony export */   "registerLoader": () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
let n=null;function t(t){n=t}function u(){return n}


/***/ }),

/***/ "./node_modules/@arcgis/core/portal/support/resourceUtils.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/portal/support/resourceUtils.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "addOrUpdateResource": () => (/* binding */ o),
/* harmony export */   "contentToBlob": () => (/* binding */ p),
/* harmony export */   "fetchResources": () => (/* binding */ s),
/* harmony export */   "getSiblingOfSameType": () => (/* binding */ d),
/* harmony export */   "getSiblingOfSameTypeI": () => (/* binding */ m),
/* harmony export */   "removeAllResources": () => (/* binding */ u),
/* harmony export */   "removeResource": () => (/* binding */ n),
/* harmony export */   "splitPrefixFileNameAndExtension": () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
async function s(e,t={},a){await e.load(a);const s=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.join)(e.itemUrl,"resources"),{start:o=1,num:n=10,sortOrder:u="asc",sortField:l="created"}=t,c={query:{start:o,num:n,sortOrder:u,sortField:l,token:e.apiKey},signal:a?.signal},i=await e.portal.request(s,c);return{total:i.total,nextStart:i.nextStart,resources:i.resources.map((({created:t,size:r,resource:a})=>({created:new Date(t),size:r,resource:e.resourceFromPath(a)})))}}async function o(e,a,s,o){if(!e.hasPath())throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](`portal-item-resource-${a}:invalid-path`,"Resource does not have a valid path");const n=e.portalItem;await n.load(o);const u=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.join)(n.userItemUrl,"add"===a?"addResources":"updateResources"),[c,i]=l(e.path),d=await p(s),m=new FormData;return c&&"."!==c&&m.append("resourcesPrefix",c),null!=o&&o.compress&&m.append("compress","true"),m.append("fileName",i),m.append("file",d,i),m.append("f","json"),null!=o&&o.access&&m.append("access",o.access),await n.portal.request(u,{method:"post",body:m,signal:o?.signal}),e}async function n(e,a,s){if(!a.hasPath())throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await e.load(s);const o=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.join)(e.userItemUrl,"removeResources");await e.portal.request(o,{method:"post",query:{resource:a.path},signal:s?.signal}),a.portalItem=null}async function u(e,t){await e.load(t);const a=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.join)(e.userItemUrl,"removeResources");return e.portal.request(a,{method:"post",query:{deleteAll:!0},signal:t?.signal})}function l(e){const t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function c(e){const[t,r]=i(e),[a,s]=l(t);return[a,s,r]}function i(e){const t=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.getPathExtension)(e);return null==t?[e,""]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function p(t){if(t instanceof Blob)return t;return(await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(t.url,{responseType:"blob"})).data}function d(e,t){if(!e.hasPath())return null;const[a,,s]=c(e.path);return e.portalItem.resourceFromPath((0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.join)(a,t+s))}function m(e,t){if(!e.hasPath())return null;const[a,,s]=c(e.path);return e.portalItem.resourceFromPath((0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.join)(a,t+s))}


/***/ }),

/***/ "./node_modules/@arcgis/core/webdoc/support/saveUtils.js":
/*!***************************************************************!*\
  !*** ./node_modules/@arcgis/core/webdoc/support/saveUtils.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "saveResources": () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/asyncUtils.js */ "./node_modules/@arcgis/core/core/asyncUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/uuid.js */ "./node_modules/@arcgis/core/core/uuid.js");
/* harmony import */ var _portal_support_resourceUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../portal/support/resourceUtils.js */ "./node_modules/@arcgis/core/portal/support/resourceUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
async function p(r,p,u){if(!p||!p.resources)return;const h=p.portalItem===r.portalItem?new Set(r.paths):new Set;r.paths.length=0,r.portalItem=p.portalItem;const i=new Set(p.resources.toKeep.map((r=>r.resource.path))),m=new Set,f=[];i.forEach((e=>{h.delete(e),r.paths.push(e)}));for(const e of p.resources.toUpdate)if(h.delete(e.resource.path),i.has(e.resource.path)||m.has(e.resource.path)){const{resource:o,content:t,finish:p,error:n}=e,h=(0,_portal_support_resourceUtils_js__WEBPACK_IMPORTED_MODULE_4__.getSiblingOfSameTypeI)(o,(0,_core_uuid_js__WEBPACK_IMPORTED_MODULE_3__.generateUUID)());r.paths.push(h.path),f.push(a({resource:h,content:t,compress:e.compress,finish:p,error:n},u))}else r.paths.push(e.resource.path),f.push(n(e,u)),m.add(e.resource.path);for(const e of p.resources.toAdd)f.push(a(e,u)),r.paths.push(e.resource.path);if(h.forEach((r=>{if(p.portalItem){const e=p.portalItem.resourceFromPath(r);f.push(e.portalItem.removeResource(e).catch((()=>{})))}})),0===f.length)return;const l=await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.eachAlways)(f);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.throwIfAborted)(u);const d=l.filter((r=>"error"in r)).map((r=>r.error));if(d.length>0)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("save:resources","Failed to save one or more resources",{errors:d})}async function a(e,o){const t={...null!=o?o:{},compress:e.compress},s=await (0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.result)(e.resource.portalItem.addResource(e.resource,e.content,t));if(!0!==s.ok)throw e.error?.(s.error),s.error;e.finish?.(e.resource)}async function n(e,o){const t=await (0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.result)(e.resource.update(e.content,o));if(!0!==t.ok)throw e.error?.(t.error),t.error;e.finish?.(e.resource)}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvNDQxZDRiOTE1Mzg4Yjc4MWJiNzI4MTNjOTYwZjVlNjguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ2dLLFFBQVEsaUVBQVcsZ0JBQWdCLGdCQUFnQixPQUFPLHVEQUFDLFNBQVMsY0FBYyxJQUFJLDZEQUFZLHFJQUFxSSxzREFBQyx1REFBdUQsT0FBTyx1REFBQyxDQUFDLDZEQUFZLElBQTZDOzs7Ozs7Ozs7Ozs7Ozs7O0FDSmpnQjtBQUNBO0FBQ0E7QUFDQTtBQUMyRSxjQUFjLHVEQUF1RCxnQ0FBZ0MsSUFBSSx1RkFBQywrQ0FBK0MsR0FBOEI7Ozs7Ozs7Ozs7Ozs7OztBQ0psUTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNENBQWdGOzs7Ozs7Ozs7Ozs7Ozs7O0FDSjlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGFBQWEsZ0NBQWdDLG1EQUFtRCwyQ0FBMkMsNkNBQTZDLCtEQUErRCxhQUFhLFFBQVEsRUFBRSxLQUFLLEVBQW9EOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKclc7QUFDQTtBQUNBO0FBQ0E7QUFDb1QsY0FBYyx1QkFBdUIsWUFBWSxzQkFBc0IsYUFBYSw2RkFBNkYsY0FBYyxpR0FBaUcsT0FBTyx1REFBQyxFQUFFLHNGQUFDLEVBQUUsWUFBWSxnQ0FBZ0MsdURBQUMsRUFBRSxzRkFBQywwQ0FBbUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSnB0QjtBQUNBO0FBQ0E7QUFDQTtBQUMyMEMsNENBQTRDLGlFQUFXLFVBQVUsc0JBQXNCLGNBQWMsNElBQTRJLG1EQUFtRCw2SUFBNkksK0RBQUMsaUJBQWlCLFVBQVUsaUNBQWlDLHlDQUF5QyxHQUFHLDBCQUEwQixxQ0FBcUMseUJBQXlCLG1DQUFtQywrRUFBVSxzQkFBc0IsMkdBQTJHLG1CQUFtQixzRUFBQyxVQUFVLHNCQUFzQixnQ0FBZ0Msa0NBQWtDLG9EQUFvRCxHQUFH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MERBQTBELEtBQUssMEJBQTBCLDBCQUEwQixzREFBQyx5QkFBeUIsRUFBRSxzREFBc0QscUJBQXFCLGdCQUFnQixRQUFRLHVEQUFDLHVHQUF1Ryw0T0FBNE8sc0NBQXNDLElBQUksd0JBQXdCLDBCQUEwQixzREFBQyxvRkFBb0YsZ0JBQWdCLFFBQVEsdURBQUMsa0NBQWtDLDBCQUEwQixxQkFBcUIsZ0JBQWdCLGtCQUFrQixvQkFBb0Isc0JBQXNCLGdCQUFnQixRQUFRLHVEQUFDLGtDQUFrQywyQkFBMkIscUJBQXFCLGFBQWEsa0JBQWtCLEVBQUUsY0FBYywyQkFBMkIsaURBQWlELGNBQWMsMkJBQTJCLGNBQWMsY0FBYyxRQUFRLG1FQUFDLElBQUksMERBQTBELEVBQUUsR0FBRyxvQkFBb0IsOEJBQThCLGFBQWEsdURBQUMsUUFBUSxvQkFBb0IsUUFBUSxnQkFBZ0IsNEJBQTRCLHNCQUFzQixxQ0FBcUMsdURBQUMsU0FBUyxnQkFBZ0IsNEJBQTRCLHNCQUFzQixxQ0FBcUMsdURBQUMsU0FBdU47Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSm55RTtBQUNBO0FBQ0E7QUFDQTtBQUNpUyx3QkFBd0IsMkJBQTJCLDZEQUE2RCwyQ0FBMkMsNkVBQTZFLGVBQWUsNEJBQTRCLEdBQUcsaUhBQWlILE1BQU0sc0NBQXNDLEtBQUssdUZBQUMsR0FBRywyREFBQyxJQUFJLCtCQUErQiwwREFBMEQsS0FBSyx5RUFBeUUsOEVBQThFLGtCQUFrQixpQkFBaUIseUNBQXlDLG1EQUFtRCxLQUFLLHVCQUF1QixjQUFjLGlFQUFDLElBQUkscUVBQUMsSUFBSSxxREFBcUQsd0JBQXdCLHNEQUFDLDBEQUEwRCxTQUFTLEVBQUUsc0JBQXNCLFNBQVMsZUFBZSxxQkFBcUIsU0FBUywyREFBQyw0REFBNEQsOENBQThDLHVCQUF1QixzQkFBc0IsY0FBYywyREFBQyxpQ0FBaUMsOENBQThDLHVCQUFrRCIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2Fzc2V0cy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9jb3JlL2FjY2Vzc29yU3VwcG9ydC9vcmlnaW5VdGlscy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9jb3JlL211bHRpT3JpZ2luSlNPTlN1cHBvcnRVdGlscy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9jb3JlL3V1aWQuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL21peGlucy9BUElLZXlNaXhpbi5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvbWl4aW5zL1NjZW5lU2VydmljZS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvc3VwcG9ydC9JM1NJbmRleEluZm8uanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL3N1cHBvcnQvc2NoZW1hVmFsaWRhdG9yTG9hZGVyLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3BvcnRhbC9zdXBwb3J0L3Jlc291cmNlVXRpbHMuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvd2ViZG9jL3N1cHBvcnQvc2F2ZVV0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgcyBmcm9tXCIuL2NvbmZpZy5qc1wiO2ltcG9ydCB0IGZyb21cIi4vcmVxdWVzdC5qc1wiO2ltcG9ydCBvIGZyb21cIi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydCByIGZyb21cIi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7am9pbiBhcyBlfWZyb21cIi4vY29yZS91cmxVdGlscy5qc1wiO2NvbnN0IGk9ci5nZXRMb2dnZXIoXCJlc3JpLmFzc2V0c1wiKTtmdW5jdGlvbiBuKHMsbyl7cmV0dXJuIHQoYShzKSxvKX1mdW5jdGlvbiBhKHQpe2lmKCFzLmFzc2V0c1BhdGgpdGhyb3cgaS5lcnJvck9uY2UoXCJUaGUgQVBJIGFzc2V0cyBsb2NhdGlvbiBuZWVkcyB0byBiZSBzZXQgdXNpbmcgY29uZmlnLmFzc2V0c1BhdGguIE1vcmUgaW5mb3JtYXRpb246IGh0dHBzOi8vYXJjZy5pcy8xT3pMZTUwXCIpLG5ldyBvKFwiYXNzZXRzOnBhdGgtbm90LXNldFwiLFwiY29uZmlnLmFzc2V0c1BhdGggaXMgbm90IHNldFwiKTtyZXR1cm4gZShzLmFzc2V0c1BhdGgsdCl9ZXhwb3J0e24gYXMgZmV0Y2hBc3NldCxhIGFzIGdldEFzc2V0VXJsfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7aXNNdWx0aU9yaWdpbkpTT05NaXhpbiBhcyByfWZyb21cIi4uL211bHRpT3JpZ2luSlNPTlN1cHBvcnRVdGlscy5qc1wiO2Z1bmN0aW9uIGkoaSl7aSYmaS53cml0dGVuUHJvcGVydGllcyYmaS53cml0dGVuUHJvcGVydGllcy5mb3JFYWNoKCgoe3RhcmdldDppLHByb3BOYW1lOnQsbmV3T3JpZ2luOmV9KT0+e3IoaSkmJmUmJmkub3JpZ2luT2YodCkhPT1lJiZpLnVwZGF0ZU9yaWdpbih0LGUpfSkpfWV4cG9ydHtpIGFzIHVwZGF0ZU9yaWdpbnN9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIGkoaSl7cmV0dXJuIGkmJlwiZ2V0QXRPcmlnaW5cImluIGkmJlwib3JpZ2luT2ZcImluIGl9ZXhwb3J0e2kgYXMgaXNNdWx0aU9yaWdpbkpTT05NaXhpbn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgdD1cInJhbmRvbVVVSURcImluIGNyeXB0bztmdW5jdGlvbiBuKCl7aWYodClyZXR1cm4gY3J5cHRvLnJhbmRvbVVVSUQoKTtjb25zdCBuPWNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQxNkFycmF5KDgpKTtuWzNdPTQwOTUmblszXXwxNjM4NCxuWzRdPTE2MzgzJm5bNF18MzI3Njg7Y29uc3Qgcj10PT5uW3RdLnRvU3RyaW5nKDE2KS5wYWRTdGFydCg0LFwiMFwiKTtyZXR1cm4gcigwKStyKDEpK1wiLVwiK3IoMikrXCItXCIrcigzKStcIi1cIityKDQpK1wiLVwiK3IoNSkrcig2KStyKDcpfWZ1bmN0aW9uIHIoKXtyZXR1cm5geyR7bigpfX1gfWV4cG9ydHtyIGFzIGdlbmVyYXRlQnJhY2VkVVVJRCxuIGFzIGdlbmVyYXRlVVVJRH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgcn1mcm9tXCIuLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGV9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBzfWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtmdW5jdGlvbiB0KHIpe3JldHVyblwicG9ydGFsSXRlbVwiaW4gcn1jb25zdCBpPWk9PntsZXQgbz1jbGFzcyBleHRlbmRzIGl7Z2V0IGFwaUtleSgpe3JldHVybiB0aGlzLl9pc092ZXJyaWRkZW4oXCJhcGlLZXlcIik/dGhpcy5fZ2V0KFwiYXBpS2V5XCIpOnQodGhpcyk/dGhpcy5wb3J0YWxJdGVtPy5hcGlLZXk6bnVsbH1zZXQgYXBpS2V5KHIpe251bGwhPXI/dGhpcy5fb3ZlcnJpZGUoXCJhcGlLZXlcIixyKToodGhpcy5fY2xlYXJPdmVycmlkZShcImFwaUtleVwiKSx0aGlzLmNsZWFyKFwiYXBpS2V5XCIsXCJ1c2VyXCIpKX19O3JldHVybiByKFtlKHt0eXBlOlN0cmluZ30pXSxvLnByb3RvdHlwZSxcImFwaUtleVwiLG51bGwpLG89cihbcyhcImVzcmkubGF5ZXJzLm1peGlucy5BUElLZXlNaXhpblwiKV0sbyksb307ZXhwb3J0e2kgYXMgQVBJS2V5TWl4aW59O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uL3JlcXVlc3QuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0IG8gZnJvbVwiLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7ZGVib3VuY2UgYXMgaX1mcm9tXCIuLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHt1cmxUb09iamVjdCBhcyBzfWZyb21cIi4uLy4uL2NvcmUvdXJsVXRpbHMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgYX1mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3JlYWRlciBhcyBufWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcmVhZGVyLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIGx9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHt3cml0ZXIgYXMgcH1mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3dyaXRlci5qc1wiO2ltcG9ydHt1cGRhdGVPcmlnaW5zIGFzIGN9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvb3JpZ2luVXRpbHMuanNcIjtpbXBvcnQgZCBmcm9tXCIuLi8uLi9nZW9tZXRyeS9FeHRlbnQuanNcIjtpbXBvcnQgdSBmcm9tXCIuLi8uLi9nZW9tZXRyeS9IZWlnaHRNb2RlbEluZm8uanNcIjtpbXBvcnQgbSBmcm9tXCIuLi8uLi9nZW9tZXRyeS9TcGF0aWFsUmVmZXJlbmNlLmpzXCI7aW1wb3J0e3RpdGxlRnJvbVVybEFuZE5hbWUgYXMgaCxwYXJzZSBhcyB5LGNsZWFuVGl0bGUgYXMgZixzYW5pdGl6ZVVybFdpdGhMYXllcklkIGFzIHYsd3JpdGVVcmxXaXRoTGF5ZXJJZCBhcyBTfWZyb21cIi4uL3N1cHBvcnQvYXJjZ2lzTGF5ZXJVcmwuanNcIjtpbXBvcnR7aWQgYXMgZyx1cmwgYXMgd31mcm9tXCIuLi9zdXBwb3J0L2NvbW1vblByb3BlcnRpZXMuanNcIjtpbXBvcnR7ZmV0Y2hJbmRleEluZm8gYXMgSX1mcm9tXCIuLi9zdXBwb3J0L0kzU0luZGV4SW5mby5qc1wiO2ltcG9ydHtnZXRMb2FkZXIgYXMgeH1mcm9tXCIuLi9zdXBwb3J0L3NjaGVtYVZhbGlkYXRvckxvYWRlci5qc1wiO2ltcG9ydCBiIGZyb21cIi4uLy4uL3BvcnRhbC9Qb3J0YWwuanNcIjtpbXBvcnQgXyBmcm9tXCIuLi8uLi9wb3J0YWwvUG9ydGFsSXRlbS5qc1wiO2ltcG9ydHtzYXZlUmVzb3VyY2VzIGFzIGp9ZnJvbVwiLi4vLi4vd2ViZG9jL3N1cHBvcnQvc2F2ZVV0aWxzLmpzXCI7Y29uc3QgUj1cImVzcmkubGF5ZXJzLm1peGlucy5TY2VuZVNlcnZpY2VcIixBPW8uZ2V0TG9nZ2VyKFIpLE49bz0+e2xldCBOPWNsYXNzIGV4dGVuZHMgb3tjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5zcGF0aWFsUmVmZXJlbmNlPW51bGwsdGhpcy5mdWxsRXh0ZW50PW51bGwsdGhpcy5oZWlnaHRNb2RlbEluZm89bnVsbCx0aGlzLm1pblNjYWxlPTAsdGhpcy5tYXhTY2FsZT0wLHRoaXMudmVyc2lvbj17bWFqb3I6TnVtYmVyLk5hTixtaW5vcjpOdW1iZXIuTmFOLHZlcnNpb25TdHJpbmc6XCJcIn0sdGhpcy5jb3B5cmlnaHQ9bnVsbCx0aGlzLnN1YmxheWVyVGl0bGVNb2RlPVwiaXRlbS10aXRsZVwiLHRoaXMudGl0bGU9bnVsbCx0aGlzLmxheWVySWQ9bnVsbCx0aGlzLmluZGV4SW5mbz1udWxsLHRoaXMuX2RlYm91bmNlZFNhdmVPcGVyYXRpb25zPWkoKGFzeW5jKGUsdCxyKT0+e3N3aXRjaChlKXtjYXNlIEsuU0FWRTpyZXR1cm4gdGhpcy5fc2F2ZSh0KTtjYXNlIEsuU0FWRV9BUzpyZXR1cm4gdGhpcy5fc2F2ZUFzKHIsdCl9fSkpfXJlYWRTcGF0aWFsUmVmZXJlbmNlKGUsdCl7cmV0dXJuIHRoaXMuX3JlYWRTcGF0aWFsUmVmZXJlbmNlKHQpfV9yZWFkU3BhdGlhbFJlZmVyZW5jZShlKXtpZihudWxsIT1lLnNwYXRpYWxSZWZlcmVuY2UpcmV0dXJuIG0uZnJvbUpTT04oZS5zcGF0aWFsUmVmZXJlbmNlKTt7Y29uc3QgdD1lLnN0b3JlLHI9dC5pbmRleENSU3x8dC5nZW9ncmFwaGljQ1JTLG89ciYmcGFyc2VJbnQoci5zdWJzdHJpbmcoci5sYXN0SW5kZXhPZihcIi9cIikrMSxyLmxlbmd0aCksMTApO3JldHVybiBudWxsIT1vP25ldyBtKG8pOm51bGx9fXJlYWRGdWxsRXh0ZW50KGUsdCxyKXtpZihudWxsIT1lJiZcIm9iamVjdFwiPT10eXBlb2YgZSl7Y29uc3Qgbz1udWxsPT1lLnNwYXRpYWxSZWZlcmVuY2U/ey4uLmUsc3BhdGlhbFJlZmVyZW5jZTp0aGlzLl9yZWFkU3BhdGlhbFJlZmVyZW5jZSh0KX06ZTtyZXR1cm4gZC5mcm9tSlNPTihvLHIpfWNvbnN0IG89dC5zdG9yZSxpPXRoaXMuX3JlYWRTcGF0aWFsUmVmZXJlbmNlKHQpO3JldHVybiBudWxsPT1pfHxudWxsPT1vfHxudWxsPT1vLmV4dGVudHx8IUFycmF5LmlzQXJyYXkoby5leHRlbnQpfHxvLmV4dGVudC5zb21lKChlPT5lPEUpKT9udWxsOm5ldyBkKHt4bWluOm8uZXh0ZW50WzBdLHltaW46by5leHRlbnRbMV0seG1heDpvLmV4dGVudFsyXSx5bWF4Om8uZXh0ZW50WzNdLHNwYXRpYWxSZWZlcmVuY2U6aX0pfXBhcnNlVmVyc2lvblN0cmluZyhlKXtjb25zdCB0PXttYWpvcjpOdW1iZXIuTmFOLG1pbm9yOk51bWJlci5OYU4sdmVyc2lvblN0cmluZzplfSxyPWUuc3BsaXQoXCIuXCIpO3JldHVybiByLmxlbmd0aD49MiYmKHQubWFqb3I9cGFyc2VJbnQoclswXSwxMCksdC5taW5vcj1wYXJzZUludChyWzFdLDEwKSksdH1yZWFkVmVyc2lvbihlLHQpe2NvbnN0IHI9dC5zdG9yZSxvPW51bGwhPXIudmVyc2lvbj9yLnZlcnNpb24udG9TdHJpbmcoKTpcIlwiO3JldHVybiB0aGlzLnBhcnNlVmVyc2lvblN0cmluZyhvKX1yZWFkVGl0bGVQb3J0YWxJdGVtKGUpe3JldHVyblwiaXRlbS10aXRsZVwiIT09dGhpcy5zdWJsYXllclRpdGxlTW9kZT92b2lkIDA6ZX1yZWFkVGl0bGVTZXJ2aWNlKGUsdCl7Y29uc3Qgcj10aGlzLnBvcnRhbEl0ZW0mJnRoaXMucG9ydGFsSXRlbS50aXRsZTtpZihcIml0ZW0tdGl0bGVcIj09PXRoaXMuc3VibGF5ZXJUaXRsZU1vZGUpcmV0dXJuIGgodGhpcy51cmwsdC5uYW1lKTtsZXQgbz10Lm5hbWU7aWYoIW8mJnRoaXMudXJsKXtjb25zdCBlPXkodGhpcy51cmwpO251bGwhPWUmJihvPWUudGl0bGUpfXJldHVyblwiaXRlbS10aXRsZS1hbmQtc2VydmljZS1uYW1lXCI9PT10aGlzLnN1YmxheWVyVGl0bGVNb2RlJiZyJiYobz1yK1wiIC0gXCIrbyksZihvKX1zZXQgdXJsKGUpe2NvbnN0IHQ9dih7bGF5ZXI6dGhpcyx1cmw6ZSxub25TdGFuZGFyZFVybEFsbG93ZWQ6ITEsbG9nZ2VyOkF9KTt0aGlzLl9zZXQoXCJ1cmxcIix0LnVybCksbnVsbCE9dC5sYXllcklkJiZ0aGlzLl9zZXQoXCJsYXllcklkXCIsdC5sYXllcklkKX13cml0ZVVybChlLHQscixvKXtTKHRoaXMsZSxcImxheWVyc1wiLHQsbyl9Z2V0IHBhcnNlZFVybCgpe2NvbnN0IGU9dGhpcy5fZ2V0KFwidXJsXCIpLHQ9cyhlKTtyZXR1cm4gbnVsbCE9dGhpcy5sYXllcklkJiYodC5wYXRoPWAke3QucGF0aH0vbGF5ZXJzLyR7dGhpcy5sYXllcklkfWApLHR9YXN5bmMgX2ZldGNoSW5kZXhBbmRVcGRhdGVFeHRlbnQoZSx0KXt0aGlzLmluZGV4SW5mbz1JKHRoaXMucGFyc2VkVXJsLnBhdGgsdGhpcy5yb290Tm9kZSxlLHRoaXMuYXBpS2V5LEEsdCksbnVsbD09dGhpcy5mdWxsRXh0ZW50fHx0aGlzLmZ1bGxFeHRlbnQuaGFzWnx8dGhpcy5fdXBkYXRlRXh0ZW50KGF3YWl0IHRoaXMuaW5kZXhJbmZvKX1fdXBkYXRlRXh0ZW50KGUpe2lmKFwicGFnZVwiPT09ZT8udHlwZSl7Y29uc3QgdD1lLnJvb3RJbmRleCVlLnBhZ2VTaXplLG89ZS5yb290UGFnZT8ubm9kZXM/Llt0XTtpZihudWxsPT1vfHxudWxsPT1vLm9iYnx8bnVsbD09by5vYmIuY2VudGVyfHxudWxsPT1vLm9iYi5oYWxmU2l6ZSl0aHJvdyBuZXcgcihcInNjZW5lc2VydmljZTppbnZhbGlkLW5vZGUtcGFnZVwiLFwiSW52YWxpZCBub2RlIHBhZ2UuXCIpO2lmKG8ub2JiLmNlbnRlclswXTxFfHxudWxsPT10aGlzLmZ1bGxFeHRlbnR8fHRoaXMuZnVsbEV4dGVudC5oYXNaKXJldHVybjtjb25zdCBpPW8ub2JiLmhhbGZTaXplLHM9by5vYmIuY2VudGVyWzJdLGE9TWF0aC5zcXJ0KGlbMF0qaVswXStpWzFdKmlbMV0raVsyXSppWzJdKTt0aGlzLmZ1bGxFeHRlbnQuem1pbj1zLWEsdGhpcy5mdWxsRXh0ZW50LnptYXg9cythfWVsc2UgaWYoXCJub2RlXCI9PT1lPy50eXBlKXtjb25zdCB0PWUucm9vdE5vZGU/Lm1icztpZighQXJyYXkuaXNBcnJheSh0KXx8NCE9PXQubGVuZ3RofHx0WzBdPEUpcmV0dXJuO2NvbnN0IHI9dFsyXSxvPXRbM10se2Z1bGxFeHRlbnQ6aX09dGhpcztpJiYoaS56bWluPXItbyxpLnptYXg9citvKX19YXN5bmMgX2ZldGNoU2VydmljZShlKXtpZihudWxsPT10aGlzLnVybCl0aHJvdyBuZXcgcihcInNjZW5lc2VydmljZTp1cmwtbm90LXNldFwiLFwiU2NlbmUgc2VydmljZSBjYW4gbm90IGJlIGxvYWRlZCB3aXRob3V0IHZhbGlkIHBvcnRhbCBpdGVtIG9yIHVybFwiKTtpZihudWxsPT10aGlzLmxheWVySWQmJi9TY2VuZVNlcnZlclxcLyokL2kudGVzdCh0aGlzLnVybCkpe2NvbnN0IHQ9YXdhaXQgdGhpcy5fZmV0Y2hGaXJzdExheWVySWQoZSk7bnVsbCE9dCYmKHRoaXMubGF5ZXJJZD10KX1yZXR1cm4gdGhpcy5fZmV0Y2hTZXJ2aWNlTGF5ZXIoZSl9YXN5bmMgX2ZldGNoRmlyc3RMYXllcklkKGUpe2NvbnN0IHI9YXdhaXQgdCh0aGlzLnVybCx7cXVlcnk6e2Y6XCJqc29uXCIsdG9rZW46dGhpcy5hcGlLZXl9LHJlc3BvbnNlVHlwZTpcImpzb25cIixzaWduYWw6ZX0pO2lmKHIuZGF0YSYmQXJyYXkuaXNBcnJheShyLmRhdGEubGF5ZXJzKSYmci5kYXRhLmxheWVycy5sZW5ndGg+MClyZXR1cm4gci5kYXRhLmxheWVyc1swXS5pZH1hc3luYyBfZmV0Y2hTZXJ2aWNlTGF5ZXIoZSl7Y29uc3Qgcj1hd2FpdCB0KHRoaXMucGFyc2VkVXJsPy5wYXRoPz9cIlwiLHtxdWVyeTp7ZjpcImpzb25cIix0b2tlbjp0aGlzLmFwaUtleX0scmVzcG9uc2VUeXBlOlwianNvblwiLHNpZ25hbDplfSk7ci5zc2wmJih0aGlzLnVybD10aGlzLnVybC5yZXBsYWNlKC9eaHR0cDovaSxcImh0dHBzOlwiKSk7bGV0IG89ITE7aWYoci5kYXRhLmxheWVyVHlwZSYmXCJWb3hlbFwiPT09ci5kYXRhLmxheWVyVHlwZSYmKG89ITApLG8pcmV0dXJuIHRoaXMuX2ZldGNoVm94ZWxTZXJ2aWNlTGF5ZXIoKTtjb25zdCBpPXIuZGF0YTt0aGlzLnJlYWQoaSx0aGlzLl9nZXRTZXJ2aWNlQ29udGV4dCgpKSx0aGlzLnZhbGlkYXRlTGF5ZXIoaSl9YXN5bmMgX2ZldGNoVm94ZWxTZXJ2aWNlTGF5ZXIoZSl7Y29uc3Qgcj0oYXdhaXQgdCh0aGlzLnBhcnNlZFVybD8ucGF0aCtcIi9sYXllclwiLHtxdWVyeTp7ZjpcImpzb25cIix0b2tlbjp0aGlzLmFwaUtleX0scmVzcG9uc2VUeXBlOlwianNvblwiLHNpZ25hbDplfSkpLmRhdGE7dGhpcy5yZWFkKHIsdGhpcy5fZ2V0U2VydmljZUNvbnRleHQoKSksdGhpcy52YWxpZGF0ZUxheWVyKHIpfV9nZXRTZXJ2aWNlQ29udGV4dCgpe3JldHVybntvcmlnaW46XCJzZXJ2aWNlXCIscG9ydGFsSXRlbTp0aGlzLnBvcnRhbEl0ZW0scG9ydGFsOnRoaXMucG9ydGFsSXRlbT8ucG9ydGFsLHVybDp0aGlzLnBhcnNlZFVybH19YXN5bmMgX2Vuc3VyZUxvYWRCZWZvcmVTYXZlKCl7YXdhaXQgdGhpcy5sb2FkKCksXCJiZWZvcmVTYXZlXCJpbiB0aGlzJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLmJlZm9yZVNhdmUmJmF3YWl0IHRoaXMuYmVmb3JlU2F2ZSgpfXZhbGlkYXRlTGF5ZXIoZSl7fV91cGRhdGVUeXBlS2V5d29yZHMoZSx0LHIpe2UudHlwZUtleXdvcmRzfHwoZS50eXBlS2V5d29yZHM9W10pO2NvbnN0IG89dC5nZXRUeXBlS2V5d29yZHMoKTtmb3IoY29uc3QgaSBvZiBvKWUudHlwZUtleXdvcmRzLnB1c2goaSk7ZS50eXBlS2V5d29yZHMmJihlLnR5cGVLZXl3b3Jkcz1lLnR5cGVLZXl3b3Jkcy5maWx0ZXIoKChlLHQscik9PnIuaW5kZXhPZihlKT09PXQpKSxyPT09VS5uZXdJdGVtJiYoZS50eXBlS2V5d29yZHM9ZS50eXBlS2V5d29yZHMuZmlsdGVyKChlPT5cIkhvc3RlZCBTZXJ2aWNlXCIhPT1lKSkpKX1hc3luYyBfc2F2ZUFzKGUsdCl7Y29uc3Qgbz17Li4uTywuLi50fTtsZXQgaT1fLmZyb20oZSk7aXx8KEEuZXJyb3IoXCJfc2F2ZUFzKCk6IHJlcXVpcmVzIGEgcG9ydGFsIGl0ZW0gcGFyYW1ldGVyXCIpLGF3YWl0IFByb21pc2UucmVqZWN0KG5ldyByKFwic2NlbmVzZXJ2aWNlOnBvcnRhbC1pdGVtLXJlcXVpcmVkXCIsXCJfc2F2ZUFzKCkgcmVxdWlyZXMgYSBwb3J0YWwgaXRlbSB0byBzYXZlIHRvXCIpKSksaS5pZCYmKGk9aS5jbG9uZSgpLGkuaWQ9bnVsbCk7Y29uc3Qgcz1pLnBvcnRhbHx8Yi5nZXREZWZhdWx0KCk7YXdhaXQgdGhpcy5fZW5zdXJlTG9hZEJlZm9yZVNhdmUoKSxpLnR5cGU9VCxpLnBvcnRhbD1zO2NvbnN0IGE9e29yaWdpbjpcInBvcnRhbC1pdGVtXCIsdXJsOm51bGwsbWVzc2FnZXM6W10scG9ydGFsOnMscG9ydGFsSXRlbTppLHdyaXR0ZW5Qcm9wZXJ0aWVzOltdLGJsb2NrZWRSZWxhdGl2ZVVybHM6W10scmVzb3VyY2VzOnt0b0FkZDpbXSx0b1VwZGF0ZTpbXSx0b0tlZXA6W10scGVuZGluZ09wZXJhdGlvbnM6W119fSxuPXtsYXllcnM6W3RoaXMud3JpdGUoe30sYSldfTtyZXR1cm4gYXdhaXQgUHJvbWlzZS5hbGwoYS5yZXNvdXJjZXMucGVuZGluZ09wZXJhdGlvbnM/P1tdKSxhd2FpdCB0aGlzLl92YWxpZGF0ZUFnYWluc3RKU09OU2NoZW1hKG4sYSxvKSxpLnVybD10aGlzLnVybCxpLnRpdGxlfHwoaS50aXRsZT10aGlzLnRpdGxlKSx0aGlzLl91cGRhdGVUeXBlS2V5d29yZHMoaSxvLFUubmV3SXRlbSksYXdhaXQgcy5zaWduSW4oKSxhd2FpdChzLnVzZXI/LmFkZEl0ZW0oe2l0ZW06aSxmb2xkZXI6byYmby5mb2xkZXIsZGF0YTpufSkpLGF3YWl0IGoodGhpcy5yZXNvdXJjZVJlZmVyZW5jZXMsYSxudWxsKSx0aGlzLnBvcnRhbEl0ZW09aSxjKGEpLGEucG9ydGFsSXRlbT1pLGl9YXN5bmMgX3NhdmUoZSl7Y29uc3QgdD17Li4uTywuLi5lfTtpZighdGhpcy5wb3J0YWxJdGVtKXRocm93IEEuZXJyb3IoXCJfc2F2ZSgpOiByZXF1aXJlcyB0aGUgLnBvcnRhbEl0ZW0gcHJvcGVydHkgdG8gYmUgc2V0XCIpLG5ldyByKFwic2NlbmVzZXJ2aWNlOnBvcnRhbC1pdGVtLW5vdC1zZXRcIixcIlBvcnRhbCBpdGVtIHRvIHNhdmUgdG8gaGFzIG5vdCBiZWVuIHNldCBvbiB0aGlzIFNjZW5lU2VydmljZVwiKTtpZih0aGlzLnBvcnRhbEl0ZW0udHlwZSE9PVQpdGhyb3cgQS5lcnJvcihcIl9zYXZlKCk6IE5vbi1tYXRjaGluZyBwb3J0YWwgaXRlbSB0eXBlLiBHb3QgXCIrdGhpcy5wb3J0YWxJdGVtLnR5cGUrXCIsIGV4cGVjdGVkIFwiK1QpLG5ldyByKFwic2NlbmVzZXJ2aWNlOnBvcnRhbC1pdGVtLXdyb25nLXR5cGVcIixgUG9ydGFsIGl0ZW0gbmVlZHMgdG8gaGF2ZSB0eXBlIFwiJHtUfVwiYCk7YXdhaXQgdGhpcy5fZW5zdXJlTG9hZEJlZm9yZVNhdmUoKTtjb25zdCBvPXtvcmlnaW46XCJwb3J0YWwtaXRlbVwiLHVybDp0aGlzLnBvcnRhbEl0ZW0uaXRlbVVybCYmcyh0aGlzLnBvcnRhbEl0ZW0uaXRlbVVybCksbWVzc2FnZXM6W10scG9ydGFsOnRoaXMucG9ydGFsSXRlbS5wb3J0YWx8fGIuZ2V0RGVmYXVsdCgpLHBvcnRhbEl0ZW06dGhpcy5wb3J0YWxJdGVtLHdyaXR0ZW5Qcm9wZXJ0aWVzOltdLGJsb2NrZWRSZWxhdGl2ZVVybHM6W10scmVzb3VyY2VzOnt0b0FkZDpbXSx0b1VwZGF0ZTpbXSx0b0tlZXA6W10scGVuZGluZ09wZXJhdGlvbnM6W119fSxpPXtsYXllcnM6W3RoaXMud3JpdGUoe30sbyldfTtyZXR1cm4gYXdhaXQgUHJvbWlzZS5hbGwoby5yZXNvdXJjZXMucGVuZGluZ09wZXJhdGlvbnM/P1tdKSxhd2FpdCB0aGlzLl92YWxpZGF0ZUFnYWluc3RKU09OU2NoZW1hKGksbyx0KSx0aGlzLnBvcnRhbEl0ZW0udXJsPXRoaXMudXJsLHRoaXMucG9ydGFsSXRlbS50aXRsZXx8KHRoaXMucG9ydGFsSXRlbS50aXRsZT10aGlzLnRpdGxlKSx0aGlzLl91cGRhdGVUeXBlS2V5d29yZHModGhpcy5wb3J0YWxJdGVtLHQsVS5leGlzdGluZ0l0ZW0pLGF3YWl0IHRoaXMucG9ydGFsSXRlbS51cGRhdGUoe2RhdGE6aX0pLGF3YWl0IGoodGhpcy5yZXNvdXJjZVJlZmVyZW5jZXMsbyxudWxsKSxjKG8pLHRoaXMucG9ydGFsSXRlbX1hc3luYyBfdmFsaWRhdGVBZ2FpbnN0SlNPTlNjaGVtYShlLHQsbyl7bGV0IGk9dC5tZXNzYWdlcz8uZmlsdGVyKChlPT5cImVycm9yXCI9PT1lLnR5cGUpKS5tYXAoKGU9Pm5ldyByKGUubmFtZSxlLm1lc3NhZ2UsZS5kZXRhaWxzKSkpPz9bXTtvPy52YWxpZGF0aW9uT3B0aW9ucz8uaWdub3JlVW5zdXBwb3J0ZWQmJihpPWkuZmlsdGVyKChlPT5cImxheWVyOnVuc3VwcG9ydGVkXCIhPT1lLm5hbWUmJlwic3ltYm9sOnVuc3VwcG9ydGVkXCIhPT1lLm5hbWUmJlwic3ltYm9sLWxheWVyOnVuc3VwcG9ydGVkXCIhPT1lLm5hbWUmJlwicHJvcGVydHk6dW5zdXBwb3J0ZWRcIiE9PWUubmFtZSYmXCJ1cmw6dW5zdXBwb3J0ZWRcIiE9PWUubmFtZSYmXCJzY2VuZW1vZGlmaWNhdGlvbjp1bnN1cHBvcnRlZFwiIT09ZS5uYW1lKSkpO2NvbnN0IHM9bz8udmFsaWRhdGlvbk9wdGlvbnMsYT1zPy5lbmFibGVkLG49eCgpO2lmKGEmJm4pe2NvbnN0IHQ9KGF3YWl0IG4oKSkudmFsaWRhdGUoZSxvLnBvcnRhbEl0ZW1MYXllclR5cGUpO2lmKHQubGVuZ3RoPjApe2NvbnN0IGU9YExheWVyIGl0ZW0gZGlkIG5vdCB2YWxpZGF0ZTpcXG4ke3Quam9pbihcIlxcblwiKX1gO2lmKEEuZXJyb3IoYF92YWxpZGF0ZUFnYWluc3RKU09OU2NoZW1hKCk6ICR7ZX1gKSxcInRocm93XCI9PT1zLmZhaWxQb2xpY3kpe2NvbnN0IGU9dC5tYXAoKGU9Pm5ldyByKFwic2NlbmVzZXJ2aWNlOnNjaGVtYS12YWxpZGF0aW9uXCIsZSkpKS5jb25jYXQoaSk7dGhyb3cgbmV3IHIoXCJzY2VuZXNlcnZpY2UtdmFsaWRhdGU6ZXJyb3JcIixcIkZhaWxlZCB0byBzYXZlIGxheWVyIGl0ZW0gZHVlIHRvIHNjaGVtYSB2YWxpZGF0aW9uLCBzZWUgYGRldGFpbHMuZXJyb3JzYC5cIix7Y29tYmluZWQ6ZX0pfX19aWYoaS5sZW5ndGg+MCl0aHJvdyBuZXcgcihcInNjZW5lc2VydmljZTpzYXZlXCIsXCJGYWlsZWQgdG8gc2F2ZSBTY2VuZVNlcnZpY2UgZHVlIHRvIHVuc3VwcG9ydGVkIG9yIGludmFsaWQgY29udGVudC4gU2VlICdkZXRhaWxzLmVycm9ycycgZm9yIG1vcmUgZGV0YWlsZWQgaW5mb3JtYXRpb25cIix7ZXJyb3JzOml9KX19O3JldHVybiBlKFthKGcpXSxOLnByb3RvdHlwZSxcImlkXCIsdm9pZCAwKSxlKFthKHt0eXBlOm19KV0sTi5wcm90b3R5cGUsXCJzcGF0aWFsUmVmZXJlbmNlXCIsdm9pZCAwKSxlKFtuKFwic3BhdGlhbFJlZmVyZW5jZVwiLFtcInNwYXRpYWxSZWZlcmVuY2VcIixcInN0b3JlLmluZGV4Q1JTXCIsXCJzdG9yZS5nZW9ncmFwaGljQ1JTXCJdKV0sTi5wcm90b3R5cGUsXCJyZWFkU3BhdGlhbFJlZmVyZW5jZVwiLG51bGwpLGUoW2Eoe3R5cGU6ZH0pXSxOLnByb3RvdHlwZSxcImZ1bGxFeHRlbnRcIix2b2lkIDApLGUoW24oXCJmdWxsRXh0ZW50XCIsW1wiZnVsbEV4dGVudFwiLFwic3RvcmUuZXh0ZW50XCIsXCJzcGF0aWFsUmVmZXJlbmNlXCIsXCJzdG9yZS5pbmRleENSU1wiLFwic3RvcmUuZ2VvZ3JhcGhpY0NSU1wiXSldLE4ucHJvdG90eXBlLFwicmVhZEZ1bGxFeHRlbnRcIixudWxsKSxlKFthKHtyZWFkT25seTohMCx0eXBlOnV9KV0sTi5wcm90b3R5cGUsXCJoZWlnaHRNb2RlbEluZm9cIix2b2lkIDApLGUoW2Eoe3R5cGU6TnVtYmVyLGpzb246e25hbWU6XCJsYXllckRlZmluaXRpb24ubWluU2NhbGVcIix3cml0ZTohMCxvcmlnaW5zOntzZXJ2aWNlOntyZWFkOntzb3VyY2U6XCJtaW5TY2FsZVwifSx3cml0ZTohMX19fX0pXSxOLnByb3RvdHlwZSxcIm1pblNjYWxlXCIsdm9pZCAwKSxlKFthKHt0eXBlOk51bWJlcixqc29uOntuYW1lOlwibGF5ZXJEZWZpbml0aW9uLm1heFNjYWxlXCIsd3JpdGU6ITAsb3JpZ2luczp7c2VydmljZTp7cmVhZDp7c291cmNlOlwibWF4U2NhbGVcIn0sd3JpdGU6ITF9fX19KV0sTi5wcm90b3R5cGUsXCJtYXhTY2FsZVwiLHZvaWQgMCksZShbYSh7cmVhZE9ubHk6ITB9KV0sTi5wcm90b3R5cGUsXCJ2ZXJzaW9uXCIsdm9pZCAwKSxlKFtuKFwidmVyc2lvblwiLFtcInN0b3JlLnZlcnNpb25cIl0pXSxOLnByb3RvdHlwZSxcInJlYWRWZXJzaW9uXCIsbnVsbCksZShbYSh7dHlwZTpTdHJpbmcsanNvbjp7cmVhZDp7c291cmNlOlwiY29weXJpZ2h0VGV4dFwifX19KV0sTi5wcm90b3R5cGUsXCJjb3B5cmlnaHRcIix2b2lkIDApLGUoW2Eoe3R5cGU6U3RyaW5nLGpzb246e3JlYWQ6ITF9fSldLE4ucHJvdG90eXBlLFwic3VibGF5ZXJUaXRsZU1vZGVcIix2b2lkIDApLGUoW2Eoe3R5cGU6U3RyaW5nfSldLE4ucHJvdG90eXBlLFwidGl0bGVcIix2b2lkIDApLGUoW24oXCJwb3J0YWwtaXRlbVwiLFwidGl0bGVcIildLE4ucHJvdG90eXBlLFwicmVhZFRpdGxlUG9ydGFsSXRlbVwiLG51bGwpLGUoW24oXCJzZXJ2aWNlXCIsXCJ0aXRsZVwiLFtcIm5hbWVcIl0pXSxOLnByb3RvdHlwZSxcInJlYWRUaXRsZVNlcnZpY2VcIixudWxsKSxlKFthKHt0eXBlOk51bWJlcixqc29uOntvcmlnaW5zOntzZXJ2aWNlOntyZWFkOntzb3VyY2U6XCJpZFwifX0sXCJwb3J0YWwtaXRlbVwiOnt3cml0ZTp7dGFyZ2V0OlwiaWRcIixpc1JlcXVpcmVkOiEwLGlnbm9yZU9yaWdpbjohMH0scmVhZDohMX19fX0pXSxOLnByb3RvdHlwZSxcImxheWVySWRcIix2b2lkIDApLGUoW2EodyldLE4ucHJvdG90eXBlLFwidXJsXCIsbnVsbCksZShbcChcInVybFwiKV0sTi5wcm90b3R5cGUsXCJ3cml0ZVVybFwiLG51bGwpLGUoW2EoKV0sTi5wcm90b3R5cGUsXCJwYXJzZWRVcmxcIixudWxsKSxlKFthKHtyZWFkT25seTohMH0pXSxOLnByb3RvdHlwZSxcInN0b3JlXCIsdm9pZCAwKSxlKFthKHt0eXBlOlN0cmluZyxyZWFkT25seTohMCxqc29uOntyZWFkOntzb3VyY2U6XCJzdG9yZS5yb290Tm9kZVwifX19KV0sTi5wcm90b3R5cGUsXCJyb290Tm9kZVwiLHZvaWQgMCksTj1lKFtsKFIpXSxOKSxOfSxFPS0xZTM4O3ZhciBVOyFmdW5jdGlvbihlKXtlW2UuZXhpc3RpbmdJdGVtPTBdPVwiZXhpc3RpbmdJdGVtXCIsZVtlLm5ld0l0ZW09MV09XCJuZXdJdGVtXCJ9KFV8fChVPXt9KSk7Y29uc3QgVD1cIlNjZW5lIFNlcnZpY2VcIixPPXtnZXRUeXBlS2V5d29yZHM6KCk9PltdLHBvcnRhbEl0ZW1MYXllclR5cGU6XCJ1bmtub3duXCIsdmFsaWRhdGlvbk9wdGlvbnM6e2VuYWJsZWQ6ITAsaWdub3JlVW5zdXBwb3J0ZWQ6ITEsZmFpbFBvbGljeTpcInRocm93XCJ9fTt2YXIgSzshZnVuY3Rpb24oZSl7ZVtlLlNBVkU9MF09XCJTQVZFXCIsZVtlLlNBVkVfQVM9MV09XCJTQVZFX0FTXCJ9KEt8fChLPXt9KSk7ZXhwb3J0e1QgYXMgU0NFTkVfU0VSVklDRV9JVEVNX1RZUEUsSyBhcyBTYXZlT3BlcmF0aW9uVHlwZSxOIGFzIFNjZW5lU2VydmljZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGUgZnJvbVwiLi4vLi4vcmVxdWVzdC5qc1wiO2ltcG9ydCBvIGZyb21cIi4uLy4uL2NvcmUvRXJyb3IuanNcIjthc3luYyBmdW5jdGlvbiByKHIsbix0LHMsYSxpKXtsZXQgbD1udWxsO2lmKG51bGwhPXQpe2NvbnN0IG89YCR7cn0vbm9kZXBhZ2VzL2Asbj1vK01hdGguZmxvb3IodC5yb290SW5kZXgvdC5ub2Rlc1BlclBhZ2UpO3RyeXtyZXR1cm57dHlwZTpcInBhZ2VcIixyb290UGFnZTooYXdhaXQgZShuLHtxdWVyeTp7ZjpcImpzb25cIix0b2tlbjpzfSxyZXNwb25zZVR5cGU6XCJqc29uXCIsc2lnbmFsOml9KSkuZGF0YSxyb290SW5kZXg6dC5yb290SW5kZXgscGFnZVNpemU6dC5ub2Rlc1BlclBhZ2UsbG9kTWV0cmljOnQubG9kU2VsZWN0aW9uTWV0cmljVHlwZSx1cmxQcmVmaXg6b319Y2F0Y2goYyl7bnVsbCE9YSYmYS53YXJuKFwiI2ZldGNoSW5kZXhJbmZvKClcIixcIkZhaWxlZCB0byBsb2FkIHJvb3Qgbm9kZSBwYWdlLiBGYWxsaW5nIGJhY2sgdG8gbm9kZSBkb2N1bWVudHMuXCIsbixjKSxsPWN9fWlmKCFuKXJldHVybiBudWxsO2NvbnN0IGQ9YCR7cn0vbm9kZXMvYCxwPWQrKG4mJm4uc3BsaXQoXCIvXCIpLnBvcCgpKTt0cnl7cmV0dXJue3R5cGU6XCJub2RlXCIscm9vdE5vZGU6KGF3YWl0IGUocCx7cXVlcnk6e2Y6XCJqc29uXCIsdG9rZW46c30scmVzcG9uc2VUeXBlOlwianNvblwiLHNpZ25hbDppfSkpLmRhdGEsdXJsUHJlZml4OmR9fWNhdGNoKGMpe3Rocm93IG5ldyBvKFwic2NlbmVzZXJ2aWNlOnJvb3Qtbm9kZS1taXNzaW5nXCIsXCJSb290IG5vZGUgbWlzc2luZy5cIix7cGFnZUVycm9yOmwsbm9kZUVycm9yOmMsdXJsOnB9KX19ZXhwb3J0e3IgYXMgZmV0Y2hJbmRleEluZm99O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmxldCBuPW51bGw7ZnVuY3Rpb24gdCh0KXtuPXR9ZnVuY3Rpb24gdSgpe3JldHVybiBufWV4cG9ydHt1IGFzIGdldExvYWRlcix0IGFzIHJlZ2lzdGVyTG9hZGVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuLi8uLi9yZXF1ZXN0LmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydHtqb2luIGFzIHIsZ2V0UGF0aEV4dGVuc2lvbiBhcyBhfWZyb21cIi4uLy4uL2NvcmUvdXJsVXRpbHMuanNcIjthc3luYyBmdW5jdGlvbiBzKGUsdD17fSxhKXthd2FpdCBlLmxvYWQoYSk7Y29uc3Qgcz1yKGUuaXRlbVVybCxcInJlc291cmNlc1wiKSx7c3RhcnQ6bz0xLG51bTpuPTEwLHNvcnRPcmRlcjp1PVwiYXNjXCIsc29ydEZpZWxkOmw9XCJjcmVhdGVkXCJ9PXQsYz17cXVlcnk6e3N0YXJ0Om8sbnVtOm4sc29ydE9yZGVyOnUsc29ydEZpZWxkOmwsdG9rZW46ZS5hcGlLZXl9LHNpZ25hbDphPy5zaWduYWx9LGk9YXdhaXQgZS5wb3J0YWwucmVxdWVzdChzLGMpO3JldHVybnt0b3RhbDppLnRvdGFsLG5leHRTdGFydDppLm5leHRTdGFydCxyZXNvdXJjZXM6aS5yZXNvdXJjZXMubWFwKCgoe2NyZWF0ZWQ6dCxzaXplOnIscmVzb3VyY2U6YX0pPT4oe2NyZWF0ZWQ6bmV3IERhdGUodCksc2l6ZTpyLHJlc291cmNlOmUucmVzb3VyY2VGcm9tUGF0aChhKX0pKSl9fWFzeW5jIGZ1bmN0aW9uIG8oZSxhLHMsbyl7aWYoIWUuaGFzUGF0aCgpKXRocm93IG5ldyB0KGBwb3J0YWwtaXRlbS1yZXNvdXJjZS0ke2F9OmludmFsaWQtcGF0aGAsXCJSZXNvdXJjZSBkb2VzIG5vdCBoYXZlIGEgdmFsaWQgcGF0aFwiKTtjb25zdCBuPWUucG9ydGFsSXRlbTthd2FpdCBuLmxvYWQobyk7Y29uc3QgdT1yKG4udXNlckl0ZW1VcmwsXCJhZGRcIj09PWE/XCJhZGRSZXNvdXJjZXNcIjpcInVwZGF0ZVJlc291cmNlc1wiKSxbYyxpXT1sKGUucGF0aCksZD1hd2FpdCBwKHMpLG09bmV3IEZvcm1EYXRhO3JldHVybiBjJiZcIi5cIiE9PWMmJm0uYXBwZW5kKFwicmVzb3VyY2VzUHJlZml4XCIsYyksbnVsbCE9byYmby5jb21wcmVzcyYmbS5hcHBlbmQoXCJjb21wcmVzc1wiLFwidHJ1ZVwiKSxtLmFwcGVuZChcImZpbGVOYW1lXCIsaSksbS5hcHBlbmQoXCJmaWxlXCIsZCxpKSxtLmFwcGVuZChcImZcIixcImpzb25cIiksbnVsbCE9byYmby5hY2Nlc3MmJm0uYXBwZW5kKFwiYWNjZXNzXCIsby5hY2Nlc3MpLGF3YWl0IG4ucG9ydGFsLnJlcXVlc3QodSx7bWV0aG9kOlwicG9zdFwiLGJvZHk6bSxzaWduYWw6bz8uc2lnbmFsfSksZX1hc3luYyBmdW5jdGlvbiBuKGUsYSxzKXtpZighYS5oYXNQYXRoKCkpdGhyb3cgbmV3IHQoXCJwb3J0YWwtaXRlbS1yZXNvdXJjZXMtcmVtb3ZlOmludmFsaWQtcGF0aFwiLFwiUmVzb3VyY2UgZG9lcyBub3QgaGF2ZSBhIHZhbGlkIHBhdGhcIik7YXdhaXQgZS5sb2FkKHMpO2NvbnN0IG89cihlLnVzZXJJdGVtVXJsLFwicmVtb3ZlUmVzb3VyY2VzXCIpO2F3YWl0IGUucG9ydGFsLnJlcXVlc3Qobyx7bWV0aG9kOlwicG9zdFwiLHF1ZXJ5OntyZXNvdXJjZTphLnBhdGh9LHNpZ25hbDpzPy5zaWduYWx9KSxhLnBvcnRhbEl0ZW09bnVsbH1hc3luYyBmdW5jdGlvbiB1KGUsdCl7YXdhaXQgZS5sb2FkKHQpO2NvbnN0IGE9cihlLnVzZXJJdGVtVXJsLFwicmVtb3ZlUmVzb3VyY2VzXCIpO3JldHVybiBlLnBvcnRhbC5yZXF1ZXN0KGEse21ldGhvZDpcInBvc3RcIixxdWVyeTp7ZGVsZXRlQWxsOiEwfSxzaWduYWw6dD8uc2lnbmFsfSl9ZnVuY3Rpb24gbChlKXtjb25zdCB0PWUubGFzdEluZGV4T2YoXCIvXCIpO3JldHVybi0xPT09dD9bXCIuXCIsZV06W2Uuc2xpY2UoMCx0KSxlLnNsaWNlKHQrMSldfWZ1bmN0aW9uIGMoZSl7Y29uc3RbdCxyXT1pKGUpLFthLHNdPWwodCk7cmV0dXJuW2EscyxyXX1mdW5jdGlvbiBpKGUpe2NvbnN0IHQ9YShlKTtyZXR1cm4gbnVsbD09dD9bZSxcIlwiXTpbZS5zbGljZSgwLGUubGVuZ3RoLXQubGVuZ3RoLTEpLGAuJHt0fWBdfWFzeW5jIGZ1bmN0aW9uIHAodCl7aWYodCBpbnN0YW5jZW9mIEJsb2IpcmV0dXJuIHQ7cmV0dXJuKGF3YWl0IGUodC51cmwse3Jlc3BvbnNlVHlwZTpcImJsb2JcIn0pKS5kYXRhfWZ1bmN0aW9uIGQoZSx0KXtpZighZS5oYXNQYXRoKCkpcmV0dXJuIG51bGw7Y29uc3RbYSwsc109YyhlLnBhdGgpO3JldHVybiBlLnBvcnRhbEl0ZW0ucmVzb3VyY2VGcm9tUGF0aChyKGEsdCtzKSl9ZnVuY3Rpb24gbShlLHQpe2lmKCFlLmhhc1BhdGgoKSlyZXR1cm4gbnVsbDtjb25zdFthLCxzXT1jKGUucGF0aCk7cmV0dXJuIGUucG9ydGFsSXRlbS5yZXNvdXJjZUZyb21QYXRoKHIoYSx0K3MpKX1leHBvcnR7byBhcyBhZGRPclVwZGF0ZVJlc291cmNlLHAgYXMgY29udGVudFRvQmxvYixzIGFzIGZldGNoUmVzb3VyY2VzLGQgYXMgZ2V0U2libGluZ09mU2FtZVR5cGUsbSBhcyBnZXRTaWJsaW5nT2ZTYW1lVHlwZUksdSBhcyByZW1vdmVBbGxSZXNvdXJjZXMsbiBhcyByZW1vdmVSZXNvdXJjZSxjIGFzIHNwbGl0UHJlZml4RmlsZU5hbWVBbmRFeHRlbnNpb259O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtyZXN1bHQgYXMgcn1mcm9tXCIuLi8uLi9jb3JlL2FzeW5jVXRpbHMuanNcIjtpbXBvcnQgZSBmcm9tXCIuLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0e2VhY2hBbHdheXMgYXMgbyx0aHJvd0lmQWJvcnRlZCBhcyB0fWZyb21cIi4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e2dlbmVyYXRlVVVJRCBhcyBzfWZyb21cIi4uLy4uL2NvcmUvdXVpZC5qc1wiO2ltcG9ydHtnZXRTaWJsaW5nT2ZTYW1lVHlwZUkgYXMgY31mcm9tXCIuLi8uLi9wb3J0YWwvc3VwcG9ydC9yZXNvdXJjZVV0aWxzLmpzXCI7YXN5bmMgZnVuY3Rpb24gcChyLHAsdSl7aWYoIXB8fCFwLnJlc291cmNlcylyZXR1cm47Y29uc3QgaD1wLnBvcnRhbEl0ZW09PT1yLnBvcnRhbEl0ZW0/bmV3IFNldChyLnBhdGhzKTpuZXcgU2V0O3IucGF0aHMubGVuZ3RoPTAsci5wb3J0YWxJdGVtPXAucG9ydGFsSXRlbTtjb25zdCBpPW5ldyBTZXQocC5yZXNvdXJjZXMudG9LZWVwLm1hcCgocj0+ci5yZXNvdXJjZS5wYXRoKSkpLG09bmV3IFNldCxmPVtdO2kuZm9yRWFjaCgoZT0+e2guZGVsZXRlKGUpLHIucGF0aHMucHVzaChlKX0pKTtmb3IoY29uc3QgZSBvZiBwLnJlc291cmNlcy50b1VwZGF0ZSlpZihoLmRlbGV0ZShlLnJlc291cmNlLnBhdGgpLGkuaGFzKGUucmVzb3VyY2UucGF0aCl8fG0uaGFzKGUucmVzb3VyY2UucGF0aCkpe2NvbnN0e3Jlc291cmNlOm8sY29udGVudDp0LGZpbmlzaDpwLGVycm9yOm59PWUsaD1jKG8scygpKTtyLnBhdGhzLnB1c2goaC5wYXRoKSxmLnB1c2goYSh7cmVzb3VyY2U6aCxjb250ZW50OnQsY29tcHJlc3M6ZS5jb21wcmVzcyxmaW5pc2g6cCxlcnJvcjpufSx1KSl9ZWxzZSByLnBhdGhzLnB1c2goZS5yZXNvdXJjZS5wYXRoKSxmLnB1c2gobihlLHUpKSxtLmFkZChlLnJlc291cmNlLnBhdGgpO2Zvcihjb25zdCBlIG9mIHAucmVzb3VyY2VzLnRvQWRkKWYucHVzaChhKGUsdSkpLHIucGF0aHMucHVzaChlLnJlc291cmNlLnBhdGgpO2lmKGguZm9yRWFjaCgocj0+e2lmKHAucG9ydGFsSXRlbSl7Y29uc3QgZT1wLnBvcnRhbEl0ZW0ucmVzb3VyY2VGcm9tUGF0aChyKTtmLnB1c2goZS5wb3J0YWxJdGVtLnJlbW92ZVJlc291cmNlKGUpLmNhdGNoKCgoKT0+e30pKSl9fSkpLDA9PT1mLmxlbmd0aClyZXR1cm47Y29uc3QgbD1hd2FpdCBvKGYpO3QodSk7Y29uc3QgZD1sLmZpbHRlcigocj0+XCJlcnJvclwiaW4gcikpLm1hcCgocj0+ci5lcnJvcikpO2lmKGQubGVuZ3RoPjApdGhyb3cgbmV3IGUoXCJzYXZlOnJlc291cmNlc1wiLFwiRmFpbGVkIHRvIHNhdmUgb25lIG9yIG1vcmUgcmVzb3VyY2VzXCIse2Vycm9yczpkfSl9YXN5bmMgZnVuY3Rpb24gYShlLG8pe2NvbnN0IHQ9ey4uLm51bGwhPW8/bzp7fSxjb21wcmVzczplLmNvbXByZXNzfSxzPWF3YWl0IHIoZS5yZXNvdXJjZS5wb3J0YWxJdGVtLmFkZFJlc291cmNlKGUucmVzb3VyY2UsZS5jb250ZW50LHQpKTtpZighMCE9PXMub2spdGhyb3cgZS5lcnJvcj8uKHMuZXJyb3IpLHMuZXJyb3I7ZS5maW5pc2g/LihlLnJlc291cmNlKX1hc3luYyBmdW5jdGlvbiBuKGUsbyl7Y29uc3QgdD1hd2FpdCByKGUucmVzb3VyY2UudXBkYXRlKGUuY29udGVudCxvKSk7aWYoITAhPT10Lm9rKXRocm93IGUuZXJyb3I/Lih0LmVycm9yKSx0LmVycm9yO2UuZmluaXNoPy4oZS5yZXNvdXJjZSl9ZXhwb3J0e3AgYXMgc2F2ZVJlc291cmNlc307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=