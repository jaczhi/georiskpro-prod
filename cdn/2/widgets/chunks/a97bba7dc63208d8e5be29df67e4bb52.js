"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["node_modules_arcgis_core_views_2d_layers_features_processors_HeatmapProcessor_js"],{

/***/ "./node_modules/@arcgis/core/chunks/vec4f64.js":
/*!*****************************************************!*\
  !*** ./node_modules/@arcgis/core/chunks/vec4f64.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "O": () => (/* binding */ _),
/* harmony export */   "U": () => (/* binding */ N),
/* harmony export */   "Z": () => (/* binding */ l),
/* harmony export */   "a": () => (/* binding */ u),
/* harmony export */   "b": () => (/* binding */ e),
/* harmony export */   "c": () => (/* binding */ n),
/* harmony export */   "d": () => (/* binding */ t),
/* harmony export */   "e": () => (/* binding */ i),
/* harmony export */   "f": () => (/* binding */ r),
/* harmony export */   "g": () => (/* binding */ c),
/* harmony export */   "h": () => (/* binding */ f),
/* harmony export */   "i": () => (/* binding */ O),
/* harmony export */   "j": () => (/* binding */ T),
/* harmony export */   "k": () => (/* binding */ U),
/* harmony export */   "o": () => (/* binding */ o),
/* harmony export */   "u": () => (/* binding */ s),
/* harmony export */   "v": () => (/* binding */ b),
/* harmony export */   "z": () => (/* binding */ a)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function n(){return[0,0,0,0]}function t(n){return[n[0],n[1],n[2],n[3]]}function r(n,t,r,e){return[n,t,r,e]}function e(t){const r=n(),e=Math.min(4,t.length);for(let n=0;n<e;++n)r[n]=t[n];return r}function u(n,t){return new Float64Array(n,t,4)}function a(){return n()}function o(){return r(1,1,1,1)}function s(){return r(1,0,0,0)}function i(){return r(0,1,0,0)}function c(){return r(0,0,1,0)}function f(){return r(0,0,0,1)}const l=a(),_=o(),N=s(),O=i(),T=c(),U=f(),b=Object.freeze(Object.defineProperty({__proto__:null,ONES:_,UNIT_W:U,UNIT_X:N,UNIT_Y:O,UNIT_Z:T,ZEROS:l,clone:t,create:n,createView:u,fromArray:e,fromValues:r,ones:o,unitW:f,unitX:s,unitY:i,unitZ:c,zeros:a},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ "./node_modules/@arcgis/core/renderers/support/heatmapUtils.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@arcgis/core/renderers/support/heatmapUtils.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MAGIC_KERNEL_DENSITY_RADIUS_INFLATION_FACTOR": () => (/* binding */ a),
/* harmony export */   "calculateHeatmapIntensityInfoReaders": () => (/* binding */ s),
/* harmony export */   "createHeatmapImageData": () => (/* binding */ h),
/* harmony export */   "createValueFunction": () => (/* binding */ y),
/* harmony export */   "createValueFunctionCursor": () => (/* binding */ d),
/* harmony export */   "drawHeatmap": () => (/* binding */ l),
/* harmony export */   "evaluateDensityKernel": () => (/* binding */ m),
/* harmony export */   "gaussianBlurRadiusPxToKernelDensityRadiusPt": () => (/* binding */ i),
/* harmony export */   "generateGradient": () => (/* binding */ u),
/* harmony export */   "kernelDensityRadiusPtToGaussianBlurRadiusPx": () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/screenUtils.js */ "./node_modules/@arcgis/core/core/screenUtils.js");
/* harmony import */ var _chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../chunks/vec4.js */ "./node_modules/@arcgis/core/chunks/vec4.js");
/* harmony import */ var _chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunks/vec4f64.js */ "./node_modules/@arcgis/core/chunks/vec4f64.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const a=2.4;function i(t){return (0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__.px2pt)(t*a)}function c(t){return (0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__.pt2px)(t)/a}function f(r,n,e,a){let{color:i,ratio:c}=n,{color:f,ratio:u}=e;if(u===c){const t=1e-6;1===u?c-=t:u+=t}const s=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.clamp)((a-c)/(u-c),0,1);(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.l)(r,i.toArray(),f.toArray(),s)}function u(t){const r=512,n=new Uint8ClampedArray(4*r);if(t=t.filter((({ratio:t})=>t>=0&&t<=1)).sort(((t,r)=>t.ratio-r.ratio)).map((({color:t,ratio:r})=>({color:t,ratio:Math.max(r,.001)}))),t.length<1)return n;let o=t[0],a=t[0],i=1;const c=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__.c)();for(let e=0;e<r;e++){const u=(e+.5)/r;for(;u>a.ratio&&i<t.length;)o=a,a=t[i++];f(c,o,a,u),n.set(c,4*e)}return n}function s(t,r,o,e){const{radius:a,fieldOffset:i,field:c}=r,f=Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__.pt2px)(a)),u=new Float64Array(o*e);let s,l=Number.NEGATIVE_INFINITY;const h=d(c,i),y=new Set;for(const n of t){const t=n.getCursor();for(;t.next();){const r=t.getObjectId();if(y.has(r))continue;y.add(r);const n=t.readLegacyPointGeometry(),a=128;if(n.x<-a||n.x>=o+a||n.y<-a||n.y>e+a)continue;const i=+h(t),c=Math.max(0,Math.round(n.x)-f),d=Math.max(0,Math.round(n.y)-f),g=Math.min(e,Math.round(n.y)+f),A=Math.min(o,Math.round(n.x)+f);for(let t=d;t<g;t++)for(let r=c;r<A;r++){const e=t*o+r,a=m(n.x-r,n.y-t,f);s=u[e]+=a*i,s>l&&(l=s)}}}return{matrix:u.buffer,max:l}}function l(t,r,n,o,e,a){t.canvas.width=t.canvas.height=r,t.clearRect(0,0,r,r);const i=t.getImageData(0,0,r,r);n&&o&&i.data.set(new Uint8ClampedArray(h(r,n,o,e,a))),t.putImageData(i,0,0)}function h(r,n,o,e,a){const i=new Uint32Array(r*r),c="buffer"in n?n:new Float64Array(n),f="buffer"in o?new Uint32Array(o.buffer):new Uint32Array(new Uint8Array(o).buffer),u=f.length/(a-e);for(let s=0;s<c.length;s++){const r=c[s],n=Math.floor((r-e)*u);i[s]=f[(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.clamp)(n,0,f.length-1)]}return i.buffer}function m(t,r,n){const o=Math.sqrt(t**2+r**2)/n;return o>1?0:3/(Math.PI*n**2)*(1-o**2)**2}function y(t,r){return"function"==typeof t?t:t?"string"==typeof r?r=>-1*+r[t]:n=>+n[t]+r:()=>1}function d(t,r){return null!=t?"string"==typeof r?r=>-1*+r.readAttribute(t):n=>+n.readAttribute(t)+r:t=>1}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/processors/BaseProcessor.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/processors/BaseProcessor.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_HandleOwner_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/HandleOwner.js */ "./node_modules/@arcgis/core/core/HandleOwner.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
let s=class extends _core_HandleOwner_js__WEBPACK_IMPORTED_MODULE_1__.HandleOwner{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({readOnly:!0})],s.prototype,"supportsTileUpdates",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({constructOnly:!0})],s.prototype,"remoteClient",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({constructOnly:!0})],s.prototype,"service",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)()],s.prototype,"spatialReference",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({constructOnly:!0})],s.prototype,"tileInfo",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({constructOnly:!0})],s.prototype,"tileStore",void 0),s=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.views.2d.layers.features.processors.BaseProcessor")],s);const p=s;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/processors/HeatmapProcessor.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/processors/HeatmapProcessor.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../core/accessorSupport/diffUtils.js */ "./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js");
/* harmony import */ var _renderers_support_heatmapUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../renderers/support/heatmapUtils.js */ "./node_modules/@arcgis/core/renderers/support/heatmapUtils.js");
/* harmony import */ var _engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../engine/webgl/definitions.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js");
/* harmony import */ var _BaseProcessor_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./BaseProcessor.js */ "./node_modules/@arcgis/core/views/2d/layers/features/processors/BaseProcessor.js");
/* harmony import */ var _support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../support/tileUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/tileUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class d{constructor(e,t){this.offset=e,this.extent=t}}function l(e){const t=e.key,s=new Map,r=256,i=_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_10__.TILE_SIZE,a=e.tileInfoView.tileInfo.isWrappable;return s.set((0,_support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__.getPow2NeighborKey)(t,-1,-1,a).id,new d([-i,-i],[i-r,i-r,i,i])),s.set((0,_support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__.getPow2NeighborKey)(t,0,-1,a).id,new d([0,-i],[0,i-r,i,i])),s.set((0,_support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__.getPow2NeighborKey)(t,1,-1,a).id,new d([i,-i],[0,i-r,r,i])),s.set((0,_support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__.getPow2NeighborKey)(t,-1,0,a).id,new d([-i,0],[i-r,0,i,i])),s.set((0,_support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__.getPow2NeighborKey)(t,1,0,a).id,new d([i,0],[0,0,r,i])),s.set((0,_support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__.getPow2NeighborKey)(t,-1,1,a).id,new d([-i,i],[i-r,0,i,r])),s.set((0,_support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__.getPow2NeighborKey)(t,0,1,a).id,new d([0,i],[0,0,i,r])),s.set((0,_support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__.getPow2NeighborKey)(t,1,1,a).id,new d([i,i],[0,0,r,r])),s}let p=class extends _BaseProcessor_js__WEBPACK_IMPORTED_MODULE_11__["default"]{constructor(){super(...arguments),this.type="heatmap",this._tileKeyToFeatureSets=new Map}initialize(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])}async update(e,t){const s=t.schema.processors[0];if("heatmap"!==s.type)return;(0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_8__.diff)(this._schema,s)&&(e.mesh=!0,this._schema=s)}onTileUpdate(e){for(const t of e.removed)this._tileKeyToFeatureSets.delete(t.key.id)}onTileClear(e){const t={clear:!0};return this._tileKeyToFeatureSets.delete(e.key.id),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:t})}async onTileMessage(e,s,r){this._tileKeyToFeatureSets.has(e.key.id)||this._tileKeyToFeatureSets.set(e.key.id,new Map);const o=this._tileKeyToFeatureSets.get(e.key.id);if(o&&null!=s.addOrUpdate&&s.addOrUpdate.hasFeatures&&o.set(s.addOrUpdate.instance,s),s.end){const s=[],o=l(e);this._tileKeyToFeatureSets.forEach(((r,i)=>{if(i===e.key.id)r.forEach((e=>(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.applySome)(e.addOrUpdate,(e=>s.push(e)))));else if(o.has(i)){const e=o.get(i),[a,n]=e.offset;r.forEach((e=>(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.applySome)(e.addOrUpdate,(e=>{const t=e.transform(a,n,1,1);s.push(t)}))))}}));const a=(0,_renderers_support_heatmapUtils_js__WEBPACK_IMPORTED_MODULE_9__.calculateHeatmapIntensityInfoReaders)(s,this._schema.mesh,512,512),n={tileKey:e.key.id,intensityInfo:a},d=[a.matrix];return this.remoteClient.invoke("tileRenderer.onTileData",n,{...r,transferList:d})}}onTileError(e,t,s){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:e.id,error:t},s)}};p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.views.2d.layers.features.processors.HeatmapProcessor")],p);const c=p;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/support/tileUtils.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/tileUtils.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getPow2NeighborKey": () => (/* binding */ o)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function o(o,l,c,r){const e=o.clone(),n=1<<e.level,t=e.col+l,w=e.row+c;return r&&t<0?(e.col=t+n,e.world-=1):t>=n?(e.col=t-n,e.world+=1):e.col=t,e.row=w,e}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYTk3YmJhN2RjNjMyMDhkOGU1YmUyOWRmNjdlNGJiNTIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGdCQUFnQixjQUFjLDRCQUE0QixvQkFBb0IsZ0JBQWdCLGNBQWMsbUNBQW1DLFlBQVksSUFBSSxjQUFjLFNBQVMsZ0JBQWdCLCtCQUErQixhQUFhLFdBQVcsYUFBYSxrQkFBa0IsYUFBYSxrQkFBa0IsYUFBYSxrQkFBa0IsYUFBYSxrQkFBa0IsYUFBYSxrQkFBa0IsaUZBQWlGLHdLQUF3SyxxQkFBcUIsZUFBZSxHQUFvSTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0p0MEI7QUFDQTtBQUNBO0FBQ0E7QUFDa00sWUFBWSxjQUFjLE9BQU8sMkRBQUMsTUFBTSxjQUFjLE9BQU8sMkRBQUMsTUFBTSxvQkFBb0IsSUFBSSxnQkFBZ0IsSUFBSSxnQkFBZ0IsR0FBRyxVQUFVLGFBQWEsZ0JBQWdCLFFBQVEseURBQUMsa0JBQWtCLGtEQUFDLDhCQUE4QixjQUFjLHlDQUF5QyxpQkFBaUIsUUFBUSxzREFBc0QsZ0JBQWdCLEtBQUssK0JBQStCLHdCQUF3QixzQkFBc0IsUUFBUSxxREFBQyxHQUFHLFlBQVksSUFBSSxLQUFLLGlCQUFpQixLQUFLLHNCQUFzQixjQUFjLHdCQUF3QixTQUFTLG9CQUFvQixNQUFNLCtCQUErQixnQkFBZ0IsMkRBQUMsNkJBQTZCLGlDQUFpQyx5QkFBeUIsa0JBQWtCLHNCQUFzQixLQUFLLFNBQVMsRUFBRSx3QkFBd0IscUJBQXFCLFNBQVMsMENBQTBDLDhDQUE4Qyw4SUFBOEksWUFBWSxJQUFJLGdCQUFnQixJQUFJLEtBQUssaUNBQWlDLHlCQUF5QixPQUFPLHVCQUF1Qix3QkFBd0Isc0RBQXNELGdDQUFnQyw0RUFBNEUsc0JBQXNCLHNLQUFzSyxZQUFZLFdBQVcsS0FBSyxtQ0FBbUMsT0FBTyx5REFBQyxrQkFBa0IsZ0JBQWdCLGtCQUFrQiwrQkFBK0IsMENBQTBDLGdCQUFnQiwrRUFBK0UsZ0JBQWdCLDBGQUFzYjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0ovOUU7QUFDQTtBQUNBO0FBQ0E7QUFDMmEsb0JBQW9CLDZEQUFDLENBQUMsY0FBYyxXQUFXLDBCQUEwQixTQUFTLHVCQUF1QiwwREFBMEQsNkJBQTZCLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxZQUFZLDJDQUEyQyx1REFBQyxFQUFFLHNGQUFDLEVBQUUsaUJBQWlCLHNDQUFzQyx1REFBQyxFQUFFLHNGQUFDLEVBQUUsaUJBQWlCLGlDQUFpQyx1REFBQyxFQUFFLHNGQUFDLHlDQUF5Qyx1REFBQyxFQUFFLHNGQUFDLEVBQUUsaUJBQWlCLGtDQUFrQyx1REFBQyxFQUFFLHNGQUFDLEVBQUUsaUJBQWlCLHFDQUFxQyx1REFBQyxFQUFFLHNGQUFDLCtEQUErRCxVQUErQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0pqaUM7QUFDQTtBQUNBO0FBQ0E7QUFDd3VCLFFBQVEsaUJBQWlCLDZCQUE2QixjQUFjLGdDQUFnQyxvRUFBQyx1Q0FBdUMsYUFBYSwwRUFBQyxtREFBbUQsMEVBQUMsK0NBQStDLDBFQUFDLCtDQUErQywwRUFBQywrQ0FBK0MsMEVBQUMsMkNBQTJDLDBFQUFDLCtDQUErQywwRUFBQywyQ0FBMkMsMEVBQUMsdUNBQXVDLG9CQUFvQiwwREFBQyxDQUFDLGNBQWMsMkVBQTJFLGFBQWEsNkVBQTZFLGtCQUFrQiwrQkFBK0IsNkJBQTZCLHdFQUFDLDZDQUE2QyxnQkFBZ0IscUVBQXFFLGVBQWUsU0FBUyxVQUFVLHVHQUF1RyxvQkFBb0IsRUFBRSwyQkFBMkIsMkZBQTJGLGlEQUFpRCw2RkFBNkYsa0JBQWtCLDRDQUE0Qyw4QkFBOEIseURBQUMsaUNBQWlDLGtCQUFrQixnQ0FBZ0MsY0FBYyx5REFBQyxvQkFBb0IsNkJBQTZCLFVBQVUsTUFBTSxHQUFHLFFBQVEsd0dBQUMsaUNBQWlDLGlDQUFpQyxjQUFjLDZEQUE2RCxvQkFBb0IsR0FBRyxtQkFBbUIsNERBQTRELHFCQUFxQixNQUFNLEVBQUUsdURBQUMsRUFBRSxzRkFBQyxrRUFBa0UsVUFBK0I7Ozs7Ozs7Ozs7Ozs7OztBQ0puckY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsbURBQW1ELG1GQUFtSCIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2NodW5rcy92ZWM0ZjY0LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3JlbmRlcmVycy9zdXBwb3J0L2hlYXRtYXBVdGlscy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9sYXllcnMvZmVhdHVyZXMvcHJvY2Vzc29ycy9CYXNlUHJvY2Vzc29yLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2xheWVycy9mZWF0dXJlcy9wcm9jZXNzb3JzL0hlYXRtYXBQcm9jZXNzb3IuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvbGF5ZXJzL2ZlYXR1cmVzL3N1cHBvcnQvdGlsZVV0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBuKCl7cmV0dXJuWzAsMCwwLDBdfWZ1bmN0aW9uIHQobil7cmV0dXJuW25bMF0sblsxXSxuWzJdLG5bM11dfWZ1bmN0aW9uIHIobix0LHIsZSl7cmV0dXJuW24sdCxyLGVdfWZ1bmN0aW9uIGUodCl7Y29uc3Qgcj1uKCksZT1NYXRoLm1pbig0LHQubGVuZ3RoKTtmb3IobGV0IG49MDtuPGU7KytuKXJbbl09dFtuXTtyZXR1cm4gcn1mdW5jdGlvbiB1KG4sdCl7cmV0dXJuIG5ldyBGbG9hdDY0QXJyYXkobix0LDQpfWZ1bmN0aW9uIGEoKXtyZXR1cm4gbigpfWZ1bmN0aW9uIG8oKXtyZXR1cm4gcigxLDEsMSwxKX1mdW5jdGlvbiBzKCl7cmV0dXJuIHIoMSwwLDAsMCl9ZnVuY3Rpb24gaSgpe3JldHVybiByKDAsMSwwLDApfWZ1bmN0aW9uIGMoKXtyZXR1cm4gcigwLDAsMSwwKX1mdW5jdGlvbiBmKCl7cmV0dXJuIHIoMCwwLDAsMSl9Y29uc3QgbD1hKCksXz1vKCksTj1zKCksTz1pKCksVD1jKCksVT1mKCksYj1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsT05FUzpfLFVOSVRfVzpVLFVOSVRfWDpOLFVOSVRfWTpPLFVOSVRfWjpULFpFUk9TOmwsY2xvbmU6dCxjcmVhdGU6bixjcmVhdGVWaWV3OnUsZnJvbUFycmF5OmUsZnJvbVZhbHVlczpyLG9uZXM6byx1bml0VzpmLHVuaXRYOnMsdW5pdFk6aSx1bml0WjpjLHplcm9zOmF9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pKTtleHBvcnR7XyBhcyBPLE4gYXMgVSxsIGFzIFosdSBhcyBhLGUgYXMgYixuIGFzIGMsdCBhcyBkLGkgYXMgZSxyIGFzIGYsYyBhcyBnLGYgYXMgaCxPIGFzIGksVCBhcyBqLFUgYXMgayxvLHMgYXMgdSxiIGFzIHYsYSBhcyB6fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7Y2xhbXAgYXMgdH1mcm9tXCIuLi8uLi9jb3JlL21hdGhVdGlscy5qc1wiO2ltcG9ydHtweDJwdCBhcyByLHB0MnB4IGFzIG59ZnJvbVwiLi4vLi4vY29yZS9zY3JlZW5VdGlscy5qc1wiO2ltcG9ydHtsIGFzIG99ZnJvbVwiLi4vLi4vY2h1bmtzL3ZlYzQuanNcIjtpbXBvcnR7YyBhcyBlfWZyb21cIi4uLy4uL2NodW5rcy92ZWM0ZjY0LmpzXCI7Y29uc3QgYT0yLjQ7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gcih0KmEpfWZ1bmN0aW9uIGModCl7cmV0dXJuIG4odCkvYX1mdW5jdGlvbiBmKHIsbixlLGEpe2xldHtjb2xvcjppLHJhdGlvOmN9PW4se2NvbG9yOmYscmF0aW86dX09ZTtpZih1PT09Yyl7Y29uc3QgdD0xZS02OzE9PT11P2MtPXQ6dSs9dH1jb25zdCBzPXQoKGEtYykvKHUtYyksMCwxKTtvKHIsaS50b0FycmF5KCksZi50b0FycmF5KCkscyl9ZnVuY3Rpb24gdSh0KXtjb25zdCByPTUxMixuPW5ldyBVaW50OENsYW1wZWRBcnJheSg0KnIpO2lmKHQ9dC5maWx0ZXIoKCh7cmF0aW86dH0pPT50Pj0wJiZ0PD0xKSkuc29ydCgoKHQscik9PnQucmF0aW8tci5yYXRpbykpLm1hcCgoKHtjb2xvcjp0LHJhdGlvOnJ9KT0+KHtjb2xvcjp0LHJhdGlvOk1hdGgubWF4KHIsLjAwMSl9KSkpLHQubGVuZ3RoPDEpcmV0dXJuIG47bGV0IG89dFswXSxhPXRbMF0saT0xO2NvbnN0IGM9ZSgpO2ZvcihsZXQgZT0wO2U8cjtlKyspe2NvbnN0IHU9KGUrLjUpL3I7Zm9yKDt1PmEucmF0aW8mJmk8dC5sZW5ndGg7KW89YSxhPXRbaSsrXTtmKGMsbyxhLHUpLG4uc2V0KGMsNCplKX1yZXR1cm4gbn1mdW5jdGlvbiBzKHQscixvLGUpe2NvbnN0e3JhZGl1czphLGZpZWxkT2Zmc2V0OmksZmllbGQ6Y309cixmPU1hdGgucm91bmQobihhKSksdT1uZXcgRmxvYXQ2NEFycmF5KG8qZSk7bGV0IHMsbD1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7Y29uc3QgaD1kKGMsaSkseT1uZXcgU2V0O2Zvcihjb25zdCBuIG9mIHQpe2NvbnN0IHQ9bi5nZXRDdXJzb3IoKTtmb3IoO3QubmV4dCgpOyl7Y29uc3Qgcj10LmdldE9iamVjdElkKCk7aWYoeS5oYXMocikpY29udGludWU7eS5hZGQocik7Y29uc3Qgbj10LnJlYWRMZWdhY3lQb2ludEdlb21ldHJ5KCksYT0xMjg7aWYobi54PC1hfHxuLng+PW8rYXx8bi55PC1hfHxuLnk+ZSthKWNvbnRpbnVlO2NvbnN0IGk9K2godCksYz1NYXRoLm1heCgwLE1hdGgucm91bmQobi54KS1mKSxkPU1hdGgubWF4KDAsTWF0aC5yb3VuZChuLnkpLWYpLGc9TWF0aC5taW4oZSxNYXRoLnJvdW5kKG4ueSkrZiksQT1NYXRoLm1pbihvLE1hdGgucm91bmQobi54KStmKTtmb3IobGV0IHQ9ZDt0PGc7dCsrKWZvcihsZXQgcj1jO3I8QTtyKyspe2NvbnN0IGU9dCpvK3IsYT1tKG4ueC1yLG4ueS10LGYpO3M9dVtlXSs9YSppLHM+bCYmKGw9cyl9fX1yZXR1cm57bWF0cml4OnUuYnVmZmVyLG1heDpsfX1mdW5jdGlvbiBsKHQscixuLG8sZSxhKXt0LmNhbnZhcy53aWR0aD10LmNhbnZhcy5oZWlnaHQ9cix0LmNsZWFyUmVjdCgwLDAscixyKTtjb25zdCBpPXQuZ2V0SW1hZ2VEYXRhKDAsMCxyLHIpO24mJm8mJmkuZGF0YS5zZXQobmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGgocixuLG8sZSxhKSkpLHQucHV0SW1hZ2VEYXRhKGksMCwwKX1mdW5jdGlvbiBoKHIsbixvLGUsYSl7Y29uc3QgaT1uZXcgVWludDMyQXJyYXkocipyKSxjPVwiYnVmZmVyXCJpbiBuP246bmV3IEZsb2F0NjRBcnJheShuKSxmPVwiYnVmZmVyXCJpbiBvP25ldyBVaW50MzJBcnJheShvLmJ1ZmZlcik6bmV3IFVpbnQzMkFycmF5KG5ldyBVaW50OEFycmF5KG8pLmJ1ZmZlciksdT1mLmxlbmd0aC8oYS1lKTtmb3IobGV0IHM9MDtzPGMubGVuZ3RoO3MrKyl7Y29uc3Qgcj1jW3NdLG49TWF0aC5mbG9vcigoci1lKSp1KTtpW3NdPWZbdChuLDAsZi5sZW5ndGgtMSldfXJldHVybiBpLmJ1ZmZlcn1mdW5jdGlvbiBtKHQscixuKXtjb25zdCBvPU1hdGguc3FydCh0KioyK3IqKjIpL247cmV0dXJuIG8+MT8wOjMvKE1hdGguUEkqbioqMikqKDEtbyoqMikqKjJ9ZnVuY3Rpb24geSh0LHIpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dDp0P1wic3RyaW5nXCI9PXR5cGVvZiByP3I9Pi0xKityW3RdOm49PituW3RdK3I6KCk9PjF9ZnVuY3Rpb24gZCh0LHIpe3JldHVybiBudWxsIT10P1wic3RyaW5nXCI9PXR5cGVvZiByP3I9Pi0xKityLnJlYWRBdHRyaWJ1dGUodCk6bj0+K24ucmVhZEF0dHJpYnV0ZSh0KStyOnQ9PjF9ZXhwb3J0e2EgYXMgTUFHSUNfS0VSTkVMX0RFTlNJVFlfUkFESVVTX0lORkxBVElPTl9GQUNUT1IscyBhcyBjYWxjdWxhdGVIZWF0bWFwSW50ZW5zaXR5SW5mb1JlYWRlcnMsaCBhcyBjcmVhdGVIZWF0bWFwSW1hZ2VEYXRhLHkgYXMgY3JlYXRlVmFsdWVGdW5jdGlvbixkIGFzIGNyZWF0ZVZhbHVlRnVuY3Rpb25DdXJzb3IsbCBhcyBkcmF3SGVhdG1hcCxtIGFzIGV2YWx1YXRlRGVuc2l0eUtlcm5lbCxpIGFzIGdhdXNzaWFuQmx1clJhZGl1c1B4VG9LZXJuZWxEZW5zaXR5UmFkaXVzUHQsdSBhcyBnZW5lcmF0ZUdyYWRpZW50LGMgYXMga2VybmVsRGVuc2l0eVJhZGl1c1B0VG9HYXVzc2lhbkJsdXJSYWRpdXNQeH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0e0hhbmRsZU93bmVyIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9IYW5kbGVPd25lci5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyB0fWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgb31mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7bGV0IHM9Y2xhc3MgZXh0ZW5kcyBye2luaXRpYWxpemUoKXt9ZGVzdHJveSgpe31nZXQgc3VwcG9ydHNUaWxlVXBkYXRlcygpe3JldHVybiExfWdldCBzcGF0aWFsUmVmZXJlbmNlKCl7Y29uc3QgZT10aGlzLmdldChcInRpbGVTdG9yZS50aWxlU2NoZW1lLnNwYXRpYWxSZWZlcmVuY2VcIik7cmV0dXJuIGUmJmUudG9KU09OKCl8fG51bGx9fTtlKFt0KHtyZWFkT25seTohMH0pXSxzLnByb3RvdHlwZSxcInN1cHBvcnRzVGlsZVVwZGF0ZXNcIixudWxsKSxlKFt0KHtjb25zdHJ1Y3RPbmx5OiEwfSldLHMucHJvdG90eXBlLFwicmVtb3RlQ2xpZW50XCIsdm9pZCAwKSxlKFt0KHtjb25zdHJ1Y3RPbmx5OiEwfSldLHMucHJvdG90eXBlLFwic2VydmljZVwiLHZvaWQgMCksZShbdCgpXSxzLnByb3RvdHlwZSxcInNwYXRpYWxSZWZlcmVuY2VcIixudWxsKSxlKFt0KHtjb25zdHJ1Y3RPbmx5OiEwfSldLHMucHJvdG90eXBlLFwidGlsZUluZm9cIix2b2lkIDApLGUoW3Qoe2NvbnN0cnVjdE9ubHk6ITB9KV0scy5wcm90b3R5cGUsXCJ0aWxlU3RvcmVcIix2b2lkIDApLHM9ZShbbyhcImVzcmkudmlld3MuMmQubGF5ZXJzLmZlYXR1cmVzLnByb2Nlc3NvcnMuQmFzZVByb2Nlc3NvclwiKV0scyk7Y29uc3QgcD1zO2V4cG9ydHtwIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7YXBwbHlTb21lIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9tYXliZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBzfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7ZGlmZiBhcyByfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RpZmZVdGlscy5qc1wiO2ltcG9ydHtjYWxjdWxhdGVIZWF0bWFwSW50ZW5zaXR5SW5mb1JlYWRlcnMgYXMgaX1mcm9tXCIuLi8uLi8uLi8uLi8uLi9yZW5kZXJlcnMvc3VwcG9ydC9oZWF0bWFwVXRpbHMuanNcIjtpbXBvcnR7VElMRV9TSVpFIGFzIG99ZnJvbVwiLi4vLi4vLi4vZW5naW5lL3dlYmdsL2RlZmluaXRpb25zLmpzXCI7aW1wb3J0IGEgZnJvbVwiLi9CYXNlUHJvY2Vzc29yLmpzXCI7aW1wb3J0e2dldFBvdzJOZWlnaGJvcktleSBhcyBufWZyb21cIi4uL3N1cHBvcnQvdGlsZVV0aWxzLmpzXCI7Y2xhc3MgZHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMub2Zmc2V0PWUsdGhpcy5leHRlbnQ9dH19ZnVuY3Rpb24gbChlKXtjb25zdCB0PWUua2V5LHM9bmV3IE1hcCxyPTI1NixpPW8sYT1lLnRpbGVJbmZvVmlldy50aWxlSW5mby5pc1dyYXBwYWJsZTtyZXR1cm4gcy5zZXQobih0LC0xLC0xLGEpLmlkLG5ldyBkKFstaSwtaV0sW2ktcixpLXIsaSxpXSkpLHMuc2V0KG4odCwwLC0xLGEpLmlkLG5ldyBkKFswLC1pXSxbMCxpLXIsaSxpXSkpLHMuc2V0KG4odCwxLC0xLGEpLmlkLG5ldyBkKFtpLC1pXSxbMCxpLXIscixpXSkpLHMuc2V0KG4odCwtMSwwLGEpLmlkLG5ldyBkKFstaSwwXSxbaS1yLDAsaSxpXSkpLHMuc2V0KG4odCwxLDAsYSkuaWQsbmV3IGQoW2ksMF0sWzAsMCxyLGldKSkscy5zZXQobih0LC0xLDEsYSkuaWQsbmV3IGQoWy1pLGldLFtpLXIsMCxpLHJdKSkscy5zZXQobih0LDAsMSxhKS5pZCxuZXcgZChbMCxpXSxbMCwwLGkscl0pKSxzLnNldChuKHQsMSwxLGEpLmlkLG5ldyBkKFtpLGldLFswLDAscixyXSkpLHN9bGV0IHA9Y2xhc3MgZXh0ZW5kcyBhe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnR5cGU9XCJoZWF0bWFwXCIsdGhpcy5fdGlsZUtleVRvRmVhdHVyZVNldHM9bmV3IE1hcH1pbml0aWFsaXplKCl7dGhpcy5oYW5kbGVzLmFkZChbdGhpcy50aWxlU3RvcmUub24oXCJ1cGRhdGVcIix0aGlzLm9uVGlsZVVwZGF0ZS5iaW5kKHRoaXMpKV0pfWFzeW5jIHVwZGF0ZShlLHQpe2NvbnN0IHM9dC5zY2hlbWEucHJvY2Vzc29yc1swXTtpZihcImhlYXRtYXBcIiE9PXMudHlwZSlyZXR1cm47cih0aGlzLl9zY2hlbWEscykmJihlLm1lc2g9ITAsdGhpcy5fc2NoZW1hPXMpfW9uVGlsZVVwZGF0ZShlKXtmb3IoY29uc3QgdCBvZiBlLnJlbW92ZWQpdGhpcy5fdGlsZUtleVRvRmVhdHVyZVNldHMuZGVsZXRlKHQua2V5LmlkKX1vblRpbGVDbGVhcihlKXtjb25zdCB0PXtjbGVhcjohMH07cmV0dXJuIHRoaXMuX3RpbGVLZXlUb0ZlYXR1cmVTZXRzLmRlbGV0ZShlLmtleS5pZCksdGhpcy5yZW1vdGVDbGllbnQuaW52b2tlKFwidGlsZVJlbmRlcmVyLm9uVGlsZURhdGFcIix7dGlsZUtleTplLmlkLGRhdGE6dH0pfWFzeW5jIG9uVGlsZU1lc3NhZ2UoZSxzLHIpe3RoaXMuX3RpbGVLZXlUb0ZlYXR1cmVTZXRzLmhhcyhlLmtleS5pZCl8fHRoaXMuX3RpbGVLZXlUb0ZlYXR1cmVTZXRzLnNldChlLmtleS5pZCxuZXcgTWFwKTtjb25zdCBvPXRoaXMuX3RpbGVLZXlUb0ZlYXR1cmVTZXRzLmdldChlLmtleS5pZCk7aWYobyYmbnVsbCE9cy5hZGRPclVwZGF0ZSYmcy5hZGRPclVwZGF0ZS5oYXNGZWF0dXJlcyYmby5zZXQocy5hZGRPclVwZGF0ZS5pbnN0YW5jZSxzKSxzLmVuZCl7Y29uc3Qgcz1bXSxvPWwoZSk7dGhpcy5fdGlsZUtleVRvRmVhdHVyZVNldHMuZm9yRWFjaCgoKHIsaSk9PntpZihpPT09ZS5rZXkuaWQpci5mb3JFYWNoKChlPT50KGUuYWRkT3JVcGRhdGUsKGU9PnMucHVzaChlKSkpKSk7ZWxzZSBpZihvLmhhcyhpKSl7Y29uc3QgZT1vLmdldChpKSxbYSxuXT1lLm9mZnNldDtyLmZvckVhY2goKGU9PnQoZS5hZGRPclVwZGF0ZSwoZT0+e2NvbnN0IHQ9ZS50cmFuc2Zvcm0oYSxuLDEsMSk7cy5wdXNoKHQpfSkpKSl9fSkpO2NvbnN0IGE9aShzLHRoaXMuX3NjaGVtYS5tZXNoLDUxMiw1MTIpLG49e3RpbGVLZXk6ZS5rZXkuaWQsaW50ZW5zaXR5SW5mbzphfSxkPVthLm1hdHJpeF07cmV0dXJuIHRoaXMucmVtb3RlQ2xpZW50Lmludm9rZShcInRpbGVSZW5kZXJlci5vblRpbGVEYXRhXCIsbix7Li4ucix0cmFuc2Zlckxpc3Q6ZH0pfX1vblRpbGVFcnJvcihlLHQscyl7cmV0dXJuIHRoaXMucmVtb3RlQ2xpZW50Lmludm9rZShcInRpbGVSZW5kZXJlci5vblRpbGVFcnJvclwiLHt0aWxlS2V5OmUuaWQsZXJyb3I6dH0scyl9fTtwPWUoW3MoXCJlc3JpLnZpZXdzLjJkLmxheWVycy5mZWF0dXJlcy5wcm9jZXNzb3JzLkhlYXRtYXBQcm9jZXNzb3JcIildLHApO2NvbnN0IGM9cDtleHBvcnR7YyBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBvKG8sbCxjLHIpe2NvbnN0IGU9by5jbG9uZSgpLG49MTw8ZS5sZXZlbCx0PWUuY29sK2wsdz1lLnJvdytjO3JldHVybiByJiZ0PDA/KGUuY29sPXQrbixlLndvcmxkLT0xKTp0Pj1uPyhlLmNvbD10LW4sZS53b3JsZCs9MSk6ZS5jb2w9dCxlLnJvdz13LGV9ZXhwb3J0e28gYXMgZ2V0UG93Mk5laWdoYm9yS2V5fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==