"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[5122],{69666:(t,e,n)=>{function r(){return[0,0]}function o(t,e){return[t,e]}function i(t,e){return new Float64Array(t,e,2)}function s(){return o(1,1)}function c(){return o(1,0)}function a(){return o(0,1)}n.d(e,{a:()=>r,c:()=>i,f:()=>o});const l=s(),u=c(),f=a();Object.freeze(Object.defineProperty({__proto__:null,ONES:l,UNIT_X:u,UNIT_Y:f,ZEROS:[0,0],clone:function(t){return[t[0],t[1]]},create:r,createView:i,fromArray:function(t){const e=[0,0],n=Math.min(2,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e},fromValues:o,ones:s,unitX:c,unitY:a,zeros:function(){return[0,0]}},Symbol.toStringTag,{value:"Module"}))},67262:(t,e,n)=>{n.d(e,{d:()=>i});var r=n(19431),o=n(35914);function i(t,e,n){const i=Array.isArray(t),u=i?t.length/e:t.byteLength/(4*e),f=i?t:new Uint32Array(t,0,u*e),g=n?.minReduction??0,d=n?.originalIndices||null,T=d?d.length:0,A=n?.componentOffsets||null;let I=0;if(A)for(let t=0;t<A.length-1;t++){const e=A[t+1]-A[t];e>I&&(I=e)}else I=u;const O=Math.floor(1.1*I)+1;(null==l||l.length<2*O)&&(l=new Uint32Array((0,r.Sf)(2*O)));for(let t=0;t<2*O;t++)l[t]=0;let N=0;const E=!!A&&!!d,p=E?T:u;let S=(0,o.$z)(u);const h=new Uint32Array(T),m=1.96;let R=0!==g?Math.ceil(4*m*m/(g*g)*g*(1-g)):p,L=1,w=A?A[1]:p;for(let t=0;t<p;t++){if(t===R){const e=1-N/t;if(e+m*Math.sqrt(e*(1-e)/t)<g)return null;R*=2}if(t===w){for(let t=0;t<2*O;t++)l[t]=0;if(d)for(let t=A[L-1];t<A[L];t++)h[t]=S[d[t]];w=A[++L]}const n=E?d[t]:t,r=n*e,o=a(f,r,e);let i=o%O,c=N;for(;0!==l[2*i+1];){if(l[2*i]===o){const t=l[2*i+1]-1;if(s(f,r,t*e,e)){c=S[t];break}}i++,i>=O&&(i-=O)}c===N&&(l[2*i]=o,l[2*i+1]=n+1,N++),S[n]=c}if(0!==g&&1-N/u<g)return null;if(E){for(let t=A[L-1];t<h.length;t++)h[t]=S[d[t]];S=(0,o.mi)(h)}const D=i?new Array(N):new Uint32Array(N*e);N=0;for(let t=0;t<p;t++)S[t]===N&&(c(f,(E?d[t]:t)*e,D,N*e,e),N++);if(d&&!E){const t=new Uint32Array(T);for(let e=0;e<t.length;e++)t[e]=S[d[e]];S=(0,o.mi)(t)}return{buffer:Array.isArray(D)?D:D.buffer,indices:S,uniqueCount:N}}function s(t,e,n,r){for(let o=0;o<r;o++)if(t[e+o]!==t[n+o])return!1;return!0}function c(t,e,n,r,o){for(let i=0;i<o;i++)n[r+i]=t[e+i]}function a(t,e,n){let r=0;for(let o=0;o<n;o++)r=t[e+o]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let l=null},95397:(t,e,n)=>{n.d(e,{K:()=>i});var r=n(91907),o=n(41163);function i(t,e=0){const n=t.stride;return Array.from(t.fields.keys()).filter((e=>{const n=t.fields.get(e)?.optional;return!(n&&n.glPadding)})).map((r=>{const i=t.fields.get(r),c=i.constructor.ElementCount,a=s(i.constructor.ElementType),l=i.offset,u=!(!i.optional||!i.optional.glNormalized);return new o.G(r,c,a,l,n,u,e)}))}function s(t){const e=c[t];if(e)return e;throw new Error("BufferType not supported in WebGL")}const c={u8:r.g.UNSIGNED_BYTE,u16:r.g.UNSIGNED_SHORT,u32:r.g.UNSIGNED_INT,i8:r.g.BYTE,i16:r.g.SHORT,i32:r.g.INT,f32:r.g.FLOAT}},21414:(t,e,n)=>{var r;n.d(e,{T:()=>r}),function(t){t.POSITION="position",t.NORMAL="normal",t.NORMALCOMPRESSED="normalCompressed",t.UV0="uv0",t.AUXPOS1="auxpos1",t.AUXPOS2="auxpos2",t.COLOR="color",t.SYMBOLCOLOR="symbolColor",t.SIZE="size",t.TANGENT="tangent",t.OFFSET="offset",t.SUBDIVISIONFACTOR="subdivisionFactor",t.COLORFEATUREATTRIBUTE="colorFeatureAttribute",t.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",t.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",t.DISTANCETOSTART="distanceToStart",t.UVMAPSPACE="uvMapSpace",t.BOUNDINGRECT="boundingRect",t.UVREGION="uvRegion",t.PROFILERIGHT="profileRight",t.PROFILEUP="profileUp",t.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",t.FEATUREVALUE="featureValue",t.MODELORIGINHI="modelOriginHi",t.MODELORIGINLO="modelOriginLo",t.MODEL="model",t.MODELNORMAL="modelNormal",t.INSTANCECOLOR="instanceColor",t.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",t.LOCALTRANSFORM="localTransform",t.GLOBALTRANSFORM="globalTransform",t.BOUNDINGSPHERE="boundingSphere",t.MODELORIGIN="modelOrigin",t.MODELSCALEFACTORS="modelScaleFactors",t.FEATUREATTRIBUTE="featureAttribute",t.STATE="state",t.LODLEVEL="lodLevel",t.POSITION0="position0",t.POSITION1="position1",t.NORMALA="normalA",t.NORMALB="normalB",t.COMPONENTINDEX="componentIndex",t.VARIANTOFFSET="variantOffset",t.VARIANTSTROKE="variantStroke",t.VARIANTEXTENSION="variantExtension",t.U8PADDING="u8padding",t.U16PADDING="u16padding",t.SIDENESS="sideness",t.START="start",t.END="end",t.UP="up",t.EXTRUDE="extrude",t.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",t.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(r||(r={}))},1844:(t,e,n)=>{n.r(e),n.d(e,{default:()=>a});var r=n(44685);function o(t,e){return e.push(t.buffer),{buffer:t.buffer,layout:new r.Gw(t.layout)}}var i=n(82976),s=n(11591),c=n(73453);class a{async extract(t){const e=l(t),n=(0,c.Kl)(e),r=[e.data.buffer];return{result:u(n,r),transferList:r}}async extractComponentsEdgeLocations(t){const e=l(t),n=(0,c.kY)(e.data,e.skipDeduplicate,e.indices,e.indicesLength),r=[];return{result:o((0,s.n)(n,g,d).regular.instancesData,r),transferList:r}}async extractEdgeLocations(t){const e=l(t),n=(0,c.kY)(e.data,e.skipDeduplicate,e.indices,e.indicesLength),r=[];return{result:o((0,s.n)(n,f,d).regular.instancesData,r),transferList:r}}}function l(t){return{data:i.tf.createView(t.dataBuffer),indices:"Uint32Array"===t.indicesType?new Uint32Array(t.indices):"Uint16Array"===t.indicesType?new Uint16Array(t.indices):t.indices,indicesLength:t.indicesLength,writerSettings:t.writerSettings,skipDeduplicate:t.skipDeduplicate}}function u(t,e){return e.push(t.regular.lodInfo.lengths.buffer),e.push(t.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:o(t.regular.instancesData,e),lodInfo:{lengths:t.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:o(t.silhouette.instancesData,e),lodInfo:{lengths:t.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:t.averageEdgeLength}}const f=new class{allocate(t){return c.Yr.createBuffer(t)}trim(t,e){return t.slice(0,e)}write(t,e,n){t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1)}},g=new class{allocate(t){return c.n_.createBuffer(t)}trim(t,e){return t.slice(0,e)}write(t,e,n){t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex)}},d={allocate:()=>null,write:()=>{},trim:()=>null}},82976:(t,e,n)=>{n.d(e,{Hr:()=>u,dG:()=>l,tf:()=>s});var r=n(95397),o=n(44685),i=n(21414);const s=(0,o.U$)().vec3f(i.T.POSITION).u16(i.T.COMPONENTINDEX).u16(i.T.U16PADDING),c=(0,o.U$)().vec2u8(i.T.SIDENESS),a=((0,r.K)(c),(0,o.U$)().vec3f(i.T.POSITION0).vec3f(i.T.POSITION1).u16(i.T.COMPONENTINDEX).u8(i.T.VARIANTOFFSET,{glNormalized:!0}).u8(i.T.VARIANTSTROKE).u8(i.T.VARIANTEXTENSION,{glNormalized:!0}).u8(i.T.U8PADDING,{glPadding:!0}).u16(i.T.U16PADDING,{glPadding:!0})),l=a.clone().vec3f(i.T.NORMAL),u=a.clone().vec3f(i.T.NORMALA).vec3f(i.T.NORMALB);new Map([[i.T.POSITION0,0],[i.T.POSITION1,1],[i.T.COMPONENTINDEX,2],[i.T.VARIANTOFFSET,3],[i.T.VARIANTSTROKE,4],[i.T.VARIANTEXTENSION,5],[i.T.NORMAL,6],[i.T.NORMALA,6],[i.T.NORMALB,7],[i.T.SIDENESS,8]])},11591:(t,e,n)=>{n.d(e,{n:()=>u});var r=n(7753),o=n(19431),i=n(6766),s=n(8909);const c=-1;var a,l;function u(t,e,n,s=O){const a=t.vertices.position,l=t.vertices.componentIndex,u=(0,o.Vl)(s.anglePlanar),I=(0,o.Vl)(s.angleSignificantEdge),N=Math.cos(I),E=Math.cos(u),p=A.edge,S=p.position0,h=p.position1,m=p.faceNormal0,R=p.faceNormal1,L=T(t),w=function(t){const e=t.faces.length/3,n=t.faces,r=t.neighbors;let o=0;for(let t=0;t<e;t++){const e=r[3*t],i=r[3*t+1],s=r[3*t+2],a=n[3*t],l=n[3*t+1],u=n[3*t+2];o+=e===c||a<l?1:0,o+=i===c||l<u?1:0,o+=s===c||u<a?1:0}const i=new Int32Array(4*o);let s=0;for(let t=0;t<e;t++){const e=r[3*t],o=r[3*t+1],a=r[3*t+2],l=n[3*t],u=n[3*t+1],f=n[3*t+2];(e===c||l<u)&&(i[s++]=l,i[s++]=u,i[s++]=t,i[s++]=e),(o===c||u<f)&&(i[s++]=u,i[s++]=f,i[s++]=t,i[s++]=o),(a===c||f<l)&&(i[s++]=f,i[s++]=l,i[s++]=t,i[s++]=a)}return i}(t),D=w.length/4,U=e.allocate(D);let y=0;const v=D,P=n.allocate(v);let b=0,M=0,V=0;const C=(0,r.w6)(0,D),F=new Float32Array(D);F.forEach(((t,e,n)=>{a.getVec(w[4*e],S),a.getVec(w[4*e+1],h),n[e]=(0,i.i)(S,h)})),C.sort(((t,e)=>F[e]-F[t]));const B=new Array,G=new Array;for(let t=0;t<D;t++){const r=C[t],o=F[r],s=w[4*r],T=w[4*r+1],A=w[4*r+2],I=w[4*r+3],O=I===c;if(a.getVec(s,S),a.getVec(T,h),O)(0,i.s)(m,L[3*A],L[3*A+1],L[3*A+2]),(0,i.c)(R,m),p.componentIndex=l.get(s),p.cosAngle=(0,i.e)(m,R);else{if((0,i.s)(m,L[3*A],L[3*A+1],L[3*A+2]),(0,i.s)(R,L[3*I],L[3*I+1],L[3*I+2]),p.componentIndex=l.get(s),p.cosAngle=(0,i.e)(m,R),g(p,E))continue;p.cosAngle<-.9999&&(0,i.c)(R,m)}M+=o,V++,O||f(p,N)?(e.write(U,y++,p),B.push(o)):d(p,u)&&(n.write(P,b++,p),G.push(o))}const _=new Float32Array(B.reverse()),x=new Float32Array(G.reverse());return{regular:{instancesData:e.trim(U,y),lodInfo:{lengths:_}},silhouette:{instancesData:n.trim(P,b),lodInfo:{lengths:x}},averageEdgeLength:M/V}}function f(t,e){return t.cosAngle<e}function g(t,e){return t.cosAngle>e}function d(t,e){const n=(0,o.ZF)(t.cosAngle),r=A.fwd,s=A.ortho;return(0,i.r)(r,t.position1,t.position0),n*((0,i.e)((0,i.f)(s,t.faceNormal0,t.faceNormal1),r)>0?-1:1)>e}function T(t){const e=t.faces.length/3,n=t.vertices.position,r=t.faces,o=I.v0,s=I.v1,c=I.v2,a=new Float32Array(3*e);for(let t=0;t<e;t++){const e=r[3*t],l=r[3*t+1],u=r[3*t+2];n.getVec(e,o),n.getVec(l,s),n.getVec(u,c),(0,i.b)(s,s,o),(0,i.b)(c,c,o),(0,i.f)(o,s,c),(0,i.n)(o,o),a[3*t]=o[0],a[3*t+1]=o[1],a[3*t+2]=o[2]}return a}(l=a||(a={}))[l.SOLID=0]="SOLID",l[l.SKETCH=1]="SKETCH";const A={edge:{position0:(0,s.c)(),position1:(0,s.c)(),faceNormal0:(0,s.c)(),faceNormal1:(0,s.c)(),componentIndex:0,cosAngle:0},ortho:(0,s.c)(),fwd:(0,s.c)()},I={v0:(0,s.c)(),v1:(0,s.c)(),v2:(0,s.c)()},O={anglePlanar:4,angleSignificantEdge:35}},73453:(t,e,n)=>{n.d(e,{Kl:()=>L,n_:()=>P,kY:()=>w,Yr:()=>v});var r=n(67262);function o(t,e,n){const r=e/3,o=new Uint32Array(n+1),i=new Uint32Array(n+1),s=(t,e)=>{t<e?o[t+1]++:i[e+1]++};for(let e=0;e<r;e++){const n=t[3*e],r=t[3*e+1],o=t[3*e+2];s(n,r),s(r,o),s(o,n)}let c=0,a=0;for(let t=0;t<n;t++){const e=o[t+1],n=i[t+1];o[t+1]=c,i[t+1]=a,c+=e,a+=n}const l=new Uint32Array(6*r),u=o[n],f=(t,e,n)=>{if(t<e){const r=o[t+1]++;l[2*r]=e,l[2*r+1]=n}else{const r=i[e+1]++;l[2*u+2*r]=t,l[2*u+2*r+1]=n}};for(let e=0;e<r;e++){const n=t[3*e],r=t[3*e+1],o=t[3*e+2];f(n,r,e),f(r,o,e),f(o,n,e)}const g=(t,e)=>{const n=2*t,r=e-t;for(let t=1;t<r;t++){const e=l[n+2*t],r=l[n+2*t+1];let o=t-1;for(;o>=0&&l[n+2*o]>e;o--)l[n+2*o+2]=l[n+2*o],l[n+2*o+3]=l[n+2*o+1];l[n+2*o+2]=e,l[n+2*o+3]=r}};for(let t=0;t<n;t++)g(o[t],o[t+1]),g(u+i[t],u+i[t+1]);const d=new Int32Array(3*r),T=(e,n)=>e===t[3*n]?0:e===t[3*n+1]?1:e===t[3*n+2]?2:-1,A=(t,e)=>{const n=T(t,e);d[3*e+n]=-1},I=(t,e,n,r)=>{const o=T(t,e);d[3*e+o]=r;const i=T(n,r);d[3*r+i]=e};for(let t=0;t<n;t++){let e=o[t];const n=o[t+1];let r=i[t];const s=i[t+1];for(;e<n&&r<s;){const n=l[2*e],o=l[2*u+2*r];n===o?(I(t,l[2*e+1],o,l[2*u+2*r+1]),e++,r++):n<o?(A(t,l[2*e+1]),e++):(A(o,l[2*u+2*r+1]),r++)}for(;e<n;)A(t,l[2*e+1]),e++;for(;r<s;)A(l[2*u+2*r],l[2*u+2*r+1]),r++}return d}var i=n(44685),s=n(21414),c=n(82976),a=n(4157),l=n(6766),u=n(8909),f=n(95397);class g{updateSettings(t){this.settings=t,this._edgeHashFunction=t.reducedPrecision?O:I}write(t,e,n){const r=this._edgeHashFunction(n);m.seed=r;const o=m.getIntRange(0,255),i=m.getIntRange(0,this.settings.variants-1),s=m.getFloat(),c=255*(.5*function(t,e){const n=t<0?-1:1;return Math.abs(t)**1.2*n}(-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7))+.5);t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex),t.variantOffset.set(e,o),t.variantStroke.set(e,i),t.variantExtension.set(e,c)}trim(t,e){return t.slice(0,e)}}const d=new Float32Array(6),T=new Uint32Array(d.buffer),A=new Uint32Array(1);function I(t){const e=d;e[0]=t.position0[0],e[1]=t.position0[1],e[2]=t.position0[2],e[3]=t.position1[0],e[4]=t.position1[1],e[5]=t.position1[2],A[0]=5381;for(let t=0;t<T.length;t++)A[0]=31*A[0]+T[t];return A[0]}function O(t){const e=d;e[0]=E(t.position0[0]),e[1]=E(t.position0[1]),e[2]=E(t.position0[2]),e[3]=E(t.position1[0]),e[4]=E(t.position1[1]),e[5]=E(t.position1[2]),A[0]=5381;for(let t=0;t<T.length;t++)A[0]=31*A[0]+T[t];return A[0]}const N=1e4;function E(t){return Math.round(t*N)/N}class p{constructor(){this._commonWriter=new g}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return c.dG.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n),(0,l.a)(h,n.faceNormal0,n.faceNormal1),(0,l.n)(h,h),t.normal.setVec(e,h)}trim(t,e){return this._commonWriter.trim(t,e)}}p.Layout=c.dG,p.glLayout=(0,f.K)(c.dG,1);class S{constructor(){this._commonWriter=new g}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return c.Hr.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n),t.normalA.setVec(e,n.faceNormal0),t.normalB.setVec(e,n.faceNormal1)}trim(t,e){return this._commonWriter.trim(t,e)}}S.Layout=c.Hr,S.glLayout=(0,f.K)(c.Hr,1);const h=(0,u.c)(),m=new a.Z;var R=n(11591);function L(t){const e=w(t.data,t.skipDeduplicate,t.indices,t.indicesLength);return U.updateSettings(t.writerSettings),y.updateSettings(t.writerSettings),(0,R.n)(e,U,y)}function w(t,e,n,i){if(e){const e=o(n,i,t.count);return new D(n,i,e,t)}const s=(0,r.d)(t.buffer,t.stride/4,{originalIndices:n,originalIndicesLength:i}),a=o(s.indices,i,s.uniqueCount);return{faces:s.indices,facesLength:s.indices.length,neighbors:a,vertices:c.tf.createView(s.buffer)}}class D{constructor(t,e,n,r){this.faces=t,this.facesLength=e,this.neighbors=n,this.vertices=r}}const U=new p,y=new S,v=(0,i.U$)().vec3f(s.T.POSITION0).vec3f(s.T.POSITION1),P=(0,i.U$)().vec3f(s.T.POSITION0).vec3f(s.T.POSITION1).u16(s.T.COMPONENTINDEX).u16(s.T.U16PADDING,{glPadding:!0})}}]);